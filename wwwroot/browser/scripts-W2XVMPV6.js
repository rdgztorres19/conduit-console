/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:49:24.446Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */(function(_t,He){typeof exports=="object"&&typeof module<"u"?He(exports):typeof define=="function"&&define.amd?define(["exports"],He):He((_t=typeof globalThis<"u"?globalThis:_t||self).vis=_t.vis||{})})(this,function(_t){"use strict";var He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function L(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eo,Fr,Ar,jr,Rr,Lr,Ro,Hr,Lo,Wr,Ho,Vr,qr,Ur,Yr,Xr,Iw={};function et(){if(Fr)return eo;Fr=1;var n=function(t){return t&&t.Math===Math&&t};return eo=n(typeof globalThis=="object"&&globalThis)||n(typeof window=="object"&&window)||n(typeof self=="object"&&self)||n(typeof He=="object"&&He)||n(typeof eo=="object"&&eo)||function(){return this}()||Function("return this")()}function U(){return jr?Ar:(jr=1,Ar=function(n){try{return!!n()}catch{return!0}})}function vi(){return Lr?Rr:(Lr=1,Rr=!U()(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")}))}function io(){if(Hr)return Ro;Hr=1;var n=vi(),t=Function.prototype,e=t.apply,i=t.call;return Ro=typeof Reflect=="object"&&Reflect.apply||(n?i.bind(e):function(){return i.apply(e,arguments)}),Ro}function Y(){if(Wr)return Lo;Wr=1;var n=vi(),t=Function.prototype,e=t.call,i=n&&t.bind.bind(e,e);return Lo=n?i:function(o){return function(){return e.apply(o,arguments)}},Lo}function qt(){if(Vr)return Ho;Vr=1;var n=Y(),t=n({}.toString),e=n("".slice);return Ho=function(i){return e(t(i),8,-1)},Ho}function Wo(){if(Ur)return qr;Ur=1;var n=qt(),t=Y();return qr=function(e){if(n(e)==="Function")return t(e)}}function pt(){if(Xr)return Yr;Xr=1;var n=typeof document=="object"&&document.all;return Yr=n===void 0&&n!==void 0?function(t){return typeof t=="function"||t===n}:function(t){return typeof t=="function"}}var Gr,Kr,Vo,Zr,qo={};function rt(){return Kr?Gr:(Kr=1,Gr=!U()(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))}function kt(){if(Zr)return Vo;Zr=1;var n=vi(),t=Function.prototype.call;return Vo=n?t.bind(t):function(){return t.apply(t,arguments)},Vo}var Qr,$r,Jr,Uo,ta,ea,ia,Yo,oa,Xo,na,Go,sa,ra,aa,Ko,ha,da,la,ca,ua,pa,fa,Zo,ga,ma,va,Qo,ya,ba,wa,_a,xa,Ea,Oa,Ca,ka,$o={};function oo(){if(Qr)return $o;Qr=1;var n={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,e=t&&!n.call({1:2},1);return $o.f=e?function(i){var o=t(this,i);return!!o&&o.enumerable}:n,$o}function yi(){return Jr?$r:(Jr=1,$r=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}})}function no(){if(ta)return Uo;ta=1;var n=Y(),t=U(),e=qt(),i=Object,o=n("".split);return Uo=t(function(){return!i("z").propertyIsEnumerable(0)})?function(s){return e(s)==="String"?o(s,""):i(s)}:i,Uo}function We(){return ia||(ia=1,ea=function(n){return n==null}),ea}function Gt(){if(oa)return Yo;oa=1;var n=We(),t=TypeError;return Yo=function(e){if(n(e))throw new t("Can't call method on "+e);return e},Yo}function Rt(){if(na)return Xo;na=1;var n=no(),t=Gt();return Xo=function(e){return n(t(e))},Xo}function ft(){if(sa)return Go;sa=1;var n=pt();return Go=function(t){return typeof t=="object"?t!==null:n(t)},Go}function G(){return aa?ra:(aa=1,ra={})}function Tt(){if(ha)return Ko;ha=1;var n=G(),t=et(),e=pt(),i=function(o){return e(o)?o:void 0};return Ko=function(o,s){return arguments.length<2?i(n[o])||i(t[o]):n[o]&&n[o][s]||t[o]&&t[o][s]},Ko}function ht(){return la?da:(la=1,da=Y()({}.isPrototypeOf))}function Ve(){if(ua)return ca;ua=1;var n=et().navigator,t=n&&n.userAgent;return ca=t?String(t):""}function bi(){if(fa)return pa;fa=1;var n,t,e=et(),i=Ve(),o=e.process,s=e.Deno,r=o&&o.versions||s&&s.version,a=r&&r.v8;return a&&(t=(n=a.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!t&&i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(t=+n[1]),pa=t}function qe(){if(ga)return Zo;ga=1;var n=bi(),t=U(),e=et().String;return Zo=!!Object.getOwnPropertySymbols&&!t(function(){var i=Symbol("symbol detection");return!e(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&n&&n<41}),Zo}function Sa(){return va?ma:(va=1,ma=qe()&&!Symbol.sham&&typeof Symbol.iterator=="symbol")}function wi(){if(ya)return Qo;ya=1;var n=Tt(),t=pt(),e=ht(),i=Object;return Qo=Sa()?function(o){return typeof o=="symbol"}:function(o){var s=n("Symbol");return t(s)&&e(s.prototype,i(o))},Qo}function Ue(){if(wa)return ba;wa=1;var n=String;return ba=function(t){try{return n(t)}catch{return"Object"}}}function Kt(){if(xa)return _a;xa=1;var n=pt(),t=Ue(),e=TypeError;return _a=function(i){if(n(i))return i;throw new e(t(i)+" is not a function")}}function Jo(){if(Oa)return Ea;Oa=1;var n=Kt(),t=We();return Ea=function(e,i){var o=e[i];return t(o)?void 0:n(o)}}function Pw(){if(ka)return Ca;ka=1;var n=kt(),t=pt(),e=ft(),i=TypeError;return Ca=function(o,s){var r,a;if(s==="string"&&t(r=o.toString)&&!e(a=n(r,o))||t(r=o.valueOf)&&!e(a=n(r,o))||s!=="string"&&t(r=o.toString)&&!e(a=n(r,o)))return a;throw new i("Can't convert object to primitive value")}}var Ta,Da,Ma,Ia,Pa,Na,Ba,za,Fa,tn,Aa,ja,Ra,La,Ha,Wa,Va,qa,Ua,en,Ya,Xa,Ga,Ka,Za,Qa,on,$a,nn={exports:{}};function Ye(){return Da?Ta:(Da=1,Ta=!0)}function Nw(){if(Ia)return Ma;Ia=1;var n=et(),t=Object.defineProperty;return Ma=function(e,i){try{t(n,e,{value:i,configurable:!0,writable:!0})}catch{n[e]=i}return i}}function sn(){if(Pa)return nn.exports;Pa=1;var n=Ye(),t=et(),e=Nw(),i="__core-js_shared__",o=nn.exports=t[i]||e(i,{});return(o.versions||(o.versions=[])).push({version:"3.44.0",mode:n?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),nn.exports}function Xe(){if(Ba)return Na;Ba=1;var n=sn();return Na=function(t,e){return n[t]||(n[t]=e||{})}}function Pt(){if(Fa)return za;Fa=1;var n=Gt(),t=Object;return za=function(e){return t(n(e))}}function vt(){if(Aa)return tn;Aa=1;var n=Y(),t=Pt(),e=n({}.hasOwnProperty);return tn=Object.hasOwn||function(i,o){return e(t(i),o)},tn}function so(){if(Ra)return ja;Ra=1;var n=Y(),t=0,e=Math.random(),i=n(1.1.toString);return ja=function(o){return"Symbol("+(o===void 0?"":o)+")_"+i(++t+e,36)}}function dt(){if(Ha)return La;Ha=1;var n=et(),t=Xe(),e=vt(),i=so(),o=qe(),s=Sa(),r=n.Symbol,a=t("wks"),h=s?r.for||r:r&&r.withoutSetter||i;return La=function(d){return e(a,d)||(a[d]=o&&e(r,d)?r[d]:h("Symbol."+d)),a[d]}}function Ja(){if(Va)return Wa;Va=1;var n=kt(),t=ft(),e=wi(),i=Jo(),o=Pw(),s=TypeError,r=dt()("toPrimitive");return Wa=function(a,h){if(!t(a)||e(a))return a;var d,l=i(a,r);if(l){if(h===void 0&&(h="default"),d=n(l,a,h),!t(d)||e(d))return d;throw new s("Can't convert object to primitive value")}return h===void 0&&(h="number"),o(a,h)}}function rn(){if(Ua)return qa;Ua=1;var n=Ja(),t=wi();return qa=function(e){var i=n(e,"string");return t(i)?i:i+""}}function th(){if(Ya)return en;Ya=1;var n=et(),t=ft(),e=n.document,i=t(e)&&t(e.createElement);return en=function(o){return i?e.createElement(o):{}},en}function eh(){if(Ga)return Xa;Ga=1;var n=rt(),t=U(),e=th();return Xa=!n&&!t(function(){return Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a!==7})}function ro(){if(Ka)return qo;Ka=1;var n=rt(),t=kt(),e=oo(),i=yi(),o=Rt(),s=rn(),r=vt(),a=eh(),h=Object.getOwnPropertyDescriptor;return qo.f=n?h:function(d,l){if(d=o(d),l=s(l),a)try{return h(d,l)}catch{}if(r(d,l))return i(!t(e.f,d,l),d[l])},qo}function Bw(){if(Qa)return Za;Qa=1;var n=U(),t=pt(),e=/#|\.prototype\./,i=function(h,d){var l=s[o(h)];return l===a||l!==r&&(t(d)?n(d):!!d)},o=i.normalize=function(h){return String(h).replace(e,".").toLowerCase()},s=i.data={},r=i.NATIVE="N",a=i.POLYFILL="P";return Za=i}function ao(){if($a)return on;$a=1;var n=Wo(),t=Kt(),e=vi(),i=n(n.bind);return on=function(o,s){return t(o),s===void 0?o:e?i(o,s):function(){return o.apply(s,arguments)}},on}var ih,oh,nh,sh,rh,an,ah,hh,dh,lh,ch,hn,uh,dn,ph,fh,gh,mh,vh,yh,bh,wh,_h,ln,xh,Eh,Oh,Ch,kh,cn={};function Sh(){return oh?ih:(oh=1,ih=rt()&&U()(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}))}function Ut(){if(sh)return nh;sh=1;var n=ft(),t=String,e=TypeError;return nh=function(i){if(n(i))return i;throw new e(t(i)+" is not an object")}}function Nt(){if(rh)return cn;rh=1;var n=rt(),t=eh(),e=Sh(),i=Ut(),o=rn(),s=TypeError,r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",l="writable";return cn.f=n?e?function(c,u,p){if(i(c),u=o(u),i(p),typeof c=="function"&&u==="prototype"&&"value"in p&&l in p&&!p[l]){var g=a(c,u);g&&g[l]&&(c[u]=p.value,p={configurable:d in p?p[d]:g[d],enumerable:h in p?p[h]:g[h],writable:!1})}return r(c,u,p)}:r:function(c,u,p){if(i(c),u=o(u),i(p),t)try{return r(c,u,p)}catch{}if("get"in p||"set"in p)throw new s("Accessors not supported");return"value"in p&&(c[u]=p.value),c},cn}function Ge(){if(ah)return an;ah=1;var n=rt(),t=Nt(),e=yi();return an=n?function(i,o,s){return t.f(i,o,e(1,s))}:function(i,o,s){return i[o]=s,i},an}function A(){if(dh)return hh;dh=1;var n=et(),t=io(),e=Wo(),i=pt(),o=ro().f,s=Bw(),r=G(),a=ao(),h=Ge(),d=vt(),l=function(c){var u=function(p,g,m){if(this instanceof u){switch(arguments.length){case 0:return new c;case 1:return new c(p);case 2:return new c(p,g)}return new c(p,g,m)}return t(c,this,arguments)};return u.prototype=c.prototype,u};return hh=function(c,u){var p,g,m,f,v,y,_,b,w,E=c.target,D=c.global,O=c.stat,k=c.proto,B=D?n:O?n[E]:n[E]&&n[E].prototype,S=D?r:r[E]||h(r,E,{})[E],C=S.prototype;for(f in u)g=!(p=s(D?f:E+(O?".":"#")+f,c.forced))&&B&&d(B,f),y=S[f],g&&(_=c.dontCallGetSet?(w=o(B,f))&&w.value:B[f]),v=g&&_?_:u[f],(p||k||typeof y!=typeof v)&&(b=c.bind&&g?a(v,n):c.wrap&&g?l(v):k&&i(v)?e(v):v,(c.sham||v&&v.sham||y&&y.sham)&&h(b,"sham",!0),h(S,f,b),k&&(d(r,m=E+"Prototype")||h(r,m,{}),h(r[m],f,v),c.real&&C&&(p||!C[f])&&h(C,f,v)))}}function zw(){if(ch)return lh;ch=1;var n=Math.ceil,t=Math.floor;return lh=Math.trunc||function(e){var i=+e;return(i>0?t:n)(i)}}function Ke(){if(uh)return hn;uh=1;var n=zw();return hn=function(t){var e=+t;return e!=e||e===0?0:n(e)},hn}function ho(){if(ph)return dn;ph=1;var n=Ke(),t=Math.max,e=Math.min;return dn=function(i,o){var s=n(i);return s<0?t(s+o,0):e(s,o)},dn}function Th(){if(gh)return fh;gh=1;var n=Ke(),t=Math.min;return fh=function(e){var i=n(e);return i>0?t(i,9007199254740991):0}}function Zt(){if(vh)return mh;vh=1;var n=Th();return mh=function(t){return n(t.length)}}function un(){if(bh)return yh;bh=1;var n=Rt(),t=ho(),e=Zt(),i=function(o){return function(s,r,a){var h=n(s),d=e(h);if(d===0)return!o&&-1;var l,c=t(a,d);if(o&&r!=r){for(;d>c;)if((l=h[c++])!=l)return!0}else for(;d>c;c++)if((o||c in h)&&h[c]===r)return o||c||0;return!o&&-1}};return yh={includes:i(!0),indexOf:i(!1)}}function _i(){return _h?wh:(_h=1,wh={})}function Dh(){if(xh)return ln;xh=1;var n=Y(),t=vt(),e=Rt(),i=un().indexOf,o=_i(),s=n([].push);return ln=function(r,a){var h,d=e(r),l=0,c=[];for(h in d)!t(o,h)&&t(d,h)&&s(c,h);for(;a.length>l;)t(d,h=a[l++])&&(~i(c,h)||s(c,h));return c},ln}function pn(){return Oh?Eh:(Oh=1,Eh=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}function xi(){if(kh)return Ch;kh=1;var n=Dh(),t=pn();return Ch=Object.keys||function(e){return n(e,t)}}var Mh,fn,Ih,Ph,Nh,Bh,zh,Fh,Ah,jh,Rh={};function lo(){return Mh||(Mh=1,Rh.f=Object.getOwnPropertySymbols),Rh}function Fw(){if(Ih)return fn;Ih=1;var n=rt(),t=Y(),e=kt(),i=U(),o=xi(),s=lo(),r=oo(),a=Pt(),h=no(),d=Object.assign,l=Object.defineProperty,c=t([].concat);return fn=!d||i(function(){if(n&&d({b:1},d(l({},"a",{enumerable:!0,get:function(){l(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var u={},p={},g=Symbol("assign detection"),m="abcdefghijklmnopqrst";return u[g]=7,m.split("").forEach(function(f){p[f]=f}),d({},u)[g]!==7||o(d({},p)).join("")!==m})?function(u,p){for(var g=a(u),m=arguments.length,f=1,v=s.f,y=r.f;m>f;)for(var _,b=h(arguments[f++]),w=v?c(o(b),v(b)):o(b),E=w.length,D=0;E>D;)_=w[D++],n&&!e(y,b,_)||(g[_]=b[_]);return g}:d,fn}function Aw(){return Bh?Nh:(Bh=1,function(){if(Ph)return Iw;Ph=1;var n=A(),t=Fw();n({target:"Object",stat:!0,arity:2,forced:Object.assign!==t},{assign:t})}(),Nh=G().Object.assign)}function jw(){return Fh?zh:(Fh=1,zh=Aw())}var Lh,Hh,gn,Wh,Vh,qh,Uh,Yh,Xh,mn,Gh,Kh,Zh,Qh,$h,yt=L(jh?Ah:(jh=1,Ah=jw())),Rw={};function Ze(){return Hh?Lh:(Hh=1,Lh=Y()([].slice))}function Lw(){if(Wh)return gn;Wh=1;var n=Y(),t=Kt(),e=ft(),i=vt(),o=Ze(),s=vi(),r=Function,a=n([].concat),h=n([].join),d={};return gn=s?r.bind:function(l){var c=t(this),u=c.prototype,p=o(arguments,1),g=function(){var m=a(p,o(arguments));return this instanceof g?function(f,v,y){if(!i(d,v)){for(var _=[],b=0;b<v;b++)_[b]="a["+b+"]";d[v]=r("C,a","return new C("+h(_,",")+")")}return d[v](f,y)}(c,m.length,m):c.apply(l,m)};return e(u)&&(g.prototype=u),g},gn}function bt(){if(Uh)return qh;Uh=1;var n=et(),t=G();return qh=function(e,i){var o=t[e+"Prototype"],s=o&&o[i];if(s)return s;var r=n[e],a=r&&r.prototype;return a&&a[i]}}function Hw(){return Xh?Yh:(Xh=1,function(){if(Vh)return Rw;Vh=1;var n=A(),t=Lw();n({target:"Function",proto:!0,forced:Function.bind!==t},{bind:t})}(),Yh=bt()("Function","bind"))}function Ww(){if(Gh)return mn;Gh=1;var n=ht(),t=Hw(),e=Function.prototype;return mn=function(i){var o=i.bind;return i===e||n(e,i)&&o===e.bind?t:o},mn}function Vw(){return Zh?Kh:(Zh=1,Kh=Ww())}var I=L($h?Qh:($h=1,Qh=Vw()));function vn(n,t,e,i){n.beginPath(),n.arc(t,e,i,0,2*Math.PI,!1),n.closePath()}function Jh(n,t,e,i,o,s){const r=Math.PI/180;i-2*s<0&&(s=i/2),o-2*s<0&&(s=o/2),n.beginPath(),n.moveTo(t+s,e),n.lineTo(t+i-s,e),n.arc(t+i-s,e+s,s,270*r,360*r,!1),n.lineTo(t+i,e+o-s),n.arc(t+i-s,e+o-s,s,0,90*r,!1),n.lineTo(t+s,e+o),n.arc(t+s,e+o-s,s,90*r,180*r,!1),n.lineTo(t,e+s),n.arc(t+s,e+s,s,180*r,270*r,!1),n.closePath()}function yn(n,t,e,i,o){const s=.5522848,r=i/2*s,a=o/2*s,h=t+i,d=e+o,l=t+i/2,c=e+o/2;n.beginPath(),n.moveTo(t,c),n.bezierCurveTo(t,c-a,l-r,e,l,e),n.bezierCurveTo(l+r,e,h,c-a,h,c),n.bezierCurveTo(h,c+a,l+r,d,l,d),n.bezierCurveTo(l-r,d,t,c+a,t,c),n.closePath()}function td(n,t,e,i,o){const s=o*.3333333333333333,r=.5522848,a=i/2*r,h=s/2*r,d=t+i,l=e+s,c=t+i/2,u=e+s/2,p=e+(o-s/2),g=e+o;n.beginPath(),n.moveTo(d,u),n.bezierCurveTo(d,u+h,c+a,l,c,l),n.bezierCurveTo(c-a,l,t,u+h,t,u),n.bezierCurveTo(t,u-h,c-a,e,c,e),n.bezierCurveTo(c+a,e,d,u-h,d,u),n.lineTo(d,p),n.bezierCurveTo(d,p+h,c+a,g,c,g),n.bezierCurveTo(c-a,g,t,p+h,t,p),n.lineTo(t,u)}function ed(n,t,e,i,o,s){n.beginPath(),n.moveTo(t,e);const r=s.length,a=i-t,h=o-e,d=h/a;let l=Math.sqrt(a*a+h*h),c=0,u=!0,p=0,g=+s[0];for(;l>=.1;)g=+s[c++%r],g>l&&(g=l),p=Math.sqrt(g*g/(1+d*d)),p=a<0?-p:p,t+=p,e+=d*p,u===!0?n.lineTo(t,e):n.moveTo(t,e),l-=g,u=!u}const id={circle:vn,dashedLine:ed,database:td,diamond:function(n,t,e,i){n.beginPath(),n.lineTo(t,e+i),n.lineTo(t+i,e),n.lineTo(t,e-i),n.lineTo(t-i,e),n.closePath()},ellipse:yn,ellipse_vis:yn,hexagon:function(n,t,e,i){n.beginPath();const o=2*Math.PI/6;n.moveTo(t+i,e);for(let s=1;s<6;s++)n.lineTo(t+i*Math.cos(o*s),e+i*Math.sin(o*s));n.closePath()},roundRect:Jh,square:function(n,t,e,i){n.beginPath(),n.rect(t-i,e-i,2*i,2*i),n.closePath()},star:function(n,t,e,i){n.beginPath(),e+=.1*(i*=.82);for(let o=0;o<10;o++){const s=o%2==0?1.3*i:.5*i;n.lineTo(t+s*Math.sin(2*o*Math.PI/10),e-s*Math.cos(2*o*Math.PI/10))}n.closePath()},triangle:function(n,t,e,i){n.beginPath(),e+=.275*(i*=1.15);const o=2*i,s=o/2,r=Math.sqrt(3)/6*o,a=Math.sqrt(o*o-s*s);n.moveTo(t,e-(a-r)),n.lineTo(t+s,e+r),n.lineTo(t-s,e+r),n.lineTo(t,e-(a-r)),n.closePath()},triangleDown:function(n,t,e,i){n.beginPath(),e-=.275*(i*=1.15);const o=2*i,s=o/2,r=Math.sqrt(3)/6*o,a=Math.sqrt(o*o-s*s);n.moveTo(t,e+(a-r)),n.lineTo(t+s,e-r),n.lineTo(t-s,e-r),n.lineTo(t,e+(a-r)),n.closePath()}};var od,nd={exports:{}},sd,qw=(od||(od=1,function(n){function t(e){if(e)return function(i){for(var o in t.prototype)i[o]=t.prototype[o];return i}(e)}n.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(i),this},t.prototype.once=function(e,i){function o(){this.off(e,o),i.apply(this,arguments)}return o.fn=i,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o,s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r=0;r<s.length;r++)if((o=s[r])===i||o.fn===i){s.splice(r,1);break}return s.length===0&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),o=this._callbacks["$"+e],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(o){s=0;for(var r=(o=o.slice(0)).length;s<r;++s)o[s].apply(this,i)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}(nd)),nd.exports),rd=L(qw);function Lt(){return Lt=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Lt.apply(this,arguments)}function Bt(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}function co(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}sd=typeof Object.assign!="function"?function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(n),e=1;e<arguments.length;e++){var i=arguments[e];if(i!=null)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}:Object.assign;var ne,we=sd,ad=["","webkit","Moz","MS","ms","o"],Uw=typeof document>"u"?{style:{}}:document.createElement("div"),Qe=Math.round,_e=Math.abs,bn=Date.now;function uo(n,t){for(var e,i,o=t[0].toUpperCase()+t.slice(1),s=0;s<ad.length;){if((i=(e=ad[s])?e+o:t)in n)return i;s++}}ne=typeof window>"u"?{}:window;var hd=uo(Uw.style,"touchAction"),dd=hd!==void 0,ld="compute",cd="auto",wn="manipulation",xe="none",Ei="pan-x",Oi="pan-y",po=function(){if(!dd)return!1;var n={},t=ne.CSS&&ne.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){return n[e]=!t||ne.CSS.supports("touch-action",e)}),n}(),ud="ontouchstart"in ne,Yw=uo(ne,"PointerEvent")!==void 0,Xw=ud&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Ci="touch",_n="mouse",ki=16,fo=24,pd=["x","y"],go=["clientX","clientY"];function Qt(n,t,e){var i;if(n)if(n.forEach)n.forEach(t,e);else if(n.length!==void 0)for(i=0;i<n.length;)t.call(e,n[i],i,n),i++;else for(i in n)n.hasOwnProperty(i)&&t.call(e,n[i],i,n)}function mo(n,t){return typeof n=="function"?n.apply(t&&t[0]||void 0,t):n}function Ee(n,t){return n.indexOf(t)>-1}var fd=function(){function n(e,i){this.manager=e,this.set(i)}var t=n.prototype;return t.set=function(e){e===ld&&(e=this.compute()),dd&&this.manager.element.style&&po[e]&&(this.manager.element.style[hd]=e),this.actions=e.toLowerCase().trim()},t.update=function(){this.set(this.manager.options.touchAction)},t.compute=function(){var e=[];return Qt(this.manager.recognizers,function(i){mo(i.options.enable,[i])&&(e=e.concat(i.getTouchAction()))}),function(i){if(Ee(i,xe))return xe;var o=Ee(i,Ei),s=Ee(i,Oi);return o&&s?xe:o||s?o?Ei:Oi:Ee(i,wn)?wn:cd}(e.join(" "))},t.preventDefaults=function(e){var i=e.srcEvent,o=e.offsetDirection;if(this.manager.session.prevented)i.preventDefault();else{var s=this.actions,r=Ee(s,xe)&&!po[xe],a=Ee(s,Oi)&&!po[Oi],h=Ee(s,Ei)&&!po[Ei];if(r){var d=e.pointers.length===1,l=e.distance<2,c=e.deltaTime<250;if(d&&l&&c)return}if(!h||!a)return r||a&&6&o||h&&o&fo?this.preventSrc(i):void 0}},t.preventSrc=function(e){this.manager.session.prevented=!0,e.preventDefault()},n}();function xn(n,t){for(;n;){if(n===t)return!0;n=n.parentNode}return!1}function gd(n){var t=n.length;if(t===1)return{x:Qe(n[0].clientX),y:Qe(n[0].clientY)};for(var e=0,i=0,o=0;o<t;)e+=n[o].clientX,i+=n[o].clientY,o++;return{x:Qe(e/t),y:Qe(i/t)}}function md(n){for(var t=[],e=0;e<n.pointers.length;)t[e]={clientX:Qe(n.pointers[e].clientX),clientY:Qe(n.pointers[e].clientY)},e++;return{timeStamp:bn(),pointers:t,center:gd(t),deltaX:n.deltaX,deltaY:n.deltaY}}function vo(n,t,e){e||(e=pd);var i=t[e[0]]-n[e[0]],o=t[e[1]]-n[e[1]];return Math.sqrt(i*i+o*o)}function En(n,t,e){e||(e=pd);var i=t[e[0]]-n[e[0]],o=t[e[1]]-n[e[1]];return 180*Math.atan2(o,i)/Math.PI}function vd(n,t){return n===t?1:_e(n)>=_e(t)?n<0?2:4:t<0?8:ki}function yd(n,t,e){return{x:t/n||0,y:e/n||0}}function Gw(n,t){var e=n.session,i=t.pointers,o=i.length;e.firstInput||(e.firstInput=md(t)),o>1&&!e.firstMultiple?e.firstMultiple=md(t):o===1&&(e.firstMultiple=!1);var s=e.firstInput,r=e.firstMultiple,a=r?r.center:s.center,h=t.center=gd(i);t.timeStamp=bn(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=En(a,h),t.distance=vo(a,h),function(m,f){var v=f.center,y=m.offsetDelta||{},_=m.prevDelta||{},b=m.prevInput||{};f.eventType!==1&&b.eventType!==4||(_=m.prevDelta={x:b.deltaX||0,y:b.deltaY||0},y=m.offsetDelta={x:v.x,y:v.y}),f.deltaX=_.x+(v.x-y.x),f.deltaY=_.y+(v.y-y.y)}(e,t),t.offsetDirection=vd(t.deltaX,t.deltaY);var d,l,c=yd(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=_e(c.x)>_e(c.y)?c.x:c.y,t.scale=r?(d=r.pointers,vo((l=i)[0],l[1],go)/vo(d[0],d[1],go)):1,t.rotation=r?function(m,f){return En(f[1],f[0],go)+En(m[1],m[0],go)}(r.pointers,i):0,t.maxPointers=e.prevInput?t.pointers.length>e.prevInput.maxPointers?t.pointers.length:e.prevInput.maxPointers:t.pointers.length,function(m,f){var v,y,_,b,w=m.lastInterval||f,E=f.timeStamp-w.timeStamp;if(f.eventType!==8&&(E>25||w.velocity===void 0)){var D=f.deltaX-w.deltaX,O=f.deltaY-w.deltaY,k=yd(E,D,O);y=k.x,_=k.y,v=_e(k.x)>_e(k.y)?k.x:k.y,b=vd(D,O),m.lastInterval=f}else v=w.velocity,y=w.velocityX,_=w.velocityY,b=w.direction;f.velocity=v,f.velocityX=y,f.velocityY=_,f.direction=b}(e,t);var u,p=n.element,g=t.srcEvent;xn(u=g.composedPath?g.composedPath()[0]:g.path?g.path[0]:g.target,p)&&(p=u),t.target=p}function Kw(n,t,e){var i=e.pointers.length,o=e.changedPointers.length,s=1&t&&i-o===0,r=12&t&&i-o===0;e.isFirst=!!s,e.isFinal=!!r,s&&(n.session={}),e.eventType=t,Gw(n,e),n.emit("hammer.input",e),n.recognize(e),n.session.prevInput=e}function Si(n){return n.trim().split(/\s+/g)}function Ti(n,t,e){Qt(Si(t),function(i){n.addEventListener(i,e,!1)})}function Di(n,t,e){Qt(Si(t),function(i){n.removeEventListener(i,e,!1)})}function bd(n){var t=n.ownerDocument||n;return t.defaultView||t.parentWindow||window}var $e=function(){function n(e,i){var o=this;this.manager=e,this.callback=i,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(s){mo(e.options.enable,[e])&&o.handler(s)},this.init()}var t=n.prototype;return t.handler=function(){},t.init=function(){this.evEl&&Ti(this.element,this.evEl,this.domHandler),this.evTarget&&Ti(this.target,this.evTarget,this.domHandler),this.evWin&&Ti(bd(this.element),this.evWin,this.domHandler)},t.destroy=function(){this.evEl&&Di(this.element,this.evEl,this.domHandler),this.evTarget&&Di(this.target,this.evTarget,this.domHandler),this.evWin&&Di(bd(this.element),this.evWin,this.domHandler)},n}();function Oe(n,t,e){if(n.indexOf&&!e)return n.indexOf(t);for(var i=0;i<n.length;){if(e&&n[i][e]==t||!e&&n[i]===t)return i;i++}return-1}var Zw={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Qw={2:Ci,3:"pen",4:_n,5:"kinect"},wd="pointerdown",_d="pointermove pointerup pointercancel";ne.MSPointerEvent&&!ne.PointerEvent&&(wd="MSPointerDown",_d="MSPointerMove MSPointerUp MSPointerCancel");var xd=function(n){function t(){var e,i=t.prototype;return i.evEl=wd,i.evWin=_d,(e=n.apply(this,arguments)||this).store=e.manager.session.pointerEvents=[],e}return Bt(t,n),t.prototype.handler=function(e){var i=this.store,o=!1,s=e.type.toLowerCase().replace("ms",""),r=Zw[s],a=Qw[e.pointerType]||e.pointerType,h=a===Ci,d=Oe(i,e.pointerId,"pointerId");1&r&&(e.button===0||h)?d<0&&(i.push(e),d=i.length-1):12&r&&(o=!0),d<0||(i[d]=e,this.callback(this.manager,r,{pointers:i,changedPointers:[e],pointerType:a,srcEvent:e}),o&&i.splice(d,1))},t}($e);function Mi(n){return Array.prototype.slice.call(n,0)}function On(n,t,e){for(var i=[],o=[],s=0;s<n.length;){var r=t?n[s][t]:n[s];Oe(o,r)<0&&i.push(n[s]),o[s]=r,s++}return e&&(i=t?i.sort(function(a,h){return a[t]>h[t]}):i.sort()),i}var $w={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Cn=function(n){function t(){var e;return t.prototype.evTarget="touchstart touchmove touchend touchcancel",(e=n.apply(this,arguments)||this).targetIds={},e}return Bt(t,n),t.prototype.handler=function(e){var i=$w[e.type],o=Jw.call(this,e,i);o&&this.callback(this.manager,i,{pointers:o[0],changedPointers:o[1],pointerType:Ci,srcEvent:e})},t}($e);function Jw(n,t){var e,i,o=Mi(n.touches),s=this.targetIds;if(3&t&&o.length===1)return s[o[0].identifier]=!0,[o,o];var r=Mi(n.changedTouches),a=[],h=this.target;if(i=o.filter(function(d){return xn(d.target,h)}),t===1)for(e=0;e<i.length;)s[i[e].identifier]=!0,e++;for(e=0;e<r.length;)s[r[e].identifier]&&a.push(r[e]),12&t&&delete s[r[e].identifier],e++;return a.length?[On(i.concat(a),"identifier",!0),a]:void 0}var t1={mousedown:1,mousemove:2,mouseup:4},kn=function(n){function t(){var e,i=t.prototype;return i.evEl="mousedown",i.evWin="mousemove mouseup",(e=n.apply(this,arguments)||this).pressed=!1,e}return Bt(t,n),t.prototype.handler=function(e){var i=t1[e.type];1&i&&e.button===0&&(this.pressed=!0),2&i&&e.which!==1&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[e],changedPointers:[e],pointerType:_n,srcEvent:e}))},t}($e);function Ed(n){var t=n.changedPointers[0];if(t.identifier===this.primaryTouch){var e={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(e),setTimeout(function(){var o=i.indexOf(e);o>-1&&i.splice(o,1)},2500)}}function e1(n,t){1&n?(this.primaryTouch=t.changedPointers[0].identifier,Ed.call(this,t)):12&n&&Ed.call(this,t)}function i1(n){for(var t=n.srcEvent.clientX,e=n.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],s=Math.abs(t-o.x),r=Math.abs(e-o.y);if(s<=25&&r<=25)return!0}return!1}var Od=function(){return function(n){function t(e,i){var o;return(o=n.call(this,e,i)||this).handler=function(s,r,a){var h=a.pointerType===Ci,d=a.pointerType===_n;if(!(d&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(h)e1.call(co(co(o)),r,a);else if(d&&i1.call(co(co(o)),a))return;o.callback(s,r,a)}},o.touch=new Cn(o.manager,o.handler),o.mouse=new kn(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}return Bt(t,n),t.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t}($e)}();function Je(n,t,e){return!!Array.isArray(n)&&(Qt(n,e[t],e),!0)}var se=32,o1=1;function yo(n,t){var e=t.manager;return e?e.get(n):n}function Cd(n){return 16&n?"cancel":8&n?"end":4&n?"move":2&n?"start":""}var Ii=function(){function n(e){e===void 0&&(e={}),this.options=Lt({enable:!0},e),this.id=o1++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var t=n.prototype;return t.set=function(e){return we(this.options,e),this.manager&&this.manager.touchAction.update(),this},t.recognizeWith=function(e){if(Je(e,"recognizeWith",this))return this;var i=this.simultaneous;return i[(e=yo(e,this)).id]||(i[e.id]=e,e.recognizeWith(this)),this},t.dropRecognizeWith=function(e){return Je(e,"dropRecognizeWith",this)||(e=yo(e,this),delete this.simultaneous[e.id]),this},t.requireFailure=function(e){if(Je(e,"requireFailure",this))return this;var i=this.requireFail;return Oe(i,e=yo(e,this))===-1&&(i.push(e),e.requireFailure(this)),this},t.dropRequireFailure=function(e){if(Je(e,"dropRequireFailure",this))return this;e=yo(e,this);var i=Oe(this.requireFail,e);return i>-1&&this.requireFail.splice(i,1),this},t.hasRequireFailures=function(){return this.requireFail.length>0},t.canRecognizeWith=function(e){return!!this.simultaneous[e.id]},t.emit=function(e){var i=this,o=this.state;function s(r){i.manager.emit(r,e)}o<8&&s(i.options.event+Cd(o)),s(i.options.event),e.additionalEvent&&s(e.additionalEvent),o>=8&&s(i.options.event+Cd(o))},t.tryEmit=function(e){if(this.canEmit())return this.emit(e);this.state=se},t.canEmit=function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},t.recognize=function(e){var i=we({},e);if(!mo(this.options.enable,[this,i]))return this.reset(),void(this.state=se);56&this.state&&(this.state=1),this.state=this.process(i),30&this.state&&this.tryEmit(i)},t.process=function(e){},t.getTouchAction=function(){},t.reset=function(){},n}(),Sn=function(n){function t(i){var o;return i===void 0&&(i={}),(o=n.call(this,Lt({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this).pTime=!1,o.pCenter=!1,o._timer=null,o._input=null,o.count=0,o}Bt(t,n);var e=t.prototype;return e.getTouchAction=function(){return[wn]},e.process=function(i){var o=this,s=this.options,r=i.pointers.length===s.pointers,a=i.distance<s.threshold,h=i.deltaTime<s.time;if(this.reset(),1&i.eventType&&this.count===0)return this.failTimeout();if(a&&h&&r){if(i.eventType!==4)return this.failTimeout();var d=!this.pTime||i.timeStamp-this.pTime<s.interval,l=!this.pCenter||vo(this.pCenter,i.center)<s.posThreshold;if(this.pTime=i.timeStamp,this.pCenter=i.center,l&&d?this.count+=1:this.count=1,this._input=i,this.count%s.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){o.state=8,o.tryEmit()},s.interval),2):8}return se},e.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=se},this.options.interval),se},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){this.state===8&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},t}(Ii),ti=function(n){function t(i){return i===void 0&&(i={}),n.call(this,Lt({pointers:1},i))||this}Bt(t,n);var e=t.prototype;return e.attrTest=function(i){var o=this.options.pointers;return o===0||i.pointers.length===o},e.process=function(i){var o=this.state,s=i.eventType,r=6&o,a=this.attrTest(i);return r&&(8&s||!a)?16|o:r||a?4&s?8|o:2&o?4|o:2:se},t}(Ii);function kd(n){return n===ki?"down":n===8?"up":n===2?"left":n===4?"right":""}var Tn=function(n){function t(i){var o;return i===void 0&&(i={}),(o=n.call(this,Lt({event:"pan",threshold:10,pointers:1,direction:30},i))||this).pX=null,o.pY=null,o}Bt(t,n);var e=t.prototype;return e.getTouchAction=function(){var i=this.options.direction,o=[];return 6&i&&o.push(Oi),i&fo&&o.push(Ei),o},e.directionTest=function(i){var o=this.options,s=!0,r=i.distance,a=i.direction,h=i.deltaX,d=i.deltaY;return a&o.direction||(6&o.direction?(a=h===0?1:h<0?2:4,s=h!==this.pX,r=Math.abs(i.deltaX)):(a=d===0?1:d<0?8:ki,s=d!==this.pY,r=Math.abs(i.deltaY))),i.direction=a,s&&r>o.threshold&&a&o.direction},e.attrTest=function(i){return ti.prototype.attrTest.call(this,i)&&(2&this.state||!(2&this.state)&&this.directionTest(i))},e.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var o=kd(i.direction);o&&(i.additionalEvent=this.options.event+o),n.prototype.emit.call(this,i)},t}(ti),Sd=function(n){function t(i){return i===void 0&&(i={}),n.call(this,Lt({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},i))||this}Bt(t,n);var e=t.prototype;return e.getTouchAction=function(){return Tn.prototype.getTouchAction.call(this)},e.attrTest=function(i){var o,s=this.options.direction;return 30&s?o=i.overallVelocity:6&s?o=i.overallVelocityX:s&fo&&(o=i.overallVelocityY),n.prototype.attrTest.call(this,i)&&s&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&_e(o)>this.options.velocity&&4&i.eventType},e.emit=function(i){var o=kd(i.offsetDirection);o&&this.manager.emit(this.options.event+o,i),this.manager.emit(this.options.event,i)},t}(ti),Td=function(n){function t(i){return i===void 0&&(i={}),n.call(this,Lt({event:"pinch",threshold:0,pointers:2},i))||this}Bt(t,n);var e=t.prototype;return e.getTouchAction=function(){return[xe]},e.attrTest=function(i){return n.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||2&this.state)},e.emit=function(i){if(i.scale!==1){var o=i.scale<1?"in":"out";i.additionalEvent=this.options.event+o}n.prototype.emit.call(this,i)},t}(ti),Dd=function(n){function t(i){return i===void 0&&(i={}),n.call(this,Lt({event:"rotate",threshold:0,pointers:2},i))||this}Bt(t,n);var e=t.prototype;return e.getTouchAction=function(){return[xe]},e.attrTest=function(i){return n.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||2&this.state)},t}(ti),Md=function(n){function t(i){var o;return i===void 0&&(i={}),(o=n.call(this,Lt({event:"press",pointers:1,time:251,threshold:9},i))||this)._timer=null,o._input=null,o}Bt(t,n);var e=t.prototype;return e.getTouchAction=function(){return[cd]},e.process=function(i){var o=this,s=this.options,r=i.pointers.length===s.pointers,a=i.distance<s.threshold,h=i.deltaTime>s.time;if(this._input=i,!a||!r||12&i.eventType&&!h)this.reset();else if(1&i.eventType)this.reset(),this._timer=setTimeout(function(){o.state=8,o.tryEmit()},s.time);else if(4&i.eventType)return 8;return se},e.reset=function(){clearTimeout(this._timer)},e.emit=function(i){this.state===8&&(i&&4&i.eventType?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=bn(),this.manager.emit(this.options.event,this._input)))},t}(Ii),Id={domEvents:!1,touchAction:ld,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Pd=[[Dd,{enable:!1}],[Td,{enable:!1},["rotate"]],[Sd,{direction:6}],[Tn,{direction:6},["swipe"]],[Sn],[Sn,{event:"doubletap",taps:2},["tap"]],[Md]];function Nd(n,t){var e,i=n.element;i.style&&(Qt(n.options.cssProps,function(o,s){e=uo(i.style,s),t?(n.oldCssProps[e]=i.style[e],i.style[e]=o):i.style[e]=n.oldCssProps[e]||""}),t||(n.oldCssProps={}))}var Bd=function(){function n(e,i){var o,s=this;this.options=we({},Id,i||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((o=this).options.inputClass||(Yw?xd:Xw?Cn:ud?Od:kn))(o,Kw),this.touchAction=new fd(this,this.options.touchAction),Nd(this,!0),Qt(this.options.recognizers,function(r){var a=s.add(new r[0](r[1]));r[2]&&a.recognizeWith(r[2]),r[3]&&a.requireFailure(r[3])},this)}var t=n.prototype;return t.set=function(e){return we(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},t.stop=function(e){this.session.stopped=e?2:1},t.recognize=function(e){var i=this.session;if(!i.stopped){var o;this.touchAction.preventDefaults(e);var s=this.recognizers,r=i.curRecognizer;(!r||r&&8&r.state)&&(i.curRecognizer=null,r=null);for(var a=0;a<s.length;)o=s[a],i.stopped===2||r&&o!==r&&!o.canRecognizeWith(r)?o.reset():o.recognize(e),!r&&14&o.state&&(i.curRecognizer=o,r=o),a++}},t.get=function(e){if(e instanceof Ii)return e;for(var i=this.recognizers,o=0;o<i.length;o++)if(i[o].options.event===e)return i[o];return null},t.add=function(e){if(Je(e,"add",this))return this;var i=this.get(e.options.event);return i&&this.remove(i),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},t.remove=function(e){if(Je(e,"remove",this))return this;var i=this.get(e);if(e){var o=this.recognizers,s=Oe(o,i);s!==-1&&(o.splice(s,1),this.touchAction.update())}return this},t.on=function(e,i){if(e===void 0||i===void 0)return this;var o=this.handlers;return Qt(Si(e),function(s){o[s]=o[s]||[],o[s].push(i)}),this},t.off=function(e,i){if(e===void 0)return this;var o=this.handlers;return Qt(Si(e),function(s){i?o[s]&&o[s].splice(Oe(o[s],i),1):delete o[s]}),this},t.emit=function(e,i){this.options.domEvents&&function(r,a){var h=document.createEvent("Event");h.initEvent(r,!0,!0),h.gesture=a,a.target.dispatchEvent(h)}(e,i);var o=this.handlers[e]&&this.handlers[e].slice();if(o&&o.length){i.type=e,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var s=0;s<o.length;)o[s](i),s++}},t.destroy=function(){this.element&&Nd(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},n}(),n1={touchstart:1,touchmove:2,touchend:4,touchcancel:8},s1=function(n){function t(){var e,i=t.prototype;return i.evTarget="touchstart",i.evWin="touchstart touchmove touchend touchcancel",(e=n.apply(this,arguments)||this).started=!1,e}return Bt(t,n),t.prototype.handler=function(e){var i=n1[e.type];if(i===1&&(this.started=!0),this.started){var o=r1.call(this,e,i);12&i&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,i,{pointers:o[0],changedPointers:o[1],pointerType:Ci,srcEvent:e})}},t}($e);function r1(n,t){var e=Mi(n.touches),i=Mi(n.changedTouches);return 12&t&&(e=On(e.concat(i),"identifier",!0)),[e,i]}function zd(n,t,e){var i="DEPRECATED METHOD: "+t+`
`+e+` AT 
`;return function(){var o=new Error("get-stack-trace"),s=o&&o.stack?o.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,s),n.apply(this,arguments)}}var Fd=zd(function(n,t,e){for(var i=Object.keys(t),o=0;o<i.length;)(!e||e&&n[i[o]]===void 0)&&(n[i[o]]=t[i[o]]),o++;return n},"extend","Use `assign`."),a1=zd(function(n,t){return Fd(n,t,!0)},"merge","Use `assign`.");function h1(n,t,e){var i,o=t.prototype;(i=n.prototype=Object.create(o)).constructor=n,i._super=o,e&&we(i,e)}function Ad(n,t){return function(){return n.apply(t,arguments)}}var jd=function(){var n=function(t,e){return e===void 0&&(e={}),new Bd(t,Lt({recognizers:Pd.concat()},e))};return n.VERSION="2.0.17-rc",n.DIRECTION_ALL=30,n.DIRECTION_DOWN=ki,n.DIRECTION_LEFT=2,n.DIRECTION_RIGHT=4,n.DIRECTION_UP=8,n.DIRECTION_HORIZONTAL=6,n.DIRECTION_VERTICAL=fo,n.DIRECTION_NONE=1,n.DIRECTION_DOWN=ki,n.INPUT_START=1,n.INPUT_MOVE=2,n.INPUT_END=4,n.INPUT_CANCEL=8,n.STATE_POSSIBLE=1,n.STATE_BEGAN=2,n.STATE_CHANGED=4,n.STATE_ENDED=8,n.STATE_RECOGNIZED=8,n.STATE_CANCELLED=16,n.STATE_FAILED=se,n.Manager=Bd,n.Input=$e,n.TouchAction=fd,n.TouchInput=Cn,n.MouseInput=kn,n.PointerEventInput=xd,n.TouchMouseInput=Od,n.SingleTouchInput=s1,n.Recognizer=Ii,n.AttrRecognizer=ti,n.Tap=Sn,n.Pan=Tn,n.Swipe=Sd,n.Pinch=Td,n.Rotate=Dd,n.Press=Md,n.on=Ti,n.off=Di,n.each=Qt,n.merge=a1,n.extend=Fd,n.bindFn=Ad,n.assign=we,n.inherit=h1,n.bindFn=Ad,n.prefixed=uo,n.toArray=Mi,n.inArray=Oe,n.uniqueArray=On,n.splitStr=Si,n.boolOrFn=mo,n.hasParent=xn,n.addEventListeners=Ti,n.removeEventListeners=Di,n.defaults=we({},Id,{preset:Pd}),n}();jd.defaults;/**
	 * vis-util
	 * https://github.com/visjs/vis-util
	 *
	 * utilitie collection for visjs
	 *
	 * @version 6.0.0
	 * @date    2025-07-12T18:02:43.836Z
	 *
	 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
	 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
	 *
	 * @license
	 * vis.js is dual licensed under both
	 *
	 *   1. The Apache 2.0 License
	 *      http://www.apache.org/licenses/LICENSE-2.0
	 *
	 *   and
	 *
	 *   2. The MIT License
	 *      http://opensource.org/licenses/MIT
	 *
	 * vis.js may be distributed under either license.
	 */const bo=Symbol("DELETE");function Rd(n,...t){return Dn({},n,...t)}function Dn(...n){const t=wo(...n);return Hd(t),t}function wo(...n){if(n.length<2)return n[0];if(n.length>2)return wo(Dn(n[0],n[1]),...n.slice(2));const t=n[0],e=n[1];if(t instanceof Date&&e instanceof Date)return t.setTime(e.getTime()),t;for(const i of Reflect.ownKeys(e))Object.prototype.propertyIsEnumerable.call(e,i)&&(e[i]===bo?delete t[i]:t[i]===null||e[i]===null||typeof t[i]!="object"||typeof e[i]!="object"||Array.isArray(t[i])||Array.isArray(e[i])?t[i]=Ld(e[i]):t[i]=wo(t[i],e[i]));return t}function Ld(n){return Array.isArray(n)?n.map(t=>Ld(t)):typeof n=="object"&&n!==null?n instanceof Date?new Date(n.getTime()):wo({},n):n}function Hd(n){for(const t of Object.keys(n))n[t]===bo?delete n[t]:typeof n[t]=="object"&&n[t]!==null&&Hd(n[t])}function Pi(...n){return function(t){let[e,i,o]=function(...a){const h=function(){let u=4022871197;return function(p){const g=p.toString();for(let m=0;m<g.length;m++){u+=g.charCodeAt(m);let f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=4294967296*f}return 23283064365386963e-26*(u>>>0)}}();let d=h(" "),l=h(" "),c=h(" ");for(let u=0;u<a.length;u++)d-=h(a[u]),d<0&&(d+=1),l-=h(a[u]),l<0&&(l+=1),c-=h(a[u]),c<0&&(c+=1);return[d,l,c]}(t),s=1;const r=()=>{const a=2091639*e+23283064365386963e-26*s;return e=i,i=o,o=a-(s=0|a)};return r.uint32=()=>4294967296*r(),r.fract53=()=>r()+11102230246251565e-32*(2097152*r()|0),r.algorithm="Alea",r.seed=t,r.version="0.9",r}(n.length?n:[Date.now()])}const Mn=typeof window<"u"?window.Hammer||jd:function(){return function(){const n=()=>{};return{on:n,off:n,destroy:n,emit:n,get:()=>({set:n})}}()};function Yt(n){this._cleanupQueue=[],this.active=!1,this._dom={container:n,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=Mn(this._dom.overlay);t.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push(()=>{t.destroy()}),["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(e=>{t.on(e,i=>{i.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=e=>{(function(i,o){for(;i;){if(i===o)return!0;i=i.parentNode}return!1})(e.target,n)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=e=>{("key"in e?e.key==="Escape":e.keyCode===27)&&this.deactivate()}}rd(Yt.prototype),Yt.current=null,Yt.prototype.destroy=function(){this.deactivate();for(const n of this._cleanupQueue.splice(0).reverse())n()},Yt.prototype.activate=function(){Yt.current&&Yt.current.deactivate(),Yt.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},Yt.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},Yt.prototype._onTapOverlay=function(n){this.activate(),n.srcEvent.stopPropagation()};const d1=/^\/?Date\((-?\d+)/i,l1=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,c1=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,u1=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,p1=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Wd(n){return n instanceof Number||typeof n=="number"}function $t(n){if(n)for(;n.hasChildNodes()===!0;){const t=n.firstChild;t&&($t(t),n.removeChild(t))}}function Ht(n){return n instanceof String||typeof n=="string"}function In(n){return typeof n=="object"&&n!==null}function Ce(n,t,e,i){let o=!1;i===!0&&(o=t[e]===null&&n[e]!==void 0),o?delete n[e]:n[e]=t[e]}function Pn(n,t,e=!1){for(const i in n)if(t[i]!==void 0)if(t[i]===null||typeof t[i]!="object")Ce(n,t,i,e);else{const o=n[i],s=t[i];In(o)&&In(s)&&Pn(o,s,e)}}const f1=Object.assign;function ke(n,t,e,i=!1){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(let o=0;o<n.length;o++){const s=n[o];if(Object.prototype.hasOwnProperty.call(e,s))if(e[s]&&e[s].constructor===Object)t[s]===void 0&&(t[s]={}),t[s].constructor===Object?Z(t[s],e[s],!1,i):Ce(t,e,s,i);else{if(Array.isArray(e[s]))throw new TypeError("Arrays are not supported by deepExtend");Ce(t,e,s,i)}}return t}function Ni(n,t,e,i=!1){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&!n.includes(o))if(e[o]&&e[o].constructor===Object)t[o]===void 0&&(t[o]={}),t[o].constructor===Object?Z(t[o],e[o]):Ce(t,e,o,i);else if(Array.isArray(e[o])){t[o]=[];for(let s=0;s<e[o].length;s++)t[o].push(e[o][s])}else Ce(t,e,o,i);return t}function Z(n,t,e=!1,i=!1){for(const o in t)(Object.prototype.hasOwnProperty.call(t,o)||e===!0)&&(typeof t[o]=="object"&&t[o]!==null&&Object.getPrototypeOf(t[o])===Object.prototype?n[o]===void 0?n[o]=Z({},t[o],e):typeof n[o]=="object"&&n[o]!==null&&Object.getPrototypeOf(n[o])===Object.prototype?Z(n[o],t[o],e):Ce(n,t,o,i):Array.isArray(t[o])?n[o]=t[o].slice():Ce(n,t,o,i));return n}function Bi(n,t){return[...n,t]}function Vd(n){return n.slice()}function qd(n){return n.getBoundingClientRect().left}function Ud(n){return n.getBoundingClientRect().top}function W(n,t){if(Array.isArray(n)){const e=n.length;for(let i=0;i<e;i++)t(n[i],i,n)}else for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(n[e],e,n)}const g1=Object.values,m1={asBoolean:(n,t)=>(typeof n=="function"&&(n=n()),n!=null?n!=0:t||null),asNumber:(n,t)=>(typeof n=="function"&&(n=n()),n!=null?Number(n)||t||null:t||null),asString:(n,t)=>(typeof n=="function"&&(n=n()),n!=null?String(n):t||null),asSize:(n,t)=>(typeof n=="function"&&(n=n()),Ht(n)?n:Wd(n)?n+"px":t||null),asElement:(n,t)=>(typeof n=="function"&&(n=n()),n||t||null)};function _o(n){let t;switch(n.length){case 3:case 4:return t=c1.exec(n),t?{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16)}:null;case 6:case 7:return t=l1.exec(n),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null;default:return null}}function Dt(n,t){if(n.includes("rgba"))return n;if(n.includes("rgb")){const e=n.substr(n.indexOf("(")+1).replace(")","").split(",");return"rgba("+e[0]+","+e[1]+","+e[2]+","+t+")"}{const e=_o(n);return e==null?n:"rgba("+e.r+","+e.g+","+e.b+","+t+")"}}function Nn(n,t,e){return"#"+((1<<24)+(n<<16)+(t<<8)+e).toString(16).slice(1)}function xo(n,t){if(Ht(n)){let e=n;if(zn(e)){const i=e.substr(4).substr(0,e.length-5).split(",").map(function(o){return parseInt(o)});e=Nn(i[0],i[1],i[2])}if(Bn(e)===!0){const i=Xd(e),o={h:i.h,s:.8*i.s,v:Math.min(1,1.02*i.v)},s={h:i.h,s:Math.min(1,1.25*i.s),v:.8*i.v},r=Eo(s.h,s.s,s.v),a=Eo(o.h,o.s,o.v);return{background:e,border:r,highlight:{background:a,border:r},hover:{background:a,border:r}}}return{background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}return t?{background:n.background||t.background,border:n.border||t.border,highlight:Ht(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||t.highlight.background,border:n.highlight&&n.highlight.border||t.highlight.border},hover:Ht(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||t.hover.border,background:n.hover&&n.hover.background||t.hover.background}}:{background:n.background||void 0,border:n.border||void 0,highlight:Ht(n.highlight)?{border:n.highlight,background:n.highlight}:{background:n.highlight&&n.highlight.background||void 0,border:n.highlight&&n.highlight.border||void 0},hover:Ht(n.hover)?{border:n.hover,background:n.hover}:{border:n.hover&&n.hover.border||void 0,background:n.hover&&n.hover.background||void 0}}}function ei(n,t,e){n/=255,t/=255,e/=255;const i=Math.min(n,Math.min(t,e)),o=Math.max(n,Math.max(t,e));return i===o?{h:0,s:0,v:i}:{h:60*((n===i?3:e===i?1:5)-(n===i?t-e:e===i?n-t:e-n)/(o-i))/360,s:(o-i)/o,v:o}}function Yd(n){const t=document.createElement("div"),e={};t.style.cssText=n;for(let i=0;i<t.style.length;++i)e[t.style[i]]=t.style.getPropertyValue(t.style[i]);return e}function zi(n,t,e){let i,o,s;const r=Math.floor(6*n),a=6*n-r,h=e*(1-t),d=e*(1-a*t),l=e*(1-(1-a)*t);switch(r%6){case 0:i=e,o=l,s=h;break;case 1:i=d,o=e,s=h;break;case 2:i=h,o=e,s=l;break;case 3:i=h,o=d,s=e;break;case 4:i=l,o=h,s=e;break;case 5:i=e,o=h,s=d}return{r:Math.floor(255*i),g:Math.floor(255*o),b:Math.floor(255*s)}}function Eo(n,t,e){const i=zi(n,t,e);return Nn(i.r,i.g,i.b)}function Xd(n){const t=_o(n);if(!t)throw new TypeError(`'${n}' is not a valid color.`);return ei(t.r,t.g,t.b)}function Bn(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)}function zn(n){return u1.test(n)}function Gd(n){return p1.test(n)}function Xt(n){if(n===null||typeof n!="object")return null;if(n instanceof Element)return n;const t=Object.create(n);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&typeof n[e]=="object"&&(t[e]=Xt(n[e]));return t}function Mt(n,t,e,i={}){const o=function(l){return l!=null},s=function(l){return l!==null&&typeof l=="object"};if(!s(n))throw new Error("Parameter mergeTarget must be an object");if(!s(t))throw new Error("Parameter options must be an object");if(!o(e))throw new Error("Parameter option must have a value");if(!s(i))throw new Error("Parameter globalOptions must be an object");const r=t[e],a=s(i)&&!function(l){for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c))return!1;return!0}(i)?i[e]:void 0,h=a?a.enabled:void 0;if(r===void 0)return;if(typeof r=="boolean")return s(n[e])||(n[e]={}),void(n[e].enabled=r);if(r===null&&!s(n[e])){if(!o(a))return;n[e]=Object.create(a)}if(!s(r))return;let d=!0;r.enabled!==void 0?d=r.enabled:h!==void 0&&(d=a.enabled),function(l,c,u){s(l[u])||(l[u]={});const p=c[u],g=l[u];for(const m in p)Object.prototype.hasOwnProperty.call(p,m)&&(g[m]=p[m])}(n,t,e),n[e].enabled=d}const Kd={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>n*(2-n),easeInOutQuad:n=>n<.5?2*n*n:(4-2*n)*n-1,easeInCubic:n=>n*n*n,easeOutCubic:n=>--n*n*n+1,easeInOutCubic:n=>n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1,easeInQuart:n=>n*n*n*n,easeOutQuart:n=>1- --n*n*n*n,easeInOutQuart:n=>n<.5?8*n*n*n*n:1-8*--n*n*n*n,easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>1+--n*n*n*n*n,easeInOutQuint:n=>n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n};function Jt(n,t){let e;Array.isArray(t)||(t=[t]);for(const i of n)if(i){e=i[t[0]];for(let o=1;o<t.length;o++)e&&(e=e[t[o]]);if(e!==void 0)break}return e}const v1={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let Zd=class{constructor(n=1){this.pixelRatio=n,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(n){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=n,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(n){if(typeof n!="function")throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=n}setCloseCallback(n){if(typeof n!="function")throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=n}_isColorString(n){if(typeof n=="string")return v1[n]}setColor(n,t=!0){if(n==="none")return;let e;const i=this._isColorString(n);if(i!==void 0&&(n=i),Ht(n)===!0){if(zn(n)===!0){const o=n.substr(4).substr(0,n.length-5).split(",");e={r:o[0],g:o[1],b:o[2],a:1}}else if(Gd(n)===!0){const o=n.substr(5).substr(0,n.length-6).split(",");e={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(Bn(n)===!0){const o=_o(n);e={r:o.r,g:o.g,b:o.b,a:1}}}else if(n instanceof Object&&n.r!==void 0&&n.g!==void 0&&n.b!==void 0){const o=n.a!==void 0?n.a:"1.0";e={r:n.r,g:n.g,b:n.b,a:o}}if(e===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(n));this._setColor(e,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(n=!0){n===!0&&(this.previousColor=Object.assign({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(n,t=!0){t===!0&&(this.initialColor=Object.assign({},n)),this.color=n;const e=ei(n.r,n.g,n.b),i=2*Math.PI,o=this.r*e.s,s=this.centerCoordinates.x+o*Math.sin(i*e.h),r=this.centerCoordinates.y+o*Math.cos(i*e.h);this.colorPickerSelector.style.left=s-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=r-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(n)}_setOpacity(n){this.color.a=n/100,this._updatePicker(this.color)}_setBrightness(n){const t=ei(this.color.r,this.color.g,this.color.b);t.v=n/100;const e=zi(t.h,t.s,t.v);e.a=this.color.a,this.color=e,this._updatePicker()}_updatePicker(n=this.color){const t=ei(n.r,n.g,n.b),e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,i,o),e.putImageData(this.hueCircle,0,0),e.fillStyle="rgba(0,0,0,"+(1-t.v)+")",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*n.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const n=this;this.opacityRange.onchange=function(){n._setOpacity(this.value)},this.opacityRange.oninput=function(){n._setOpacity(this.value)},this.brightnessRange.onchange=function(){n._setBrightness(this.value)},this.brightnessRange.oninput=function(){n._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new Mn(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",n=>{n.isFirst&&this._moveSelector(n)}),this.hammer.on("tap",n=>{this._moveSelector(n)}),this.hammer.on("panstart",n=>{this._moveSelector(n)}),this.hammer.on("panmove",n=>{this._moveSelector(n)}),this.hammer.on("panend",n=>{this._moveSelector(n)})}_generateHueCircle(){if(this.generated===!1){const n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,e=this.colorPickerCanvas.clientHeight;let i,o,s,r;n.clearRect(0,0,t,e),this.centerCoordinates={x:.5*t,y:.5*e},this.r=.49*t;const a=2*Math.PI/360,h=1/360,d=1/this.r;let l;for(s=0;s<360;s++)for(r=0;r<this.r;r++)i=this.centerCoordinates.x+r*Math.sin(a*s),o=this.centerCoordinates.y+r*Math.cos(a*s),l=zi(s*h,r*d,1),n.fillStyle="rgb("+l.r+","+l.g+","+l.b+")",n.fillRect(i-.5,o-.5,2,2);n.strokeStyle="rgba(0,0,0,1)",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.stroke(),this.hueCircle=n.getImageData(0,0,t,e)}this.generated=!0}_moveSelector(n){const t=this.colorPickerDiv.getBoundingClientRect(),e=n.center.x-t.left,i=n.center.y-t.top,o=.5*this.colorPickerDiv.clientHeight,s=.5*this.colorPickerDiv.clientWidth,r=e-s,a=i-o,h=Math.atan2(r,a),d=.98*Math.min(Math.sqrt(r*r+a*a),s),l=Math.cos(h)*d+o,c=Math.sin(h)*d+s;this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";let u=h/(2*Math.PI);u=u<0?u+1:u;const p=d/this.r,g=ei(this.color.r,this.color.g,this.color.b);g.h=u,g.s=p;const m=zi(g.h,g.s,g.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function Fn(...n){if(n.length<1)throw new TypeError("Invalid arguments.");if(n.length===1)return document.createTextNode(n[0]);{const t=document.createElement(n[0]);return t.appendChild(Fn(...n.slice(1))),t}}let Qd,Fi=!1;const An="background: #FFeeee; color: #dd0000",$d=Yt,y1=Zd,Jd=class{constructor(n,t,e,i=1,o=()=>!1){this.parent=n,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Object.assign(this.options,this.defaultOptions),this.configureOptions=e,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Zd(i),this.wrapper=void 0}setOptions(n){if(n!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof n=="string")this.options.filter=n;else if(Array.isArray(n))this.options.filter=n.join();else if(typeof n=="object"){if(n==null)throw new TypeError("options cannot be null");n.container!==void 0&&(this.options.container=n.container),n.filter!==void 0&&(this.options.filter=n.filter),n.showButton!==void 0&&(this.options.showButton=n.showButton),n.enabled!==void 0&&(t=n.enabled)}else typeof n=="boolean"?(this.options.filter=!0,t=n):typeof n=="function"&&(this.options.filter=n,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(n){this.moduleOptions=n,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const n=this.options.filter;let t=0,e=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,e=!1,typeof n=="function"?(e=n(i,[]),e=e||this._handleObject(this.configureOptions[i],[i],!0)):n!==!0&&n.indexOf(i)===-1||(e=!0),e!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let n=0;n<this.domElements.length;n++)this.wrapper.appendChild(this.domElements[n]);this._showPopupIfNeeded()}_clean(){for(let n=0;n<this.domElements.length;n++)this.wrapper.removeChild(this.domElements[n]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(n){let t=this.moduleOptions;for(let e=0;e<n.length;e++){if(t[n[e]]===void 0){t=void 0;break}t=t[n[e]]}return t}_makeItem(n,...t){if(this.allowCreation===!0){const e=document.createElement("div");return e.className="vis-configuration vis-config-item vis-config-s"+n.length,t.forEach(i=>{e.appendChild(i)}),this.domElements.push(e),this.domElements.length}return 0}_makeHeader(n){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=n,this._makeItem([],t)}_makeLabel(n,t,e=!1){const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+t.length,e===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(Fn("i","b",n))}else i.innerText=n+":";return i}_makeDropdown(n,t,e){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let o=0;t!==void 0&&n.indexOf(t)!==-1&&(o=n.indexOf(t));for(let a=0;a<n.length;a++){const h=document.createElement("option");h.value=n[a],a===o&&(h.selected="selected"),h.innerText=n[a],i.appendChild(h)}const s=this;i.onchange=function(){s._update(this.value,e)};const r=this._makeLabel(e[e.length-1],e);this._makeItem(e,r,i)}_makeRange(n,t,e){const i=n[0],o=n[1],s=n[2],r=n[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=o,a.max=s}catch{}a.step=r;let h="",d=0;t!==void 0?(t<0&&t*1.2<o?(a.min=Math.ceil(t*1.2),d=a.min,h="range increased"):t/1.2<o&&(a.min=Math.ceil(t/1.2),d=a.min,h="range increased"),t*1.2>s&&s!==1&&(a.max=Math.ceil(t*1.2),d=a.max,h="range increased"),a.value=t):a.value=i;const l=document.createElement("input");l.className="vis-configuration vis-config-rangeinput",l.value=a.value;const c=this;a.onchange=function(){l.value=this.value,c._update(Number(this.value),e)},a.oninput=function(){l.value=this.value};const u=this._makeLabel(e[e.length-1],e),p=this._makeItem(e,u,a,l);h!==""&&this.popupHistory[p]!==d&&(this.popupHistory[p]=d,this._setupPopup(h,p))}_makeButton(){if(this.options.showButton===!0){const n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerText="generate options",n.onclick=()=>{this._printOptions()},n.onmouseover=()=>{n.className="vis-configuration vis-config-button hover"},n.onmouseout=()=>{n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}_setupPopup(n,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const e=document.createElement("div");e.id="vis-configuration-popup",e.className="vis-configuration-popup",e.innerText=n,e.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:e,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const n=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px",this.popupDiv.html.style.top=n.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(n,t,e){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=n,t!==void 0&&(i.checked=t,t!==n&&(typeof n=="object"?t!==n.enabled&&this.changedOptions.push({path:e,value:t}):this.changedOptions.push({path:e,value:t})));const o=this;i.onchange=function(){o._update(this.checked,e)};const s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,i)}_makeTextInput(n,t,e){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=t,t!==n&&this.changedOptions.push({path:e,value:t});const o=this;i.onchange=function(){o._update(this.value,e)};const s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,i)}_makeColorField(n,t,e){const i=n[1],o=document.createElement("div");(t=t===void 0?i:t)!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=t):o.className="vis-configuration vis-config-colorBlock none",t=t===void 0?i:t,o.onclick=()=>{this._showColorPicker(t,o,e)};const s=this._makeLabel(e[e.length-1],e);this._makeItem(e,s,o)}_showColorPicker(n,t,e){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(n),this.colorPicker.setUpdateCallback(i=>{const o="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";t.style.backgroundColor=o,this._update(o,e)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(n,t,e)}})}_handleObject(n,t=[],e=!1){let i=!1;const o=this.options.filter;let s=!1;for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){i=!0;const a=n[r],h=Bi(t,r);if(typeof o=="function"&&(i=o(r,t),i===!1&&!Array.isArray(a)&&typeof a!="string"&&typeof a!="boolean"&&a instanceof Object&&(this.allowCreation=!1,i=this._handleObject(a,h,!0),this.allowCreation=e===!1)),i!==!1){s=!0;const d=this._getValue(h);if(Array.isArray(a))this._handleArray(a,d,h);else if(typeof a=="string")this._makeTextInput(a,d,h);else if(typeof a=="boolean")this._makeCheckbox(a,d,h);else if(a instanceof Object){if(!this.hideOption(t,r,this.moduleOptions))if(a.enabled!==void 0){const l=Bi(h,"enabled"),c=this._getValue(l);if(c===!0){const u=this._makeLabel(r,h,!0);this._makeItem(h,u),s=this._handleObject(a,h)||s}else this._makeCheckbox(a,c,h)}else{const l=this._makeLabel(r,h,!0);this._makeItem(h,l),s=this._handleObject(a,h)||s}}else console.error("dont know how to handle",a,r,h)}}return s}_handleArray(n,t,e){typeof n[0]=="string"&&n[0]==="color"?(this._makeColorField(n,t,e),n[1]!==t&&this.changedOptions.push({path:e,value:t})):typeof n[0]=="string"?(this._makeDropdown(n,t,e),n[0]!==t&&this.changedOptions.push({path:e,value:t})):typeof n[0]=="number"&&(this._makeRange(n,t,e),n[0]!==t&&this.changedOptions.push({path:e,value:Number(t)}))}_update(n,t){const e=this._constructOptions(n,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",e),this.initialized=!0,this.parent.setOptions(e)}_constructOptions(n,t,e={}){let i=e;n=(n=n==="true"||n)!=="false"&&n;for(let o=0;o<t.length;o++)t[o]!=="global"&&(i[t[o]]===void 0&&(i[t[o]]={}),o!==t.length-1?i=i[t[o]]:i[t[o]]=n);return e}_printOptions(){const n=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Fn("pre","const options = "+JSON.stringify(n,null,2)))}getOptions(){const n={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,n);return n}},te=Mn,tl=class{constructor(n,t){this.container=n,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(n,t){this.x=parseInt(n),this.y=parseInt(t)}setText(n){if(n instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(n)}else this.frame.innerText=n}show(n){if(n===void 0&&(n=!0),n===!0){const t=this.frame.clientHeight,e=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth;let s=0,r=0;if(this.overflowMethod=="flip"){let a=!1,h=!0;this.y-t<this.padding&&(h=!1),this.x+e>o-this.padding&&(a=!0),s=a?this.x-e:this.x,r=h?this.y-t:this.y}else r=this.y-t,r+t+this.padding>i&&(r=i-t-this.padding),r<this.padding&&(r=this.padding),s=this.x,s+e+this.padding>o&&(s=o-e-this.padding),s<this.padding&&(s=this.padding);this.frame.style.left=s+"px",this.frame.style.top=r+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},jn=An,el=class st{static validate(t,e,i){Fi=!1,Qd=e;let o=e;return i!==void 0&&(o=e[i]),st.parse(t,o,[]),Fi}static parse(t,e,i){for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&st.check(o,t,e,i)}static check(t,e,i,o){if(i[t]===void 0&&i.__any__===void 0)return void st.getSuggestion(t,i,o);let s=t,r=!0;i[t]===void 0&&i.__any__!==void 0&&(s="__any__",r=st.getType(e[t])==="object");let a=i[s];r&&a.__type__!==void 0&&(a=a.__type__),st.checkFields(t,e,i,s,a,o)}static checkFields(t,e,i,o,s,r){const a=function(l){console.error("%c"+l+st.printLocation(r,t),An)},h=st.getType(e[t]),d=s[h];d!==void 0?st.getType(d)==="array"&&d.indexOf(e[t])===-1?(a('Invalid option detected in "'+t+'". Allowed values are:'+st.print(d)+' not "'+e[t]+'". '),Fi=!0):h==="object"&&o!=="__any__"&&(r=Bi(r,t),st.parse(e[t],i[o],r)):s.any===void 0&&(a('Invalid type received for "'+t+'". Expected: '+st.print(Object.keys(s))+". Received ["+h+'] "'+e[t]+'"'),Fi=!0)}static getType(t){const e=typeof t;return e==="object"?t===null?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":t.nodeType!==void 0?"dom":t._isAMomentObject===!0?"moment":"object":e==="number"?"number":e==="boolean"?"boolean":e==="string"?"string":e===void 0?"undefined":e}static getSuggestion(t,e,i){const o=st.findInOptions(t,e,i,!1),s=st.findInOptions(t,Qd,[],!0);let r;r=o.indexMatch!==void 0?" in "+st.printLocation(o.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+`"?

`:s.distance<=4&&o.distance>s.distance?" in "+st.printLocation(o.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+st.printLocation(s.path,s.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+st.printLocation(o.path,t):". Did you mean one of these: "+st.print(Object.keys(e))+st.printLocation(i,t),console.error('%cUnknown option detected: "'+t+'"'+r,An),Fi=!0}static findInOptions(t,e,i,o=!1){let s=1e9,r="",a=[];const h=t.toLowerCase();let d;for(const l in e){let c;if(e[l].__type__!==void 0&&o===!0){const u=st.findInOptions(t,e[l],Bi(i,l));s>u.distance&&(r=u.closestMatch,a=u.path,s=u.distance,d=u.indexMatch)}else l.toLowerCase().indexOf(h)!==-1&&(d=l),c=st.levenshteinDistance(t,l),s>c&&(r=l,a=Vd(i),s=c)}return{closestMatch:r,path:a,distance:s,indexMatch:d}}static printLocation(t,e,i=`Problem value found at: 
`){let o=`

`+i+`options = {
`;for(let s=0;s<t.length;s++){for(let r=0;r<s+1;r++)o+="  ";o+=t[s]+`: {
`}for(let s=0;s<t.length+1;s++)o+="  ";o+=e+`
`;for(let s=0;s<t.length+1;s++){for(let r=0;r<t.length-s;r++)o+="  ";o+=`}
`}return o+`

`}static print(t){return JSON.stringify(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;const i=[];let o,s;for(o=0;o<=e.length;o++)i[o]=[o];for(s=0;s<=t.length;s++)i[0][s]=s;for(o=1;o<=e.length;o++)for(s=1;s<=t.length;s++)e.charAt(o-1)==t.charAt(s-1)?i[o][s]=i[o-1][s-1]:i[o][s]=Math.min(i[o-1][s-1]+1,Math.min(i[o][s-1]+1,i[o-1][s]+1));return i[e.length][t.length]}};var il,ol,nl,sl,rl,al,hl,dl,ll,cl,ul,pl,fl,gl,ml=Object.freeze({__proto__:null,Activator:$d,Alea:Pi,ColorPicker:y1,Configurator:Jd,DELETE:bo,HSVToHex:Eo,HSVToRGB:zi,Hammer:te,Popup:tl,RGBToHSV:ei,RGBToHex:Nn,VALIDATOR_PRINT_STYLE:jn,Validator:el,addClassName:function(n,t){let e=n.className.split(" ");const i=t.split(" ");e=e.concat(i.filter(function(o){return!e.includes(o)})),n.className=e.join(" ")},addCssText:function(n,t){const e=Yd(t);for(const[i,o]of Object.entries(e))n.style.setProperty(i,o)},binarySearchCustom:function(n,t,e,i){let o=0,s=0,r=n.length-1;for(;s<=r&&o<1e4;){const a=Math.floor((s+r)/2),h=n[a],d=t(i===void 0?h[e]:h[e][i]);if(d==0)return a;d==-1?s=a+1:r=a-1,o++}return-1},binarySearchValue:function(n,t,e,i,o){let s,r,a,h,d=0,l=0,c=n.length-1;for(o=o??function(u,p){return u==p?0:u<p?-1:1};l<=c&&d<1e4;){if(h=Math.floor(.5*(c+l)),s=n[Math.max(0,h-1)][e],r=n[h][e],a=n[Math.min(n.length-1,h+1)][e],o(r,t)==0)return h;if(o(s,t)<0&&o(r,t)>0)return i=="before"?Math.max(0,h-1):h;if(o(r,t)<0&&o(a,t)>0)return i=="before"?h:Math.min(n.length-1,h+1);o(r,t)<0?l=h+1:c=h-1,d++}return-1},bridgeObject:Xt,copyAndExtendArray:Bi,copyArray:Vd,deepExtend:Z,deepObjectAssign:Dn,easingFunctions:Kd,equalArray:function(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!=t[e])return!1;return!0},extend:f1,fillIfDefined:Pn,forEach:W,getAbsoluteLeft:qd,getAbsoluteRight:function(n){return n.getBoundingClientRect().right},getAbsoluteTop:Ud,getScrollBarWidth:function(){const n=document.createElement("p");n.style.width="100%",n.style.height="200px";const t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(n),document.body.appendChild(t);const e=n.offsetWidth;t.style.overflow="scroll";let i=n.offsetWidth;return e==i&&(i=t.clientWidth),document.body.removeChild(t),e-i},getTarget:function(n=window.event){let t=null;return n&&(n.target?t=n.target:n.srcElement&&(t=n.srcElement)),t instanceof Element&&(t.nodeType==null||t.nodeType!=3||(t=t.parentNode,t instanceof Element))?t:null},getType:function(n){const t=typeof n;return t==="object"?n===null?"null":n instanceof Boolean?"Boolean":n instanceof Number?"Number":n instanceof String?"String":Array.isArray(n)?"Array":n instanceof Date?"Date":"Object":t==="number"?"Number":t==="boolean"?"Boolean":t==="string"?"String":t===void 0?"undefined":t},hasParent:function(n,t){let e=n;for(;e;){if(e===t)return!0;if(!e.parentNode)return!1;e=e.parentNode}return!1},hexToHSV:Xd,hexToRGB:_o,insertSort:function(n,t){for(let e=0;e<n.length;e++){const i=n[e];let o;for(o=e;o>0&&t(i,n[o-1])<0;o--)n[o]=n[o-1];n[o]=i}return n},isDate:function(n){return!!(n instanceof Date||Ht(n)&&(d1.exec(n)||!isNaN(Date.parse(n))))},isNumber:Wd,isObject:In,isString:Ht,isValidHex:Bn,isValidRGB:zn,isValidRGBA:Gd,mergeOptions:Mt,option:m1,overrideOpacity:Dt,parseColor:xo,preventDefault:function(n){n||(n=window.event),n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},pureDeepObjectAssign:Rd,recursiveDOMDelete:$t,removeClassName:function(n,t){let e=n.className.split(" ");const i=t.split(" ");e=e.filter(function(o){return!i.includes(o)}),n.className=e.join(" ")},removeCssText:function(n,t){const e=Yd(t);for(const i of Object.keys(e))n.style.removeProperty(i)},selectiveBridgeObject:function(n,t){if(t!==null&&typeof t=="object"){const e=Object.create(t);for(let i=0;i<n.length;i++)Object.prototype.hasOwnProperty.call(t,n[i])&&typeof t[n[i]]=="object"&&(e[n[i]]=Xt(t[n[i]]));return e}return null},selectiveDeepExtend:ke,selectiveExtend:function(n,t,...e){if(!Array.isArray(n))throw new Error("Array with property names expected as first argument");for(const i of e)for(let o=0;o<n.length;o++){const s=n[o];i&&Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},selectiveNotDeepExtend:Ni,throttle:function(n){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{t=!1,n()}))}},toArray:g1,topMost:Jt,updateProperty:function(n,t,e){return n[t]!==e&&(n[t]=e,!0)}}),Rn={};function Ln(){if(il)return Rn;il=1;var n=rt(),t=Sh(),e=Nt(),i=Ut(),o=Rt(),s=xi();return Rn.f=n&&!t?Object.defineProperties:function(r,a){i(r);for(var h,d=o(a),l=s(a),c=l.length,u=0;c>u;)e.f(r,h=l[u++],d[h]);return r},Rn}function b1(){return nl?ol:(nl=1,ol=Tt()("document","documentElement"))}function Oo(){if(rl)return sl;rl=1;var n=Xe(),t=so(),e=n("keys");return sl=function(i){return e[i]||(e[i]=t(i))}}function Ai(){if(hl)return al;hl=1;var n,t=Ut(),e=Ln(),i=pn(),o=_i(),s=b1(),r=th(),a="prototype",h="script",d=Oo()("IE_PROTO"),l=function(){},c=function(g){return"<"+h+">"+g+"</"+h+">"},u=function(g){g.write(c("")),g.close();var m=g.parentWindow.Object;return g=null,m},p=function(){try{n=new ActiveXObject("htmlfile")}catch{}var g,m,f;p=typeof document<"u"?document.domain&&n?u(n):(m=r("iframe"),f="java"+h+":",m.style.display="none",s.appendChild(m),m.src=String(f),(g=m.contentWindow.document).open(),g.write(c("document.F=Object")),g.close(),g.F):u(n);for(var v=i.length;v--;)delete p[a][i[v]];return p()};return o[d]=!0,al=Object.create||function(g,m){var f;return g!==null?(l[a]=t(g),f=new l,l[a]=null,f[d]=g):f=p(),m===void 0?f:e.f(f,m)}}function w1(){if(cl)return ll;cl=1,dl||(dl=1,A()({target:"Object",stat:!0,sham:!rt()},{create:Ai()}));var n=G().Object;return ll=function(t,e){return n.create(t,e)}}function _1(){return pl?ul:(pl=1,ul=w1())}var vl,yl,bl,wl,_l,Hn,xl,El,Ol,Cl,kl,ji=L(gl?fl:(gl=1,fl=_1())),x1={};function ii(){if(yl)return vl;yl=1;var n=U();return vl=function(t,e){var i=[][t];return!!i&&n(function(){i.call(null,e||function(){return 1},1)})}}function E1(){return _l?wl:(_l=1,function(){if(bl)return x1;bl=1;var n=A(),t=Wo(),e=un().indexOf,i=ii(),o=t([].indexOf),s=!!o&&1/o([1],1,-0)<0;n({target:"Array",proto:!0,forced:s||!i("indexOf")},{indexOf:function(r){var a=arguments.length>1?arguments[1]:void 0;return s?o(this,r,a)||0:e(this,r,a)}})}(),wl=bt()("Array","indexOf"))}function O1(){if(xl)return Hn;xl=1;var n=ht(),t=E1(),e=Array.prototype;return Hn=function(i){var o=i.indexOf;return i===e||n(e,i)&&o===e.indexOf?t:o},Hn}function C1(){return Ol?El:(Ol=1,El=O1())}var Sl,Tl,Dl,Ml,Il,ot=L(kl?Cl:(kl=1,Cl=C1())),k1={};function Wn(){return Tl?Sl:(Tl=1,Sl=function(){})}function S1(){return Il?Ml:(Il=1,function(){if(Dl)return k1;Dl=1;var n=A(),t=un().includes,e=U(),i=Wn();n({target:"Array",proto:!0,forced:e(function(){return!Array(1).includes()})},{includes:function(o){return t(this,o,arguments.length>1?arguments[1]:void 0)}}),i("includes")}(),Ml=bt()("Array","includes"))}var Vn,Pl,qn,Nl,Bl,zl,Un,Fl,Al,jl,Rl,Ll,Hl,Wl,Vl,Yn,ql,Ul,Yl,Xl,Gl,T1={};function D1(){if(Pl)return Vn;Pl=1;var n=ft(),t=qt(),e=dt()("match");return Vn=function(i){var o;return n(i)&&((o=i[e])!==void 0?!!o:t(i)==="RegExp")},Vn}function M1(){if(Nl)return qn;Nl=1;var n=D1(),t=TypeError;return qn=function(e){if(n(e))throw new t("The method doesn't accept regular expressions");return e},qn}function Xn(){if(zl)return Bl;zl=1;var n={};return n[dt()("toStringTag")]="z",Bl=String(n)==="[object z]"}function oi(){if(Fl)return Un;Fl=1;var n=Xn(),t=pt(),e=qt(),i=dt()("toStringTag"),o=Object,s=e(function(){return arguments}())==="Arguments";return Un=n?e:function(r){var a,h,d;return r===void 0?"Undefined":r===null?"Null":typeof(h=function(l,c){try{return l[c]}catch{}}(a=o(r),i))=="string"?h:s?e(a):(d=e(a))==="Object"&&t(a.callee)?"Arguments":d},Un}function zt(){if(jl)return Al;jl=1;var n=oi(),t=String;return Al=function(e){if(n(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return t(e)}}function I1(){if(Ll)return Rl;Ll=1;var n=dt()("match");return Rl=function(t){var e=/./;try{"/./"[t](e)}catch{try{return e[n]=!1,"/./"[t](e)}catch{}}return!1}}function P1(){return Vl?Wl:(Vl=1,function(){if(Hl)return T1;Hl=1;var n=A(),t=Y(),e=M1(),i=Gt(),o=zt(),s=I1(),r=t("".indexOf);n({target:"String",proto:!0,forced:!s("includes")},{includes:function(a){return!!~r(o(i(this)),o(e(a)),arguments.length>1?arguments[1]:void 0)}})}(),Wl=bt()("String","includes"))}function N1(){if(ql)return Yn;ql=1;var n=ht(),t=S1(),e=P1(),i=Array.prototype,o=String.prototype;return Yn=function(s){var r=s.includes;return s===i||n(i,s)&&r===i.includes?t:typeof s=="string"||s===o||n(o,s)&&r===o.includes?e:r},Yn}function B1(){return Yl?Ul:(Yl=1,Ul=N1())}var Kl,Zl,Ql,$l,Gn,Jl,tc,ec,ic,oc,nc,sc,rc,ac,Kn,hc,dc,lc,Zn,cc,uc,pc,fc,Qn,gc,mc,vc,yc,bc,Ri=L(Gl?Xl:(Gl=1,Xl=B1())),z1={};function Se(){if(Zl)return Kl;Zl=1;var n=qt();return Kl=Array.isArray||function(t){return n(t)==="Array"}}function F1(){if($l)return Ql;$l=1;var n=rt(),t=Se(),e=TypeError,i=Object.getOwnPropertyDescriptor,o=n&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}}();return Ql=o?function(s,r){if(t(s)&&!i(s,"length").writable)throw new e("Cannot set read only .length");return s.length=r}:function(s,r){return s.length=r}}function wc(){if(Jl)return Gn;Jl=1;var n=TypeError;return Gn=function(t){if(t>9007199254740991)throw n("Maximum allowed index exceeded");return t},Gn}function A1(){if(ec)return tc;ec=1;var n=Y(),t=pt(),e=sn(),i=n(Function.toString);return t(e.inspectSource)||(e.inspectSource=function(o){return i(o)}),tc=e.inspectSource}function _c(){if(oc)return ic;oc=1;var n=Y(),t=U(),e=pt(),i=oi(),o=Tt(),s=A1(),r=function(){},a=o("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=n(h.exec),l=!h.test(r),c=function(p){if(!e(p))return!1;try{return a(r,[],p),!0}catch{return!1}},u=function(p){if(!e(p))return!1;switch(i(p)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!d(h,s(p))}catch{return!0}};return u.sham=!0,ic=!a||t(function(){var p;return c(c.call)||!c(Object)||!c(function(){p=!0})||p})?u:c}function j1(){if(sc)return nc;sc=1;var n=Se(),t=_c(),e=ft(),i=dt()("species"),o=Array;return nc=function(s){var r;return n(s)&&(r=s.constructor,(t(r)&&(r===o||n(r.prototype))||e(r)&&(r=r[i])===null)&&(r=void 0)),r===void 0?o:r}}function $n(){if(ac)return rc;ac=1;var n=j1();return rc=function(t,e){return new(n(t))(e===0?0:e)}}function Co(){if(hc)return Kn;hc=1;var n=rt(),t=Nt(),e=yi();return Kn=function(i,o,s){n?t.f(i,o,e(0,s)):i[o]=s},Kn}function xc(){if(lc)return dc;lc=1;var n=Ue(),t=TypeError;return dc=function(e,i){if(!delete e[i])throw new t("Cannot delete property "+n(i)+" of "+n(e))}}function Li(){if(cc)return Zn;cc=1;var n=U(),t=dt(),e=bi(),i=t("species");return Zn=function(o){return e>=51||!n(function(){var s=[];return(s.constructor={})[i]=function(){return{foo:1}},s[o](Boolean).foo!==1})},Zn}function R1(){return fc?pc:(fc=1,function(){if(uc)return z1;uc=1;var n=A(),t=Pt(),e=ho(),i=Ke(),o=Zt(),s=F1(),r=wc(),a=$n(),h=Co(),d=xc(),l=Li()("splice"),c=Math.max,u=Math.min;n({target:"Array",proto:!0,forced:!l},{splice:function(p,g){var m,f,v,y,_,b,w=t(this),E=o(w),D=e(p,E),O=arguments.length;for(O===0?m=f=0:O===1?(m=0,f=E-D):(m=O-2,f=u(c(i(g),0),E-D)),r(E+m-f),v=a(w,f),y=0;y<f;y++)(_=D+y)in w&&h(v,y,w[_]);if(v.length=f,m<f){for(y=D;y<E-f;y++)b=y+m,(_=y+f)in w?w[b]=w[_]:d(w,b);for(y=E;y>E-f+m;y--)d(w,y-1)}else if(m>f)for(y=E-f;y>D;y--)b=y+m-1,(_=y+f-1)in w?w[b]=w[_]:d(w,b);for(y=0;y<m;y++)w[y+D]=arguments[y+2];return s(w,E-f+m),v}})}(),pc=bt()("Array","splice"))}function L1(){if(gc)return Qn;gc=1;var n=ht(),t=R1(),e=Array.prototype;return Qn=function(i){var o=i.splice;return i===e||n(e,i)&&o===e.splice?t:o},Qn}function H1(){return vc?mc:(vc=1,mc=L1())}var Ec,Oc,Cc,kc,Sc,Tc,Dc,re=L(bc?yc:(bc=1,yc=H1()));function W1(){return Cc?Oc:(Cc=1,Ec||(Ec=1,A()({target:"Array",stat:!0},{isArray:Se()})),Oc=G().Array.isArray)}function V1(){return Sc?kc:(Sc=1,kc=W1())}var Mc,Ic,Jn,Pc,Nc,Bc,zc,Fc,Ac,ts,jc,Rc,Lc,Wt=L(Dc?Tc:(Dc=1,Tc=V1())),q1={};function ae(){if(Ic)return Mc;Ic=1;var n=ao(),t=Y(),e=no(),i=Pt(),o=Zt(),s=$n(),r=t([].push),a=function(h){var d=h===1,l=h===2,c=h===3,u=h===4,p=h===6,g=h===7,m=h===5||p;return function(f,v,y,_){for(var b,w,E=i(f),D=e(E),O=o(D),k=n(v,y),B=0,S=_||s,C=d?S(f,O):l||g?S(f,0):void 0;O>B;B++)if((m||B in D)&&(w=k(b=D[B],B,E),h))if(d)C[B]=w;else if(w)switch(h){case 3:return!0;case 5:return b;case 6:return B;case 2:r(C,b)}else switch(h){case 4:return!1;case 7:r(C,b)}return p?-1:c||u?u:C}};return Mc={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)}}function U1(){if(Pc)return Jn;Pc=1;var n=ae().forEach,t=ii()("forEach");return Jn=t?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)},Jn}function Y1(){return zc?Bc:(zc=1,function(){if(Nc)return q1;Nc=1;var n=A(),t=U1();n({target:"Array",proto:!0,forced:[].forEach!==t},{forEach:t})}(),Bc=bt()("Array","forEach"))}function X1(){return Ac?Fc:(Ac=1,Fc=Y1())}function G1(){if(jc)return ts;jc=1;var n=oi(),t=vt(),e=ht(),i=X1(),o=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return ts=function(r){var a=r.forEach;return r===o||e(o,r)&&a===o.forEach||t(s,n(r))?i:a},ts}var tt=L(Lc?Rc:(Lc=1,Rc=G1()));function Hc(n){return he=n,function(){var t={};if(ni=0,V=he.charAt(0),$(),j==="strict"&&(t.strict=!0,$()),j!=="graph"&&j!=="digraph"||(t.type=j,$()),St===Et.IDENTIFIER&&(t.id=j,$()),j!="{")throw Ot("Angle bracket { expected");if($(),Xc(t),j!="}")throw Ot("Angle bracket } expected");if($(),j!=="")throw Ot("End of file expected");return $(),delete t.node,delete t.edge,delete t.graph,t}()}var Wc={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},es=ji(Wc);es.color="color.color",es.style="dashes";var Et={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},Vc={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},he="",ni=0,V="",j="",St=Et.NULL;function gt(){ni++,V=he.charAt(ni)}function si(){return he.charAt(ni+1)}function qc(n){var t=n.charCodeAt(0);return t<47?t===35||t===46:t<59?t>47:t<91?t>64:t<96?t===95:t<123&&t>96}function de(n,t){if(n||(n={}),t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function K1(n,t,e){for(var i=t.split("."),o=n;i.length;){var s=i.shift();i.length?(o[s]||(o[s]={}),o=o[s]):o[s]=e}}function Uc(n,t){for(var e,i,o=null,s=[n],r=n;r.parent;)s.push(r.parent),r=r.parent;if(r.nodes){for(e=0,i=r.nodes.length;e<i;e++)if(t.id===r.nodes[e].id){o=r.nodes[e];break}}for(o||(o={id:t.id},n.node&&(o.attr=de(o.attr,n.node))),e=s.length-1;e>=0;e--){var a,h=s[e];h.nodes||(h.nodes=[]),ot(a=h.nodes).call(a,o)===-1&&h.nodes.push(o)}t.attr&&(o.attr=de(o.attr,t.attr))}function Z1(n,t){if(n.edges||(n.edges=[]),n.edges.push(t),n.edge){var e=de({},n.edge);t.attr=de(e,t.attr)}}function Yc(n,t,e,i,o){var s={from:t,to:e,type:i};return n.edge&&(s.attr=de({},n.edge)),s.attr=de(s.attr||{},o),o!=null&&o.hasOwnProperty("arrows")&&o.arrows!=null&&(s.arrows={to:{enabled:!0,type:o.arrows.type}},o.arrows=null),s}function $(){for(St=Et.NULL,j="";V===" "||V==="	"||V===`
`||V==="\r";)gt();do{var n=!1;if(V==="#"){for(var t=ni-1;he.charAt(t)===" "||he.charAt(t)==="	";)t--;if(he.charAt(t)===`
`||he.charAt(t)===""){for(;V!=""&&V!=`
`;)gt();n=!0}}if(V==="/"&&si()==="/"){for(;V!=""&&V!=`
`;)gt();n=!0}if(V==="/"&&si()==="*"){for(;V!="";){if(V==="*"&&si()==="/"){gt(),gt();break}gt()}n=!0}for(;V===" "||V==="	"||V===`
`||V==="\r";)gt()}while(n);if(V!==""){var e=V+si();if(Vc[e])return St=Et.DELIMITER,j=e,gt(),void gt();if(Vc[V])return St=Et.DELIMITER,j=V,void gt();if(qc(V)||V==="-"){for(j+=V,gt();qc(V);)j+=V,gt();return j==="false"?j=!1:j==="true"?j=!0:isNaN(Number(j))||(j=Number(j)),void(St=Et.IDENTIFIER)}if(V==='"'){for(gt();V!=""&&(V!='"'||V==='"'&&si()==='"');)V==='"'?(j+=V,gt()):V==="\\"&&si()==="n"?(j+=`
`,gt()):j+=V,gt();if(V!='"')throw Ot('End of string " expected');return gt(),void(St=Et.IDENTIFIER)}for(St=Et.UNKNOWN;V!="";)j+=V,gt();throw new SyntaxError('Syntax error in part "'+Zc(j,30)+'"')}St=Et.DELIMITER}function Xc(n){for(;j!==""&&j!="}";)Q1(n),j===";"&&$()}function Q1(n){var t=Gc(n);if(t)Kc(n,t);else{var e=function(o){return j==="node"?($(),o.node=Hi(),"node"):j==="edge"?($(),o.edge=Hi(),"edge"):j==="graph"?($(),o.graph=Hi(),"graph"):null}(n);if(!e){if(St!=Et.IDENTIFIER)throw Ot("Identifier expected");var i=j;if($(),j==="="){if($(),St!=Et.IDENTIFIER)throw Ot("Identifier expected");n[i]=j,$()}else(function(o,s){var r={id:s},a=Hi();a&&(r.attr=a),Uc(o,r),Kc(o,s)})(n,i)}}}function Gc(n){var t=null;if(j==="subgraph"&&((t={}).type="subgraph",$(),St===Et.IDENTIFIER&&(t.id=j,$())),j==="{"){if($(),t||(t={}),t.parent=n,t.node=n.node,t.edge=n.edge,t.graph=n.graph,Xc(t),j!="}")throw Ot("Angle bracket } expected");$(),delete t.node,delete t.edge,delete t.graph,delete t.parent,n.subgraphs||(n.subgraphs=[]),n.subgraphs.push(t)}return t}function Kc(n,t){for(;j==="->"||j==="--";){var e,i=j;$();var o=Gc(n);if(o)e=o;else{if(St!=Et.IDENTIFIER)throw Ot("Identifier or subgraph expected");Uc(n,{id:e=j}),$()}Z1(n,Yc(n,t,e,i,Hi())),t=e}}function Hi(){for(var n,t,e=null,i={dashed:!0,solid:!1,dotted:[1,5]},o={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},s=new Array,r=new Array;j==="[";){for($(),e={};j!==""&&j!="]";){if(St!=Et.IDENTIFIER)throw Ot("Attribute name expected");var a=j;if($(),j!="=")throw Ot("Equal sign = expected");if($(),St!=Et.IDENTIFIER)throw Ot("Attribute value expected");var h=j;a==="style"&&(h=i[h]),a==="arrowhead"&&(a="arrows",h={to:{enabled:!0,type:o[h]}}),a==="arrowtail"&&(a="arrows",h={from:{enabled:!0,type:o[h]}}),s.push({attr:e,name:a,value:h}),r.push(a),$(),j==","&&$()}if(j!="]")throw Ot("Bracket ] expected");$()}if(Ri(r).call(r,"dir")){var d={arrows:{}};for(n=0;n<s.length;n++)if(s[n].name==="arrows")if(s[n].value.to!=null)d.arrows.to=n;else{if(s[n].value.from==null)throw Ot("Invalid value of arrows");d.arrows.from=n}else s[n].name==="dir"&&(d.dir=n);var l,c,u=s[d.dir].value;if(!Ri(r).call(r,"arrows"))if(u==="both")s.push({attr:s[d.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),d.arrows.to=s.length-1,s.push({attr:s[d.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),d.arrows.from=s.length-1;else if(u==="forward")s.push({attr:s[d.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),d.arrows.to=s.length-1;else if(u==="back")s.push({attr:s[d.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),d.arrows.from=s.length-1;else{if(u!=="none")throw Ot('Invalid dir type "'+u+'"');s.push({attr:s[d.dir].attr,name:"arrows",value:""}),d.arrows.to=s.length-1}if(u==="both")d.arrows.to&&d.arrows.from?(c=s[d.arrows.to].value.to.type,l=s[d.arrows.from].value.from.type,s[d.arrows.to]={attr:s[d.arrows.to].attr,name:s[d.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}},re(s).call(s,d.arrows.from,1)):d.arrows.to?(c=s[d.arrows.to].value.to.type,l="arrow",s[d.arrows.to]={attr:s[d.arrows.to].attr,name:s[d.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}}):d.arrows.from&&(c="arrow",l=s[d.arrows.from].value.from.type,s[d.arrows.from]={attr:s[d.arrows.from].attr,name:s[d.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}});else if(u==="back")d.arrows.to&&d.arrows.from?(c="",l=s[d.arrows.from].value.from.type,s[d.arrows.from]={attr:s[d.arrows.from].attr,name:s[d.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}}):d.arrows.to?(c="",l="arrow",d.arrows.from=d.arrows.to,s[d.arrows.from]={attr:s[d.arrows.from].attr,name:s[d.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}}):d.arrows.from&&(c="",l=s[d.arrows.from].value.from.type,s[d.arrows.to]={attr:s[d.arrows.from].attr,name:s[d.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}}),s[d.arrows.from]={attr:s[d.arrows.from].attr,name:s[d.arrows.from].name,value:{from:{enabled:!0,type:s[d.arrows.from].value.from.type}}};else if(u==="none"){var p;s[p=d.arrows.to?d.arrows.to:d.arrows.from]={attr:s[p].attr,name:s[p].name,value:""}}else{if(u!=="forward")throw Ot('Invalid dir type "'+u+'"');d.arrows.to&&d.arrows.from||d.arrows.to?(c=s[d.arrows.to].value.to.type,l="",s[d.arrows.to]={attr:s[d.arrows.to].attr,name:s[d.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}}):d.arrows.from&&(c="arrow",l="",d.arrows.to=d.arrows.from,s[d.arrows.to]={attr:s[d.arrows.to].attr,name:s[d.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:l}}}),s[d.arrows.to]={attr:s[d.arrows.to].attr,name:s[d.arrows.to].name,value:{to:{enabled:!0,type:s[d.arrows.to].value.to.type}}}}re(s).call(s,d.dir,1)}if(Ri(r).call(r,"penwidth")){var g=[];for(t=s.length,n=0;n<t;n++)s[n].name!=="width"&&(s[n].name==="penwidth"&&(s[n].name="width"),g.push(s[n]));s=g}for(t=s.length,n=0;n<t;n++)K1(s[n].attr,s[n].name,s[n].value);return e}function Ot(n){return new SyntaxError(n+', got "'+Zc(j,30)+'" (char '+ni+")")}function Zc(n,t){return n.length<=t?n:n.substr(0,27)+"..."}function Qc(n,t,e){for(var i=t.split("."),o=i.pop(),s=n,r=0;r<i.length;r++){var a=i[r];a in s||(s[a]={}),s=s[a]}return s[o]=e,n}function $c(n,t){var e={};for(var i in n)if(n.hasOwnProperty(i)){var o=t[i];Wt(o)?tt(o).call(o,function(s){Qc(e,s,n[i])}):Qc(e,typeof o=="string"?o:i,n[i])}return e}function is(n){var t,e=Hc(n),i={nodes:[],edges:[],options:{}};if(e.nodes&&tt(t=e.nodes).call(t,function(r){var a={id:r.id,label:String(r.label||r.id)};de(a,$c(r.attr,Wc)),a.image&&(a.shape="image"),i.nodes.push(a)}),e.edges){var o,s=function(r){var a={from:r.from,to:r.to};return de(a,$c(r.attr,es)),a.arrows==null&&r.type==="->"&&(a.arrows="to"),a};tt(o=e.edges).call(o,function(r){var a,h,d,l,c,u,p;a=r.from instanceof Object?r.from.nodes:{id:r.from},h=r.to instanceof Object?r.to.nodes:{id:r.to},r.from instanceof Object&&r.from.edges&&tt(d=r.from.edges).call(d,function(g){var m=s(g);i.edges.push(m)}),c=h,u=function(g,m){var f=Yc(i,g.id,m.id,r.type,r.attr),v=s(f);i.edges.push(v)},Wt(l=a)?tt(l).call(l,function(g){Wt(c)?tt(c).call(c,function(m){u(g,m)}):u(g,c)}):Wt(c)?tt(c).call(c,function(g){u(l,g)}):u(l,c),r.to instanceof Object&&r.to.edges&&tt(p=r.to.edges).call(p,function(g){var m=s(g);i.edges.push(m)})})}return e.attr&&(i.options=e.attr),i}var Jc,tu,eu,os,iu,ou,nu,su,ru,$1=Object.freeze({__proto__:null,DOTToGraph:is,parseDOT:Hc}),J1={};function t_(){return eu?tu:(eu=1,function(){if(Jc)return J1;Jc=1;var n=A(),t=ae().map;n({target:"Array",proto:!0,forced:!Li()("map")},{map:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})}(),tu=bt()("Array","map"))}function e_(){if(iu)return os;iu=1;var n=ht(),t=t_(),e=Array.prototype;return os=function(i){var o=i.map;return i===e||n(e,i)&&o===e.map?t:o},os}function i_(){return nu?ou:(nu=1,ou=e_())}var Wi=L(ru?su:(ru=1,su=i_()));function ns(n,t){var e;const i={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};t!=null&&(t.fixed!=null&&(i.nodes.fixed=t.fixed),t.parseColor!=null&&(i.nodes.parseColor=t.parseColor),t.inheritColor!=null&&(i.edges.inheritColor=t.inheritColor));const o=n.edges,s=Wi(o).call(o,r=>{const a={from:r.source,id:r.id,to:r.target};return r.attributes!=null&&(a.attributes=r.attributes),r.label!=null&&(a.label=r.label),r.attributes!=null&&r.attributes.title!=null&&(a.title=r.attributes.title),r.type==="Directed"&&(a.arrows="to"),r.color&&i.edges.inheritColor===!1&&(a.color=r.color),a});return{nodes:Wi(e=n.nodes).call(e,r=>{const a={id:r.id,fixed:i.nodes.fixed&&r.x!=null&&r.y!=null};return r.attributes!=null&&(a.attributes=r.attributes),r.label!=null&&(a.label=r.label),r.size!=null&&(a.size=r.size),r.attributes!=null&&r.attributes.title!=null&&(a.title=r.attributes.title),r.title!=null&&(a.title=r.title),r.x!=null&&(a.x=r.x),r.y!=null&&(a.y=r.y),r.color!=null&&(i.nodes.parseColor===!0?a.color=r.color:a.color={background:r.color,border:r.color,highlight:{background:r.color,border:r.color},hover:{background:r.color,border:r.color}}),a}),edges:s}}var o_=Object.freeze({__proto__:null,parseGephi:ns}),au,hu,du,ss,lu,cu,uu,pu,fu,n_=Object.freeze({__proto__:null,cn:{addDescription:"\u5355\u51FB\u7A7A\u767D\u5904\u653E\u7F6E\u65B0\u8282\u70B9\u3002",addEdge:"\u6DFB\u52A0\u8FDE\u63A5\u7EBF",addNode:"\u6DFB\u52A0\u8282\u70B9",back:"\u8FD4\u56DE",close:"\u95DC\u9589",createEdgeError:"\u65E0\u6CD5\u5C06\u8FDE\u63A5\u7EBF\u8FDE\u63A5\u5230\u7FA4\u96C6\u3002",del:"\u5220\u9664\u9009\u5B9A",deleteClusterError:"\u65E0\u6CD5\u5220\u9664\u7FA4\u96C6\u3002",edgeDescription:"\u5355\u51FB\u67D0\u4E2A\u8282\u70B9\u5E76\u5C06\u8BE5\u8FDE\u63A5\u7EBF\u62D6\u52A8\u5230\u53E6\u4E00\u4E2A\u8282\u70B9\u4EE5\u8FDE\u63A5\u5B83\u4EEC\u3002",edit:"\u7F16\u8F91",editClusterError:"\u65E0\u6CD5\u7F16\u8F91\u7FA4\u96C6\u3002",editEdge:"\u7F16\u8F91\u8FDE\u63A5\u7EBF",editEdgeDescription:"\u5355\u51FB\u63A7\u5236\u8282\u70B9\u5E76\u5C06\u5B83\u4EEC\u62D6\u5230\u8282\u70B9\u4E0A\u8FDE\u63A5\u3002",editNode:"\u7F16\u8F91\u8282\u70B9"},cs:{addDescription:"Kluknut\xEDm do pr\xE1zdn\xE9ho prostoru m\u016F\u017Eete p\u0159idat nov\xFD vrchol.",addEdge:"P\u0159idat hranu",addNode:"P\u0159idat vrchol",back:"Zp\u011Bt",close:"Zav\u0159\xEDt",createEdgeError:"Nelze p\u0159ipojit hranu ke shluku.",del:"Smazat v\xFDb\u011Br",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"P\u0159eta\u017Een\xEDm z jednoho vrcholu do druh\xE9ho m\u016F\u017Eete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"P\u0159eta\u017Een\xEDm kontroln\xEDho vrcholu hrany ji m\u016F\u017Eete p\u0159ipojit k jin\xE9mu vrcholu.",editNode:"Upravit vrchol"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzuf\xFCgen",addNode:"Knoten hinzuf\xFCgen",back:"Zur\xFCck",close:"Schlie\xDFen",createEdgeError:"Es ist nicht m\xF6glich, Kanten mit Clustern zu verbinden.",del:"L\xF6sche Auswahl",deleteClusterError:"Cluster k\xF6nnen nicht gel\xF6scht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster k\xF6nnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},es:{addDescription:"Haga clic en un lugar vac\xEDo para colocar un nuevo nodo.",addEdge:"A\xF1adir arista",addNode:"A\xF1adir nodo",back:"Atr\xE1s",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selecci\xF3n",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un n\u0153ud.",addEdge:"Ajouter un lien",addNode:"Ajouter un n\u0153ud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de cr\xE9er un lien vers un cluster.",del:"Effacer la s\xE9lection",deleteClusterError:"Les clusters ne peuvent pas \xEAtre effac\xE9s.",edgeDescription:"Cliquez sur un n\u0153ud et glissez le lien vers un autre n\u0153ud pour les connecter.",edit:"\xC9diter",editClusterError:"Les clusters ne peuvent pas \xEAtre \xE9dit\xE9s.",editEdge:"\xC9diter le lien",editEdgeDescription:"Cliquez sur les points de contr\xF4le et glissez-les pour connecter un n\u0153ud.",editNode:"\xC9diter le n\u0153ud"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espa\xE7o em branco para adicionar um novo n\xF3",addEdge:"Adicionar aresta",addNode:"Adicionar n\xF3",back:"Voltar",close:"Fechar",createEdgeError:"N\xE3o foi poss\xEDvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters n\xE3o puderam ser removidos.",edgeDescription:"Clique em um n\xF3 e arraste a aresta at\xE9 outro n\xF3 para conect\xE1-los",edit:"Editar",editClusterError:"Clusters n\xE3o puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n\xF3 para conect\xE1-los",editNode:"Editar n\xF3"},ru:{addDescription:"\u041A\u043B\u0438\u043A\u043D\u0438\u0442\u0435 \u0432 \u0441\u0432\u043E\u0431\u043E\u0434\u043D\u043E\u0435 \u043C\u0435\u0441\u0442\u043E, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u044B\u0439 \u0443\u0437\u0435\u043B.",addEdge:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0440\u0435\u0431\u0440\u043E",addNode:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0437\u0435\u043B",back:"\u041D\u0430\u0437\u0430\u0434",close:"\u0417\u0430\u043A\u0440\u044B\u0432\u0430\u0442\u044C",createEdgeError:"\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0435\u0434\u0438\u043D\u0438\u0442\u044C \u0440\u0435\u0431\u0440\u0430 \u0432 \u043A\u043B\u0430\u0441\u0442\u0435\u0440.",del:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435",deleteClusterError:"\u041A\u043B\u0430\u0441\u0442\u0435\u0440\u044B \u043D\u0435 \u043C\u043E\u0433\u0443\u0442 \u0431\u044B\u0442\u044C \u0443\u0434\u0430\u043B\u0435\u043D\u044B",edgeDescription:"\u041A\u043B\u0438\u043A\u043D\u0438\u0442\u0435 \u043D\u0430 \u0443\u0437\u0435\u043B \u0438 \u043F\u0440\u043E\u0442\u044F\u043D\u0438\u0442\u0435 \u0440\u0435\u0431\u0440\u043E \u043A \u0434\u0440\u0443\u0433\u043E\u043C\u0443 \u0443\u0437\u043B\u0443, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0435\u0434\u0438\u043D\u0438\u0442\u044C \u0438\u0445.",edit:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",editClusterError:"\u041A\u043B\u0430\u0441\u0442\u0435\u0440\u044B \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F.",editEdge:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0440\u0435\u0431\u0440\u043E",editEdgeDescription:"\u041A\u043B\u0438\u043A\u043D\u0438\u0442\u0435 \u043D\u0430 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\u043D\u044B\u0435 \u0442\u043E\u0447\u043A\u0438 \u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0445 \u0432 \u0443\u0437\u0435\u043B, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u043D\u0435\u043C\u0443.",editNode:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0443\u0437\u0435\u043B"},uk:{addDescription:"K\u043B\u0456\u043A\u043D\u0456\u0442\u044C \u043D\u0430 \u0432\u0456\u043B\u044C\u043D\u0435 \u043C\u0456\u0441\u0446\u0435, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0432\u0443\u0437\u043E\u043B.",addEdge:"\u0414\u043E\u0434\u0430\u0442\u0438 \u043A\u0440\u0430\u0439",addNode:"\u0414\u043E\u0434\u0430\u0442\u0438 \u0432\u0443\u0437\u043E\u043B",back:"\u041D\u0430\u0437\u0430\u0434",close:"\u0417\u0430\u043A\u0440\u0438\u0442\u0438",createEdgeError:"\u041D\u0435 \u043C\u043E\u0436\u043B\u0438\u0432\u043E \u043E\u0431'\u0454\u0434\u043D\u0430\u0442\u0438 \u043A\u0440\u0430\u0457 \u0432 \u0433\u0440\u0443\u043F\u0443.",del:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043E\u0431\u0440\u0430\u043D\u0435",deleteClusterError:"\u0413\u0440\u0443\u043F\u0438 \u043D\u0435 \u043C\u043E\u0436\u0443\u0442\u044C \u0431\u0443\u0442\u0438 \u0432\u0438\u0434\u0430\u043B\u0435\u043D\u0456.",edgeDescription:"\u041A\u043B\u0456\u043A\u043D\u0456\u0442\u044C \u043D\u0430 \u0432\u0443\u0437\u043E\u043B \u0456 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u043A\u0440\u0430\u0439 \u0434\u043E \u0456\u043D\u0448\u043E\u0433\u043E \u0432\u0443\u0437\u043B\u0430, \u0449\u043E\u0431 \u0457\u0445 \u0437'\u0454\u0434\u043D\u0430\u0442\u0438.",edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",editClusterError:"\u0413\u0440\u0443\u043F\u0438 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0456 \u0434\u043B\u044F \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043D\u043D\u044F.",editEdge:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043A\u0440\u0430\u0439",editEdgeDescription:"\u041A\u043B\u0456\u043A\u043D\u0456\u0442\u044C \u043D\u0430 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u044C\u043D\u0456 \u0442\u043E\u0447\u043A\u0438 \u0456 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0457\u0445 \u0443 \u0432\u0443\u0437\u043E\u043B, \u0449\u043E\u0431 \u043F\u0456\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u0438\u0441\u044F \u0434\u043E \u043D\u044C\u043E\u0433\u043E.",editNode:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0443\u0437\u043E\u043B"}}),gu={};function mu(){if(au)return gu;au=1;var n=A(),t=U(),e=Se(),i=ft(),o=Pt(),s=Zt(),r=wc(),a=Co(),h=$n(),d=Li(),l=dt(),c=bi(),u=l("isConcatSpreadable"),p=c>=51||!t(function(){var m=[];return m[u]=!1,m.concat()[0]!==m}),g=function(m){if(!i(m))return!1;var f=m[u];return f!==void 0?!!f:e(m)};return n({target:"Array",proto:!0,arity:1,forced:!p||!d("concat")},{concat:function(m){var f,v,y,_,b,w=o(this),E=h(w,0),D=0;for(f=-1,y=arguments.length;f<y;f++)if(g(b=f===-1?w:arguments[f]))for(_=s(b),r(D+_),v=0;v<_;v++,D++)v in b&&a(E,D,b[v]);else r(D+1),a(E,D++,b);return E.length=D,E}}),gu}function s_(){return du?hu:(du=1,mu(),hu=bt()("Array","concat"))}function r_(){if(lu)return ss;lu=1;var n=ht(),t=s_(),e=Array.prototype;return ss=function(i){var o=i.concat;return i===e||n(e,i)&&o===e.concat?t:o},ss}function a_(){return uu?cu:(uu=1,cu=r_())}var vu,yu,bu,wu,rs,_u,xu,Eu,Ou,Cu,as,ku,Su,Tu,Du,Mu,Iu,Pu,hs,Nu,ds,Bu,ls,zu,Fu,Au,ju,Ru,Lu,Hu,cs,Wu,Vu,qu,us,Uu,h_=L(fu?pu:(fu=1,pu=a_()));class d_{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const t=this.image.width,e=this.image.height;this.width=t,this.height=e;const i=Math.floor(e/2),o=Math.floor(e/4),s=Math.floor(e/8),r=Math.floor(e/16),a=Math.floor(t/2),h=Math.floor(t/4),d=Math.floor(t/8),l=Math.floor(t/16);this.canvas.width=3*h,this.canvas.height=i,this.coordinates=[[0,0,a,i],[a,0,h,o],[a,o,d,s],[5*d,o,l,r]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(let i=1;i<this.NUM_ITERATIONS;i++){const o=this.coordinates[i-1],s=this.coordinates[i];t.drawImage(this.canvas,o[0],o[1],o[2],o[3],s[0],s[1],s[2],s[3])}}drawImageAtPosition(t,e,i,o,s,r){if(this.initialized())if(e>2){e*=.5;let a=0;for(;e>2&&a<this.NUM_ITERATIONS;)e*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);const h=this.coordinates[a];t.drawImage(this.canvas,h[0],h[1],h[2],h[3],i,o,s,r)}else t.drawImage(this.image,i,o,s,r)}}class Yu{constructor(t){this.images={},this.imageBroken={},this.callback=t}_tryloadBrokenUrl(t,e,i){t!==void 0&&i!==void 0&&(e!==void 0?(i.image.onerror=()=>{console.error("Could not load brokenImage:",e)},i.image.src=e):console.warn("No broken url image defined"))}_redrawWithImage(t){this.callback&&this.callback(t)}load(t,e){const i=this.images[t];if(i)return i;const o=new d_;return this.images[t]=o,o.image.onload=()=>{this._fixImageCoordinates(o.image),o.init(),this._redrawWithImage(o)},o.image.onerror=()=>{console.error("Could not load image:",t),this._tryloadBrokenUrl(t,e,o)},o.image.src=t,o}_fixImageCoordinates(t){t.width===0&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}function ri(){return yu?vu:(yu=1,vu={})}function Xu(){if(wu)return bu;wu=1;var n=et(),t=pt(),e=n.WeakMap;return bu=t(e)&&/native code/.test(String(e))}function Te(){if(_u)return rs;_u=1;var n,t,e,i=Xu(),o=et(),s=ft(),r=Ge(),a=vt(),h=sn(),d=Oo(),l=_i(),c="Object already initialized",u=o.TypeError,p=o.WeakMap;if(i||h.state){var g=h.state||(h.state=new p);g.get=g.get,g.has=g.has,g.set=g.set,n=function(f,v){if(g.has(f))throw new u(c);return v.facade=f,g.set(f,v),v},t=function(f){return g.get(f)||{}},e=function(f){return g.has(f)}}else{var m=d("state");l[m]=!0,n=function(f,v){if(a(f,m))throw new u(c);return v.facade=f,r(f,m,v),v},t=function(f){return a(f,m)?f[m]:{}},e=function(f){return a(f,m)}}return rs={set:n,get:t,has:e,enforce:function(f){return e(f)?t(f):n(f,{})},getterFor:function(f){return function(v){var y;if(!s(v)||(y=t(v)).type!==f)throw new u("Incompatible receiver, "+f+" required");return y}}},rs}function l_(){if(Eu)return xu;Eu=1;var n=rt(),t=vt(),e=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,o=t(e,"name"),s=o&&function(){}.name==="something",r=o&&(!n||n&&i(e,"name").configurable);return xu={EXISTS:o,PROPER:s,CONFIGURABLE:r}}function c_(){return Cu?Ou:(Cu=1,Ou=!U()(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}))}function ps(){if(ku)return as;ku=1;var n=vt(),t=pt(),e=Pt(),i=Oo(),o=c_(),s=i("IE_PROTO"),r=Object,a=r.prototype;return as=o?r.getPrototypeOf:function(h){var d=e(h);if(n(d,s))return d[s];var l=d.constructor;return t(l)&&d instanceof l?l.prototype:d instanceof r?a:null},as}function Vi(){if(Tu)return Su;Tu=1;var n=Ge();return Su=function(t,e,i,o){return o&&o.enumerable?t[e]=i:n(t,e,i),t}}function Gu(){if(Mu)return Du;Mu=1;var n,t,e,i=U(),o=pt(),s=ft(),r=Ai(),a=ps(),h=Vi(),d=dt(),l=Ye(),c=d("iterator"),u=!1;return[].keys&&("next"in(e=[].keys())?(t=a(a(e)))!==Object.prototype&&(n=t):u=!0),!s(n)||i(function(){var p={};return n[c].call(p)!==p})?n={}:l&&(n=r(n)),o(n[c])||h(n,c,function(){return this}),Du={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:u}}function u_(){if(Pu)return Iu;Pu=1;var n=Xn(),t=oi();return Iu=n?{}.toString:function(){return"[object "+t(this)+"]"}}function De(){if(Nu)return hs;Nu=1;var n=Xn(),t=Nt().f,e=Ge(),i=vt(),o=u_(),s=dt()("toStringTag");return hs=function(r,a,h,d){var l=h?r:r&&r.prototype;l&&(i(l,s)||t(l,s,{configurable:!0,value:a}),d&&!n&&e(l,"toString",o))},hs}function p_(){if(Bu)return ds;Bu=1;var n=Gu().IteratorPrototype,t=Ai(),e=yi(),i=De(),o=ri(),s=function(){return this};return ds=function(r,a,h,d){var l=a+" Iterator";return r.prototype=t(n,{next:e(+!d,h)}),i(r,l,!1,!0),o[l]=s,r},ds}function f_(){if(zu)return ls;zu=1;var n=Y(),t=Kt();return ls=function(e,i,o){try{return n(t(Object.getOwnPropertyDescriptor(e,i)[o]))}catch{}},ls}function g_(){if(Au)return Fu;Au=1;var n=ft();return Fu=function(t){return n(t)||t===null}}function m_(){if(Ru)return ju;Ru=1;var n=g_(),t=String,e=TypeError;return ju=function(i){if(n(i))return i;throw new e("Can't set "+t(i)+" as a prototype")}}function v_(){if(Hu)return Lu;Hu=1;var n=f_(),t=ft(),e=Gt(),i=m_();return Lu=Object.setPrototypeOf||("__proto__"in{}?function(){var o,s=!1,r={};try{(o=n(Object.prototype,"__proto__","set"))(r,[]),s=r instanceof Array}catch{}return function(a,h){return e(a),i(h),t(a)&&(s?o(a,h):a.__proto__=h),a}}():void 0)}function fs(){if(Wu)return cs;Wu=1;var n=A(),t=kt(),e=Ye(),i=l_(),o=pt(),s=p_(),r=ps(),a=v_(),h=De(),d=Ge(),l=Vi(),c=dt(),u=ri(),p=Gu(),g=i.PROPER,m=i.CONFIGURABLE,f=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,y=c("iterator"),_="keys",b="values",w="entries",E=function(){return this};return cs=function(D,O,k,B,S,C,T){s(k,O,B);var N,R,Q,ct=function(be){if(be===S&&At)return At;if(!v&&be&&be in xt)return xt[be];switch(be){case _:case b:case w:return function(){return new k(this,be)}}return function(){return new k(this)}},It=O+" Iterator",Ft=!1,xt=D.prototype,ut=xt[y]||xt["@@iterator"]||S&&xt[S],At=!v&&ut||ct(S),ye=O==="Array"&&xt.entries||ut;if(ye&&(N=r(ye.call(new D)))!==Object.prototype&&N.next&&(e||r(N)===f||(a?a(N,f):o(N[y])||l(N,y,E)),h(N,It,!0,!0),e&&(u[It]=E)),g&&S===b&&ut&&ut.name!==b&&(!e&&m?d(xt,"name",b):(Ft=!0,At=function(){return t(ut,this)})),S)if(R={values:ct(b),keys:C?At:ct(_),entries:ct(w)},T)for(Q in R)(v||Ft||!(Q in xt))&&l(xt,Q,R[Q]);else n({target:O,proto:!0,forced:v||Ft},R);return e&&!T||xt[y]===At||l(xt,y,At,{name:S}),u[O]=At,R},cs}function gs(){return qu?Vu:(qu=1,Vu=function(n,t){return{value:n,done:t}})}function ai(){if(Uu)return us;Uu=1;var n=Rt(),t=Wn(),e=ri(),i=Te(),o=Nt().f,s=fs(),r=gs(),a=Ye(),h=rt(),d="Array Iterator",l=i.set,c=i.getterFor(d);us=s(Array,"Array",function(p,g){l(this,{type:d,target:n(p),index:0,kind:g})},function(){var p=c(this),g=p.target,m=p.index++;if(!g||m>=g.length)return p.target=null,r(void 0,!0);switch(p.kind){case"keys":return r(m,!1);case"values":return r(g[m],!1)}return r([m,g[m]],!1)},"values");var u=e.Arguments=e.Array;if(t("keys"),t("values"),t("entries"),!a&&h&&u.name!=="values")try{o(u,"name",{value:"values"})}catch{}return us}var Ku,y_={},ms={exports:{}},vs={};function ko(){if(Ku)return vs;Ku=1;var n=Dh(),t=pn().concat("length","prototype");return vs.f=Object.getOwnPropertyNames||function(e){return n(e,t)},vs}var Zu,Qu,$u,ys,Ju,tp,ep,ip,bs,op,ws,np,_s,sp,xs,rp,Es,ap,Os,hp,dp,lp,cp,up,pp,fp,gp,mp,Cs,vp,yp,bp,ks={};function Ss(){if(Zu)return ks;Zu=1;var n=qt(),t=Rt(),e=ko().f,i=Ze(),o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];return ks.f=function(s){return o&&n(s)==="Window"?function(r){try{return e(r)}catch{return i(o)}}(s):e(t(s))},ks}function b_(){return $u?Qu:($u=1,Qu=U()(function(){if(typeof ArrayBuffer=="function"){var n=new ArrayBuffer(8);Object.isExtensible(n)&&Object.defineProperty(n,"a",{value:8})}}))}function w_(){if(Ju)return ys;Ju=1;var n=U(),t=ft(),e=qt(),i=b_(),o=Object.isExtensible,s=n(function(){});return ys=s||i?function(r){return!!t(r)&&(!i||e(r)!=="ArrayBuffer")&&(!o||o(r))}:o,ys}function wp(){return ep?tp:(ep=1,tp=!U()(function(){return Object.isExtensible(Object.preventExtensions({}))}))}function So(){if(ip)return ms.exports;ip=1;var n=A(),t=Y(),e=_i(),i=ft(),o=vt(),s=Nt().f,r=ko(),a=Ss(),h=w_(),d=so(),l=wp(),c=!1,u=d("meta"),p=0,g=function(f){s(f,u,{value:{objectID:"O"+p++,weakData:{}}})},m=ms.exports={enable:function(){m.enable=function(){},c=!0;var f=r.f,v=t([].splice),y={};y[u]=1,f(y).length&&(r.f=function(_){for(var b=f(_),w=0,E=b.length;w<E;w++)if(b[w]===u){v(b,w,1);break}return b},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},fastKey:function(f,v){if(!i(f))return typeof f=="symbol"?f:(typeof f=="string"?"S":"P")+f;if(!o(f,u)){if(!h(f))return"F";if(!v)return"E";g(f)}return f[u].objectID},getWeakData:function(f,v){if(!o(f,u)){if(!h(f))return!0;if(!v)return!1;g(f)}return f[u].weakData},onFreeze:function(f){return l&&c&&h(f)&&!o(f,u)&&g(f),f}};return e[u]=!0,ms.exports}function __(){if(op)return bs;op=1;var n=dt(),t=ri(),e=n("iterator"),i=Array.prototype;return bs=function(o){return o!==void 0&&(t.Array===o||i[e]===o)},bs}function _p(){if(np)return ws;np=1;var n=oi(),t=Jo(),e=We(),i=ri(),o=dt()("iterator");return ws=function(s){if(!e(s))return t(s,o)||t(s,"@@iterator")||i[n(s)]},ws}function x_(){if(sp)return _s;sp=1;var n=kt(),t=Kt(),e=Ut(),i=Ue(),o=_p(),s=TypeError;return _s=function(r,a){var h=arguments.length<2?o(r):a;if(t(h))return e(n(h,r));throw new s(i(r)+" is not iterable")},_s}function Ts(){if(rp)return xs;rp=1;var n=kt(),t=Ut(),e=Jo();return xs=function(i,o,s){var r,a;t(i);try{if(!(r=e(i,"return"))){if(o==="throw")throw s;return s}r=n(r,i)}catch(h){a=!0,r=h}if(o==="throw")throw s;if(a)throw r;return t(r),s},xs}function To(){if(ap)return Es;ap=1;var n=ao(),t=kt(),e=Ut(),i=Ue(),o=__(),s=Zt(),r=ht(),a=x_(),h=_p(),d=Ts(),l=TypeError,c=function(p,g){this.stopped=p,this.result=g},u=c.prototype;return Es=function(p,g,m){var f,v,y,_,b,w,E,D=m&&m.that,O=!(!m||!m.AS_ENTRIES),k=!(!m||!m.IS_RECORD),B=!(!m||!m.IS_ITERATOR),S=!(!m||!m.INTERRUPTED),C=n(g,D),T=function(R){return f&&d(f,"normal"),new c(!0,R)},N=function(R){return O?(e(R),S?C(R[0],R[1],T):C(R[0],R[1])):S?C(R,T):C(R)};if(k)f=p.iterator;else if(B)f=p;else{if(!(v=h(p)))throw new l(i(p)+" is not iterable");if(o(v)){for(y=0,_=s(p);_>y;y++)if((b=N(p[y]))&&r(u,b))return b;return new c(!1)}f=a(p,v)}for(w=k?p.next:f.next;!(E=t(w,f)).done;){try{b=N(E.value)}catch(R){d(f,"throw",R)}if(typeof b=="object"&&b&&r(u,b))return b}return new c(!1)},Es}function Ds(){if(hp)return Os;hp=1;var n=ht(),t=TypeError;return Os=function(e,i){if(n(i,e))return e;throw new t("Incorrect invocation")},Os}function Ms(){if(lp)return dp;lp=1;var n=A(),t=et(),e=So(),i=U(),o=Ge(),s=To(),r=Ds(),a=pt(),h=ft(),d=We(),l=De(),c=Nt().f,u=ae().forEach,p=rt(),g=Te(),m=g.set,f=g.getterFor;return dp=function(v,y,_){var b,w=v.indexOf("Map")!==-1,E=v.indexOf("Weak")!==-1,D=w?"set":"add",O=t[v],k=O&&O.prototype,B={};if(p&&a(O)&&(E||k.forEach&&!i(function(){new O().entries().next()}))){var S=(b=y(function(T,N){m(r(T,S),{type:v,collection:new O}),d(N)||s(N,T[D],{that:T,AS_ENTRIES:w})})).prototype,C=f(v);u(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(T){var N=T==="add"||T==="set";!(T in k)||E&&T==="clear"||o(S,T,function(R,Q){var ct=C(this).collection;if(!N&&E&&!h(R))return T==="get"&&void 0;var It=ct[T](R===0?0:R,Q);return N?this:It})}),E||c(S,"size",{configurable:!0,get:function(){return C(this).collection.size}})}else b=_.getConstructor(y,v,w,D),e.enable();return l(b,v,!1,!0),B[v]=b,n({global:!0,forced:!0},B),E||_.setStrong(b,v,w),b}}function Is(){if(up)return cp;up=1;var n=Nt();return cp=function(t,e,i){return n.f(t,e,i)}}function Ps(){if(fp)return pp;fp=1;var n=Vi();return pp=function(t,e,i){for(var o in e)i&&i.unsafe&&t[o]?t[o]=e[o]:n(t,o,e[o],i);return t}}function E_(){if(mp)return gp;mp=1;var n=Tt(),t=Is(),e=dt(),i=rt(),o=e("species");return gp=function(s){var r=n(s);i&&r&&!r[o]&&t(r,o,{configurable:!0,get:function(){return this}})}}function xp(){if(vp)return Cs;vp=1;var n=Ai(),t=Is(),e=Ps(),i=ao(),o=Ds(),s=We(),r=To(),a=fs(),h=gs(),d=E_(),l=rt(),c=So().fastKey,u=Te(),p=u.set,g=u.getterFor;return Cs={getConstructor:function(m,f,v,y){var _=m(function(O,k){o(O,b),p(O,{type:f,index:n(null),first:null,last:null,size:0}),l||(O.size=0),s(k)||r(k,O[y],{that:O,AS_ENTRIES:v})}),b=_.prototype,w=g(f),E=function(O,k,B){var S,C,T=w(O),N=D(O,k);return N?N.value=B:(T.last=N={index:C=c(k,!0),key:k,value:B,previous:S=T.last,next:null,removed:!1},T.first||(T.first=N),S&&(S.next=N),l?T.size++:O.size++,C!=="F"&&(T.index[C]=N)),O},D=function(O,k){var B,S=w(O),C=c(k);if(C!=="F")return S.index[C];for(B=S.first;B;B=B.next)if(B.key===k)return B};return e(b,{clear:function(){for(var O=w(this),k=O.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=null),k=k.next;O.first=O.last=null,O.index=n(null),l?O.size=0:this.size=0},delete:function(O){var k=this,B=w(k),S=D(k,O);if(S){var C=S.next,T=S.previous;delete B.index[S.index],S.removed=!0,T&&(T.next=C),C&&(C.previous=T),B.first===S&&(B.first=C),B.last===S&&(B.last=T),l?B.size--:k.size--}return!!S},forEach:function(O){for(var k,B=w(this),S=i(O,arguments.length>1?arguments[1]:void 0);k=k?k.next:B.first;)for(S(k.value,k.key,this);k&&k.removed;)k=k.previous},has:function(O){return!!D(this,O)}}),e(b,v?{get:function(O){var k=D(this,O);return k&&k.value},set:function(O,k){return E(this,O===0?0:O,k)}}:{add:function(O){return E(this,O=O===0?0:O,O)}}),l&&t(b,"size",{configurable:!0,get:function(){return w(this).size}}),_},setStrong:function(m,f,v){var y=f+" Iterator",_=g(f),b=g(y);a(m,f,function(w,E){p(this,{type:y,target:w,state:_(w),kind:E,last:null})},function(){for(var w=b(this),E=w.kind,D=w.last;D&&D.removed;)D=D.previous;return w.target&&(w.last=D=D?D.next:w.state.first)?h(E==="keys"?D.key:E==="values"?D.value:[D.key,D.value],!1):(w.target=null,h(void 0,!0))},v?"entries":"values",!v,!0),d(f)}},Cs}function O_(){return bp||(bp=1,yp||(yp=1,Ms()("Map",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},xp()))),y_}var Ep,Op,Cp,kp,Sp,C_={};function Tp(){return Op||(Op=1,Ep=function(n,t){return t===1?function(e,i){return e[n](i)}:function(e,i,o){return e[n](i,o)}}),Ep}function k_(){if(kp)return Cp;kp=1;var n=Tt(),t=Tp(),e=n("Map");return Cp={Map:e,set:t("set",2),get:t("get",1),has:t("has",1),remove:t("delete",1),proto:e.prototype}}var Dp,Mp,Ip,Pp,Np,Bp={};function S_(){if(Mp)return Dp;Mp=1;var n=Y(),t=Ke(),e=zt(),i=Gt(),o=n("".charAt),s=n("".charCodeAt),r=n("".slice),a=function(h){return function(d,l){var c,u,p=e(i(d)),g=t(l),m=p.length;return g<0||g>=m?h?"":void 0:(c=s(p,g))<55296||c>56319||g+1===m||(u=s(p,g+1))<56320||u>57343?h?o(p,g):c:h?r(p,g,g+2):u-56320+(c-55296<<10)+65536}};return Dp={codeAt:a(!1),charAt:a(!0)}}function Ns(){if(Ip)return Bp;Ip=1;var n=S_().charAt,t=zt(),e=Te(),i=fs(),o=gs(),s="String Iterator",r=e.set,a=e.getterFor(s);return i(String,"String",function(h){r(this,{type:s,string:t(h),index:0})},function(){var h,d=a(this),l=d.string,c=d.index;return c>=l.length?o(void 0,!0):(h=n(l,c),d.index+=h.length,o(h,!1))}),Bp}function T_(){return Np?Pp:(Np=1,ai(),O_(),function(){if(Sp)return C_;Sp=1;var n=A(),t=Y(),e=Kt(),i=Gt(),o=To(),s=k_(),r=Ye(),a=U(),h=s.Map,d=s.has,l=s.get,c=s.set,u=t([].push),p=r||a(function(){return h.groupBy("ab",function(g){return g}).get("a").length!==1});n({target:"Map",stat:!0,forced:r||p},{groupBy:function(g,m){i(g),e(m);var f=new h,v=0;return o(g,function(y){var _=m(y,v++);d(f,_)?u(l(f,_),y):c(f,_,[y])}),f}})}(),Ns(),Pp=G().Map)}var zp,Fp,Ap,jp,Rp,Lp,Hp,Wp={};function D_(){return Fp?zp:(Fp=1,zp={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0})}function hi(){if(Ap)return Wp;Ap=1,ai();var n=D_(),t=et(),e=De(),i=ri();for(var o in n)e(t[o],o),i[o]=i.Array;return Wp}function M_(){if(Rp)return jp;Rp=1;var n=T_();return hi(),jp=n}var Bs=L(Hp?Lp:(Hp=1,Lp=M_()));class I_{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},yt(this.options,this.defaultOptions)}setOptions(t){const e=["useDefaultGroups"];if(t!==void 0){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&ot(e).call(e,i)===-1){const o=t[i];this.add(i,o)}}}clear(){this._groups=new Bs,this._groupNames=[]}get(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this._groups.get(t);if(i===void 0&&e)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const o=this._groupIndex%this._groupNames.length;++this._groupIndex,i={},i.color=this._groups.get(this._groupNames[o]),this._groups.set(t,i)}else{const o=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,i={},i.color=this._defaultGroups[o],this._groups.set(t,i)}return i}add(t,e){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,e),e}}var Vp,qp,Up,Yp,Xp,Gp,Kp;function P_(){return Up?qp:(Up=1,Vp||(Vp=1,A()({target:"Number",stat:!0},{isNaN:function(n){return n!=n}})),qp=G().Number.isNaN)}function N_(){return Xp?Yp:(Xp=1,Yp=P_())}var zs,Zp,Qp,$p,Jp,tf,ef,of,nf,Fs=L(Kp?Gp:(Kp=1,Gp=N_()));function B_(){if(Zp)return zs;Zp=1;var n=et().isFinite;return zs=Number.isFinite||function(t){return typeof t=="number"&&n(t)},zs}function z_(){return Jp?$p:(Jp=1,Qp||(Qp=1,A()({target:"Number",stat:!0},{isFinite:B_()})),$p=G().Number.isFinite)}function F_(){return ef?tf:(ef=1,tf=z_())}var sf,rf,af,hf,df,lf,cf,Me=L(nf?of:(nf=1,of=F_())),A_={};function j_(){return af?rf:(af=1,function(){if(sf)return A_;sf=1;var n=A(),t=Pt(),e=xi();n({target:"Object",stat:!0,forced:U()(function(){e(1)})},{keys:function(i){return e(t(i))}})}(),rf=G().Object.keys)}function R_(){return df?hf:(df=1,hf=j_())}var uf,pf,ff,As,gf,mf,vf,yf,bf,lt=L(cf?lf:(cf=1,lf=R_())),L_={};function H_(){return ff?pf:(ff=1,function(){if(uf)return L_;uf=1;var n=A(),t=ae().some;n({target:"Array",proto:!0,forced:!ii()("some")},{some:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})}(),pf=bt()("Array","some"))}function W_(){if(gf)return As;gf=1;var n=ht(),t=H_(),e=Array.prototype;return As=function(i){var o=i.some;return i===e||n(e,i)&&o===e.some?t:o},As}function V_(){return vf?mf:(vf=1,mf=W_())}var wf,_f,xf,Ef,js,Of,Cf,q_=L(bf?yf:(bf=1,yf=V_())),U_={},Y_={};function kf(){if(_f)return wf;_f=1;var n=et(),t=Ve(),e=qt(),i=function(o){return t.slice(0,o.length)===o};return wf=i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":n.Bun&&typeof Bun.version=="string"?"BUN":n.Deno&&typeof Deno.version=="object"?"DENO":e(n.process)==="process"?"NODE":n.window&&n.document?"BROWSER":"REST"}function X_(){if(Ef)return xf;Ef=1;var n=TypeError;return xf=function(t,e){if(t<e)throw new n("Not enough arguments");return t}}function Sf(){if(Of)return js;Of=1;var n,t=et(),e=io(),i=pt(),o=kf(),s=Ve(),r=Ze(),a=X_(),h=t.Function,d=/MSIE .\./.test(s)||o==="BUN"&&((n=t.Bun.version.split(".")).length<3||n[0]==="0"&&(n[1]<3||n[1]==="3"&&n[2]==="0"));return js=function(l,c){var u=c?2:1;return d?function(p,g){var m=a(arguments.length,1)>u,f=i(p)?p:h(p),v=m?r(arguments,u):[],y=m?function(){e(f,this,v)}:f;return c?l(y,g):l(y)}:l},js}var Tf,Df,Mf,If,Pf,Nf,G_={};function Bf(){return Df||(Df=1,function(){if(Cf)return Y_;Cf=1;var n=A(),t=et(),e=Sf()(t.setInterval,!0);n({global:!0,bind:!0,forced:t.setInterval!==e},{setInterval:e})}(),function(){if(Tf)return G_;Tf=1;var n=A(),t=et(),e=Sf()(t.setTimeout,!0);n({global:!0,bind:!0,forced:t.setTimeout!==e},{setTimeout:e})}()),U_}function K_(){return If?Mf:(If=1,Bf(),Mf=G().setTimeout)}var di=L(Nf?Pf:(Nf=1,Pf=K_()));const wt=[];for(let n=0;n<256;++n)wt.push((n+256).toString(16).slice(1));let Rs;const Z_=new Uint8Array(16);var zf={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Q_(n,t,e){const i=(n=n||{}).random??n.rng?.()??function(){if(!Rs){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rs=crypto.getRandomValues.bind(crypto)}return Rs(Z_)}();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(o,s=0){return(wt[o[s+0]]+wt[o[s+1]]+wt[o[s+2]]+wt[o[s+3]]+"-"+wt[o[s+4]]+wt[o[s+5]]+"-"+wt[o[s+6]]+wt[o[s+7]]+"-"+wt[o[s+8]]+wt[o[s+9]]+"-"+wt[o[s+10]]+wt[o[s+11]]+wt[o[s+12]]+wt[o[s+13]]+wt[o[s+14]]+wt[o[s+15]]).toLowerCase()}(i)}function li(n,t,e){return zf.randomUUID&&!n?zf.randomUUID():Q_(n)}/**
	 * vis-data
	 * http://visjs.org/
	 *
	 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
	 *
	 * @version 8.0.3
	 * @date    2025-09-10T16:22:00.613Z
	 *
	 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
	 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
	 *
	 * @license
	 * vis.js is dual licensed under both
	 *
	 *   1. The Apache 2.0 License
	 *      http://www.apache.org/licenses/LICENSE-2.0
	 *
	 *   and
	 *
	 *   2. The MIT License
	 *      http://opensource.org/licenses/MIT
	 *
	 * vis.js may be distributed under either license.
	 */class $_{_source;_transformers;_target;_listeners={add:this._add.bind(this),remove:this._remove.bind(this),update:this._update.bind(this)};constructor(t,e,i){this._source=t,this._transformers=e,this._target=i}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(t){return this._transformers.reduce((e,i)=>i(e),t)}_add(t,e){e!=null&&this._target.add(this._transformItems(this._source.get(e.items)))}_update(t,e){e!=null&&this._target.update(this._transformItems(this._source.get(e.items)))}_remove(t,e){e!=null&&this._target.remove(this._transformItems(e.oldData))}}class J_{_source;_transformers=[];constructor(t){this._source=t}filter(t){return this._transformers.push(e=>e.filter(t)),this}map(t){return this._transformers.push(e=>e.map(t)),this}flatMap(t){return this._transformers.push(e=>e.flatMap(t)),this}to(t){return new $_(this._source,this._transformers,t)}}function Ls(n){return typeof n=="string"||typeof n=="number"}class ci{delay;max;_queue=[];_timeout=null;_extended=null;constructor(t){this.delay=null,this.max=1/0,this.setOptions(t)}setOptions(t){t&&t.delay!==void 0&&(this.delay=t.delay),t&&t.max!==void 0&&(this.max=t.max),this._flushIfNeeded()}static extend(t,e){const i=new ci(e);if(t.flush!==void 0)throw new Error("Target object already has a property flush");t.flush=()=>{i.flush()};const o=[{name:"flush",original:void 0}];if(e&&e.replace)for(let s=0;s<e.replace.length;s++){const r=e.replace[s];o.push({name:r,original:t[r]}),i.replace(t,r)}return i._extended={object:t,methods:o},i}destroy(){if(this.flush(),this._extended){const t=this._extended.object,e=this._extended.methods;for(let i=0;i<e.length;i++){const o=e[i];o.original?t[o.name]=o.original:delete t[o.name]}this._extended=null}}replace(t,e){const i=this,o=t[e];if(!o)throw new Error("Method "+e+" undefined");t[e]=function(...s){i.queue({args:s,fn:o,context:this})}}queue(t){typeof t=="function"?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=setTimeout(()=>{this.flush()},this.delay))}flush(){this._queue.splice(0).forEach(t=>{t.fn.apply(t.context||t.fn,t.args||[])})}}class qi{_subscribers={"*":[],add:[],remove:[],update:[]};_trigger(t,e,i){if(t==="*")throw new Error("Cannot trigger event *");[...this._subscribers[t],...this._subscribers["*"]].forEach(o=>{o(t,e,i??null)})}on(t,e){typeof e=="function"&&this._subscribers[t].push(e)}off(t,e){this._subscribers[t]=this._subscribers[t].filter(i=>i!==e)}subscribe=qi.prototype.on;unsubscribe=qi.prototype.off}class le{_pairs;constructor(t){this._pairs=t}*[Symbol.iterator](){for(const[t,e]of this._pairs)yield[t,e]}*entries(){for(const[t,e]of this._pairs)yield[t,e]}*keys(){for(const[t]of this._pairs)yield t}*values(){for(const[,t]of this._pairs)yield t}toIdArray(){return[...this._pairs].map(t=>t[0])}toItemArray(){return[...this._pairs].map(t=>t[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const t=Object.create(null);for(const[e,i]of this._pairs)t[e]=i;return t}toMap(){return new Map(this._pairs)}toIdSet(){return new Set(this.toIdArray())}toItemSet(){return new Set(this.toItemArray())}cache(){return new le([...this._pairs])}distinct(t){const e=new Set;for(const[i,o]of this._pairs)e.add(t(o,i));return e}filter(t){const e=this._pairs;return new le({*[Symbol.iterator](){for(const[i,o]of e)t(o,i)&&(yield[i,o])}})}forEach(t){for(const[e,i]of this._pairs)t(i,e)}map(t){const e=this._pairs;return new le({*[Symbol.iterator](){for(const[i,o]of e)yield[i,t(o,i)]}})}max(t){const e=this._pairs[Symbol.iterator]();let i=e.next();if(i.done)return null;let o=i.value[1],s=t(i.value[1],i.value[0]);for(;!(i=e.next()).done;){const[r,a]=i.value,h=t(a,r);h>s&&(s=h,o=a)}return o}min(t){const e=this._pairs[Symbol.iterator]();let i=e.next();if(i.done)return null;let o=i.value[1],s=t(i.value[1],i.value[0]);for(;!(i=e.next()).done;){const[r,a]=i.value,h=t(a,r);h<s&&(s=h,o=a)}return o}reduce(t,e){for(const[i,o]of this._pairs)e=t(e,o,i);return e}sort(t){return new le({[Symbol.iterator]:()=>[...this._pairs].sort(([e,i],[o,s])=>t(i,s,e,o))[Symbol.iterator]()})}}class ce extends qi{flush;length;get idProp(){return this._idProp}_options;_data;_idProp;_queue=null;constructor(t,e){super(),t&&!Array.isArray(t)&&(e=t,t=[]),this._options=e||{},this._data=new Map,this.length=0,this._idProp=this._options.fieldId||"id",t&&t.length&&this.add(t),this.setOptions(e)}setOptions(t){t&&t.queue!==void 0&&(t.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=ci.extend(this,{replace:["add","update","remove"]})),t.queue&&typeof t.queue=="object"&&this._queue.setOptions(t.queue)))}add(t,e){const i=[];let o;if(Array.isArray(t)){if(t.map(s=>s[this._idProp]).some(s=>this._data.has(s)))throw new Error("A duplicate id was found in the parameter array.");for(let s=0,r=t.length;s<r;s++)o=this._addItem(t[s]),i.push(o)}else{if(!t||typeof t!="object")throw new Error("Unknown dataType");o=this._addItem(t),i.push(o)}return i.length&&this._trigger("add",{items:i},e),i}update(t,e){const i=[],o=[],s=[],r=[],a=this._idProp,h=d=>{const l=d[a];if(l!=null&&this._data.has(l)){const c=d,u=Object.assign({},this._data.get(l)),p=this._updateItem(c);o.push(p),r.push(c),s.push(u)}else{const c=this._addItem(d);i.push(c)}};if(Array.isArray(t))for(let d=0,l=t.length;d<l;d++)t[d]&&typeof t[d]=="object"?h(t[d]):console.warn("Ignoring input item, which is not an object at index "+d);else{if(!t||typeof t!="object")throw new Error("Unknown dataType");h(t)}if(i.length&&this._trigger("add",{items:i},e),o.length){const d={items:o,oldData:s,data:r};this._trigger("update",d,e)}return i.concat(o)}updateOnly(t,e){Array.isArray(t)||(t=[t]);const i=t.map(o=>{const s=this._data.get(o[this._idProp]);if(s==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:s,update:o}}).map(({oldData:o,update:s})=>{const r=o[this._idProp],a=Rd(o,s);return this._data.set(r,a),{id:r,oldData:o,updatedData:a}});if(i.length){const o={items:i.map(s=>s.id),oldData:i.map(s=>s.oldData),data:i.map(s=>s.updatedData)};return this._trigger("update",o,e),o.items}return[]}get(t,e){let i,o,s;Ls(t)?(i=t,s=e):Array.isArray(t)?(o=t,s=e):s=t;const r=s&&s.returnType==="Object"?"Object":"Array",a=s&&s.filter,h=[];let d,l,c;if(i!=null)d=this._data.get(i),d&&a&&!a(d)&&(d=void 0);else if(o!=null)for(let u=0,p=o.length;u<p;u++)d=this._data.get(o[u]),d==null||a&&!a(d)||h.push(d);else{l=[...this._data.keys()];for(let u=0,p=l.length;u<p;u++)c=l[u],d=this._data.get(c),d==null||a&&!a(d)||h.push(d)}if(s&&s.order&&i==null&&this._sort(h,s.order),s&&s.fields){const u=s.fields;if(i!=null&&d!=null)d=this._filterFields(d,u);else for(let p=0,g=h.length;p<g;p++)h[p]=this._filterFields(h[p],u)}if(r=="Object"){const u={};for(let p=0,g=h.length;p<g;p++){const m=h[p];u[m[this._idProp]]=m}return u}return i!=null?d??null:h}getIds(t){const e=this._data,i=t&&t.filter,o=t&&t.order,s=[...e.keys()],r=[];if(i)if(o){const a=[];for(let h=0,d=s.length;h<d;h++){const l=s[h],c=this._data.get(l);c!=null&&i(c)&&a.push(c)}this._sort(a,o);for(let h=0,d=a.length;h<d;h++)r.push(a[h][this._idProp])}else for(let a=0,h=s.length;a<h;a++){const d=s[a],l=this._data.get(d);l!=null&&i(l)&&r.push(l[this._idProp])}else if(o){const a=[];for(let h=0,d=s.length;h<d;h++){const l=s[h];a.push(e.get(l))}this._sort(a,o);for(let h=0,d=a.length;h<d;h++)r.push(a[h][this._idProp])}else for(let a=0,h=s.length;a<h;a++){const d=s[a],l=e.get(d);l!=null&&r.push(l[this._idProp])}return r}getDataSet(){return this}forEach(t,e){const i=e&&e.filter,o=[...this._data.keys()];if(e&&e.order){const s=this.get(e);for(let r=0,a=s.length;r<a;r++){const h=s[r];t(h,h[this._idProp])}}else for(let s=0,r=o.length;s<r;s++){const a=o[s],h=this._data.get(a);h==null||i&&!i(h)||t(h,a)}}map(t,e){const i=e&&e.filter,o=[],s=[...this._data.keys()];for(let r=0,a=s.length;r<a;r++){const h=s[r],d=this._data.get(h);d==null||i&&!i(d)||o.push(t(d,h))}return e&&e.order&&this._sort(o,e.order),o}_filterFields(t,e){return t&&(Array.isArray(e)?e:Object.keys(e)).reduce((i,o)=>(i[o]=t[o],i),{})}_sort(t,e){if(typeof e=="string"){const i=e;t.sort((o,s)=>{const r=o[i],a=s[i];return r>a?1:r<a?-1:0})}else{if(typeof e!="function")throw new TypeError("Order must be a function or a string");t.sort(e)}}remove(t,e){const i=[],o=[],s=Array.isArray(t)?t:[t];for(let r=0,a=s.length;r<a;r++){const h=this._remove(s[r]);if(h){const d=h[this._idProp];d!=null&&(i.push(d),o.push(h))}}return i.length&&this._trigger("remove",{items:i,oldData:o},e),i}_remove(t){let e;if(Ls(t)?e=t:t&&typeof t=="object"&&(e=t[this._idProp]),e!=null&&this._data.has(e)){const i=this._data.get(e)||null;return this._data.delete(e),--this.length,i}return null}clear(t){const e=[...this._data.keys()],i=[];for(let o=0,s=e.length;o<s;o++)i.push(this._data.get(e[o]));return this._data.clear(),this.length=0,this._trigger("remove",{items:e,oldData:i},t),e}max(t){let e=null,i=null;for(const o of this._data.values()){const s=o[t];typeof s=="number"&&(i==null||s>i)&&(e=o,i=s)}return e||null}min(t){let e=null,i=null;for(const o of this._data.values()){const s=o[t];typeof s=="number"&&(i==null||s<i)&&(e=o,i=s)}return e||null}distinct(t){const e=this._data,i=[...e.keys()],o=[];let s=0;for(let r=0,a=i.length;r<a;r++){const h=i[r],d=e.get(h)[t];let l=!1;for(let c=0;c<s;c++)if(o[c]==d){l=!0;break}l||d===void 0||(o[s]=d,s++)}return o}_addItem(t){const e=function(o,s){return o[s]==null&&(o[s]=li()),o}(t,this._idProp),i=e[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,e),++this.length,i}_updateItem(t){const e=t[this._idProp];if(e==null)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");const i=this._data.get(e);if(!i)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,{...i,...t}),e}stream(t){if(t){const e=this._data;return new le({*[Symbol.iterator](){for(const i of t){const o=e.get(i);o!=null&&(yield[i,o])}}})}return new le({[Symbol.iterator]:this._data.entries.bind(this._data)})}}class Ui extends qi{length=0;get idProp(){return this.getDataSet().idProp}_listener;_data;_ids=new Set;_options;constructor(t,e){super(),this._options=e||{},this._listener=this._onEvent.bind(this),this.setData(t)}setData(t){if(this._data){this._data.off&&this._data.off("*",this._listener);const e=this._data.getIds({filter:this._options.filter}),i=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:i})}if(t!=null){this._data=t;const e=this._data.getIds({filter:this._options.filter});for(let i=0,o=e.length;i<o;i++){const s=e[i];this._ids.add(s)}this.length=e.length,this._trigger("add",{items:e})}else this._data=new ce;this._data.on&&this._data.on("*",this._listener)}refresh(){const t=this._data.getIds({filter:this._options.filter}),e=[...this._ids],i={},o=[],s=[],r=[];for(let a=0,h=t.length;a<h;a++){const d=t[a];i[d]=!0,this._ids.has(d)||(o.push(d),this._ids.add(d))}for(let a=0,h=e.length;a<h;a++){const d=e[a],l=this._data.get(d);l==null?console.error("If you see this, report it please."):i[d]||(s.push(d),r.push(l),this._ids.delete(d))}this.length+=o.length-s.length,o.length&&this._trigger("add",{items:o}),s.length&&this._trigger("remove",{items:s,oldData:r})}get(t,e){if(this._data==null)return null;let i,o=null;Ls(t)||Array.isArray(t)?(o=t,i=e):i=t;const s=Object.assign({},this._options,i),r=this._options.filter,a=i&&i.filter;return r&&a&&(s.filter=h=>r(h)&&a(h)),o==null?this._data.get(s):this._data.get(o,s)}getIds(t){if(this._data.length){const e=this._options.filter,i=t!=null?t.filter:null;let o;return o=i?e?s=>e(s)&&i(s):i:e,this._data.getIds({filter:o,order:t&&t.order})}return[]}forEach(t,e){if(this._data){const i=this._options.filter,o=e&&e.filter;let s;s=o?i?function(r){return i(r)&&o(r)}:o:i,this._data.forEach(t,{filter:s,order:e&&e.order})}}map(t,e){if(this._data){const i=this._options.filter,o=e&&e.filter;let s;return s=o?i?r=>i(r)&&o(r):o:i,this._data.map(t,{filter:s,order:e&&e.order})}return[]}getDataSet(){return this._data.getDataSet()}stream(t){return this._data.stream(t||{[Symbol.iterator]:this._ids.keys.bind(this._ids)})}dispose(){this._data?.off&&this._data.off("*",this._listener);const t="This data view has already been disposed of.",e={get:()=>{throw new Error(t)},set:()=>{throw new Error(t)},configurable:!1};for(const i of Reflect.ownKeys(Ui.prototype))Object.defineProperty(this,i,e)}_onEvent(t,e,i){if(!e||!e.items||!this._data)return;const o=e.items,s=[],r=[],a=[],h=[],d=[],l=[];switch(t){case"add":for(let c=0,u=o.length;c<u;c++){const p=o[c];this.get(p)&&(this._ids.add(p),s.push(p))}break;case"update":for(let c=0,u=o.length;c<u;c++){const p=o[c];this.get(p)?this._ids.has(p)?(r.push(p),d.push(e.data[c]),h.push(e.oldData[c])):(this._ids.add(p),s.push(p)):this._ids.has(p)&&(this._ids.delete(p),a.push(p),l.push(e.oldData[c]))}break;case"remove":for(let c=0,u=o.length;c<u;c++){const p=o[c];this._ids.has(p)&&(this._ids.delete(p),a.push(p),l.push(e.oldData[c]))}}this.length+=s.length-a.length,s.length&&this._trigger("add",{items:s},i),r.length&&this._trigger("update",{items:r,oldData:h,data:d},i),a.length&&this._trigger("remove",{items:a,oldData:l},i)}}function Ff(n,t){return typeof t=="object"&&t!==null&&n===t.idProp&&typeof t.add=="function"&&typeof t.clear=="function"&&typeof t.distinct=="function"&&typeof t.forEach=="function"&&typeof t.get=="function"&&typeof t.getDataSet=="function"&&typeof t.getIds=="function"&&typeof t.length=="number"&&typeof t.map=="function"&&typeof t.max=="function"&&typeof t.min=="function"&&typeof t.off=="function"&&typeof t.on=="function"&&typeof t.remove=="function"&&typeof t.setOptions=="function"&&typeof t.stream=="function"&&typeof t.update=="function"&&typeof t.updateOnly=="function"}function Hs(n,t){return typeof t=="object"&&t!==null&&n===t.idProp&&typeof t.forEach=="function"&&typeof t.get=="function"&&typeof t.getDataSet=="function"&&typeof t.getIds=="function"&&typeof t.length=="number"&&typeof t.map=="function"&&typeof t.off=="function"&&typeof t.on=="function"&&typeof t.stream=="function"&&Ff(n,t.getDataSet())}var Af,jf,Rf,Lf,Hf,Wf,Vf,qf,Uf,Yf,Xf=Object.freeze({__proto__:null,DELETE:bo,DataSet:ce,DataStream:le,DataView:Ui,Queue:ci,createNewDataPipeFrom:function(n){return new J_(n)},isDataSetLike:Ff,isDataViewLike:Hs}),Ws={exports:{}},Gf={};function tx(){if(Af)return Gf;Af=1;var n=A(),t=rt(),e=Nt().f;return n({target:"Object",stat:!0,forced:Object.defineProperty!==e,sham:!t},{defineProperty:e}),Gf}function ex(){if(jf)return Ws.exports;jf=1,tx();var n=G().Object,t=Ws.exports=function(e,i,o){return n.defineProperty(e,i,o)};return n.defineProperty.sham&&(t.sham=!0),Ws.exports}function Kf(){return Lf?Rf:(Lf=1,Rf=ex())}function ix(){return Wf?Hf:(Wf=1,Hf=Kf())}function ox(){return qf?Vf:(qf=1,Vf=ix())}function nx(){return Yf?Uf:(Yf=1,Uf=ox())}var Zf,Qf,$f,Jf,tg,eg,sx=L(nx()),rx={},ax={},Vs={};function Do(){if(Zf)return Vs;Zf=1;var n=dt();return Vs.f=n,Vs}function nt(){if($f)return Qf;$f=1;var n=G(),t=vt(),e=Do(),i=Nt().f;return Qf=function(o){var s=n.Symbol||(n.Symbol={});t(s,o)||i(s,o,{value:e.f(o)})}}function ig(){if(tg)return Jf;tg=1;var n=kt(),t=Tt(),e=dt(),i=Vi();return Jf=function(){var o=t("Symbol"),s=o&&o.prototype,r=s&&s.valueOf,a=e("toPrimitive");s&&!s[a]&&i(s,a,function(h){return n(r,this)},{arity:1})}}var og,ng,sg,hx={};function rg(){return ng?og:(ng=1,og=qe()&&!!Symbol.for&&!!Symbol.keyFor)}var ag,dx={},qs,hg,dg,lg={};function lx(){if(hg)return qs;hg=1;var n=Y(),t=Se(),e=pt(),i=qt(),o=zt(),s=n([].push);return qs=function(r){if(e(r))return r;if(t(r)){for(var a=r.length,h=[],d=0;d<a;d++){var l=r[d];typeof l=="string"?s(h,l):typeof l!="number"&&i(l)!=="Number"&&i(l)!=="String"||s(h,o(l))}var c=h.length,u=!0;return function(p,g){if(u)return u=!1,g;if(t(this))return g;for(var m=0;m<c;m++)if(h[m]===p)return g}}},qs}function cg(){if(dg)return lg;dg=1;var n=A(),t=Tt(),e=io(),i=kt(),o=Y(),s=U(),r=pt(),a=wi(),h=Ze(),d=lx(),l=qe(),c=String,u=t("JSON","stringify"),p=o(/./.exec),g=o("".charAt),m=o("".charCodeAt),f=o("".replace),v=o(1.1.toString),y=/[\uD800-\uDFFF]/g,_=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,w=!l||s(function(){var k=t("Symbol")("stringify detection");return u([k])!=="[null]"||u({a:k})!=="{}"||u(Object(k))!=="{}"}),E=s(function(){return u("\uDF06\uD834")!=='"\\udf06\\ud834"'||u("\uDEAD")!=='"\\udead"'}),D=function(k,B){var S=h(arguments),C=d(B);if(r(C)||k!==void 0&&!a(k))return S[1]=function(T,N){if(r(C)&&(N=i(C,this,c(T),N)),!a(N))return N},e(u,null,S)},O=function(k,B,S){var C=g(S,B-1),T=g(S,B+1);return p(_,k)&&!p(b,T)||p(b,k)&&!p(_,C)?"\\u"+v(m(k,0),16):k};return u&&n({target:"JSON",stat:!0,arity:3,forced:w||E},{stringify:function(k,B,S){var C=h(arguments),T=e(w?D:u,null,C);return E&&typeof T=="string"?f(T,y,O):T}}),lg}var ug,pg,cx={};function fg(){return pg||(pg=1,function(){if(eg)return ax;eg=1;var n=A(),t=et(),e=kt(),i=Y(),o=Ye(),s=rt(),r=qe(),a=U(),h=vt(),d=ht(),l=Ut(),c=Rt(),u=rn(),p=zt(),g=yi(),m=Ai(),f=xi(),v=ko(),y=Ss(),_=lo(),b=ro(),w=Nt(),E=Ln(),D=oo(),O=Vi(),k=Is(),B=Xe(),S=Oo(),C=_i(),T=so(),N=dt(),R=Do(),Q=nt(),ct=ig(),It=De(),Ft=Te(),xt=ae().forEach,ut=S("hidden"),At="Symbol",ye="prototype",be=Ft.set,_w=Ft.getterFor(At),jt=Object[ye],Re=t.Symbol,Ao=Re&&Re[ye],HC=t.RangeError,WC=t.TypeError,Mr=t.QObject,xw=b.f,Le=w.f,Ew=y.f,VC=D.f,Ow=i([].push),oe=B("symbols"),to=B("op-symbols"),qC=B("wks"),Ir=!Mr||!Mr[ye]||!Mr[ye].findChild,Cw=function(H,q,X){var K=xw(jt,q);K&&delete jt[q],Le(H,q,X),K&&H!==jt&&Le(jt,q,K)},Pr=s&&a(function(){return m(Le({},"a",{get:function(){return Le(this,"a",{value:7}).a}})).a!==7})?Cw:Le,Nr=function(H,q){var X=oe[H]=m(Ao);return be(X,{type:At,tag:H,description:q}),s||(X.description=q),X},jo=function(H,q,X){H===jt&&jo(to,q,X),l(H);var K=u(q);return l(X),h(oe,K)?(X.enumerable?(h(H,ut)&&H[ut][K]&&(H[ut][K]=!1),X=m(X,{enumerable:g(0,!1)})):(h(H,ut)||Le(H,ut,g(1,m(null))),H[ut][K]=!0),Pr(H,K,X)):Le(H,K,X)},Br=function(H,q){l(H);var X=c(q),K=f(X).concat(Tw(X));return xt(K,function(mt){s&&!e(zr,X,mt)||jo(H,mt,X[mt])}),H},zr=function(H){var q=u(H),X=e(VC,this,q);return!(this===jt&&h(oe,q)&&!h(to,q))&&(!(X||!h(this,q)||!h(oe,q)||h(this,ut)&&this[ut][q])||X)},kw=function(H,q){var X=c(H),K=u(q);if(X!==jt||!h(oe,K)||h(to,K)){var mt=xw(X,K);return!mt||!h(oe,K)||h(X,ut)&&X[ut][K]||(mt.enumerable=!0),mt}},Sw=function(H){var q=Ew(c(H)),X=[];return xt(q,function(K){h(oe,K)||h(C,K)||Ow(X,K)}),X},Tw=function(H){var q=H===jt,X=Ew(q?to:c(H)),K=[];return xt(X,function(mt){!h(oe,mt)||q&&!h(jt,mt)||Ow(K,oe[mt])}),K};r||(Re=function(){if(d(Ao,this))throw new WC("Symbol is not a constructor");var H=arguments.length&&arguments[0]!==void 0?p(arguments[0]):void 0,q=T(H),X=function(K){var mt=this===void 0?t:this;mt===jt&&e(X,to,K),h(mt,ut)&&h(mt[ut],q)&&(mt[ut][q]=!1);var Dw=g(1,K);try{Pr(mt,q,Dw)}catch(Mw){if(!(Mw instanceof HC))throw Mw;Cw(mt,q,Dw)}};return s&&Ir&&Pr(jt,q,{configurable:!0,set:X}),Nr(q,H)},O(Ao=Re[ye],"toString",function(){return _w(this).tag}),O(Re,"withoutSetter",function(H){return Nr(T(H),H)}),D.f=zr,w.f=jo,E.f=Br,b.f=kw,v.f=y.f=Sw,_.f=Tw,R.f=function(H){return Nr(N(H),H)},s&&(k(Ao,"description",{configurable:!0,get:function(){return _w(this).description}}),o||O(jt,"propertyIsEnumerable",zr,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!r,sham:!r},{Symbol:Re}),xt(f(qC),function(H){Q(H)}),n({target:At,stat:!0,forced:!r},{useSetter:function(){Ir=!0},useSimple:function(){Ir=!1}}),n({target:"Object",stat:!0,forced:!r,sham:!s},{create:function(H,q){return q===void 0?m(H):Br(m(H),q)},defineProperty:jo,defineProperties:Br,getOwnPropertyDescriptor:kw}),n({target:"Object",stat:!0,forced:!r},{getOwnPropertyNames:Sw}),ct(),It(Re,At),C[ut]=!0}(),function(){if(sg)return hx;sg=1;var n=A(),t=Tt(),e=vt(),i=zt(),o=Xe(),s=rg(),r=o("string-to-symbol-registry"),a=o("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!s},{for:function(h){var d=i(h);if(e(r,d))return r[d];var l=t("Symbol")(d);return r[d]=l,a[l]=d,l}})}(),function(){if(ag)return dx;ag=1;var n=A(),t=vt(),e=wi(),i=Ue(),o=Xe(),s=rg(),r=o("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!s},{keyFor:function(a){if(!e(a))throw new TypeError(i(a)+" is not a symbol");if(t(r,a))return r[a]}})}(),cg(),function(){if(ug)return cx;ug=1;var n=A(),t=qe(),e=U(),i=lo(),o=Pt();n({target:"Object",stat:!0,forced:!t||e(function(){i.f(1)})},{getOwnPropertySymbols:function(s){var r=i.f;return r?r(o(s)):[]}})}()),rx}var gg,ux={};function mg(){return gg||(gg=1,nt()("asyncDispose")),ux}var vg,yg,px={};function bg(){return yg||(yg=1,nt()("dispose")),px}var wg,_g,xg,fx={};function Eg(){return xg||(xg=1,nt()("iterator")),fx}var Og,Cg,kg,Sg,Tg,Dg,Mg,Ig={};function Pg(){if(Mg)return Ig;Mg=1;var n=nt(),t=ig();return n("toPrimitive"),t(),Ig}var Ng,gx={},Bg,zg,Fg,Ag,jg,Rg,mx={};function vx(){return Ag?Fg:(Ag=1,mu(),fg(),mg(),vg||(vg=1,nt()("asyncIterator")),bg(),wg||(wg=1,nt()("hasInstance")),_g||(_g=1,nt()("isConcatSpreadable")),Eg(),Og||(Og=1,nt()("match")),Cg||(Cg=1,nt()("matchAll")),kg||(kg=1,nt()("replace")),Sg||(Sg=1,nt()("search")),Tg||(Tg=1,nt()("species")),Dg||(Dg=1,nt()("split")),Pg(),function(){if(Ng)return gx;Ng=1;var n=Tt(),t=nt(),e=De();t("toStringTag"),e(n("Symbol"),"Symbol")}(),Bg||(Bg=1,nt()("unscopables")),function(){if(zg)return mx;zg=1;var n=et();De()(n.JSON,"JSON",!0)}(),Fg=G().Symbol)}function yx(){if(Rg)return jg;Rg=1;var n=vx();return hi(),jg=n}var Lg,bx={},Hg,Wg,Vg,qg,Ug;function wx(){if(Ug)return qg;Ug=1;var n=yx();return function(){if(Lg)return bx;Lg=1;var t=dt(),e=Nt().f,i=t("metadata"),o=Function.prototype;o[i]===void 0&&e(o,i,{value:null})}(),Hg||(Hg=1,mg()),Wg||(Wg=1,bg()),Vg||(Vg=1,nt()("metadata")),qg=n}var Yg,Xg,Gg;function Kg(){if(Xg)return Yg;Xg=1;var n=Tt(),t=Y(),e=n("Symbol"),i=e.keyFor,o=t(e.prototype.valueOf);return Yg=e.isRegisteredSymbol||function(s){try{return i(o(s))!==void 0}catch{return!1}}}var Us,Zg,Qg;function $g(){if(Zg)return Us;Zg=1;for(var n=Xe(),t=Tt(),e=Y(),i=wi(),o=dt(),s=t("Symbol"),r=s.isWellKnownSymbol,a=t("Object","getOwnPropertyNames"),h=e(s.prototype.valueOf),d=n("wks"),l=0,c=a(s),u=c.length;l<u;l++)try{var p=c[l];i(s[p])&&o(p)}catch{}return Us=function(g){if(r&&r(g))return!0;try{for(var m=h(g),f=0,v=a(d),y=v.length;f<y;f++)if(d[v[f]]==m)return!0}catch{}return!1},Us}var Jg,tm,em,im,om,nm,sm,rm,am,hm,dm,lm;function _x(){if(hm)return am;hm=1;var n=wx();return Gg||(Gg=1,A()({target:"Symbol",stat:!0},{isRegisteredSymbol:Kg()})),Qg||(Qg=1,A()({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:$g()})),Jg||(Jg=1,nt()("customMatcher")),tm||(tm=1,nt()("observable")),em||(em=1,A()({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Kg()})),im||(im=1,A()({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:$g()})),om||(om=1,nt()("matcher")),nm||(nm=1,nt()("metadataKey")),sm||(sm=1,nt()("patternMatch")),rm||(rm=1,nt()("replaceAll")),am=n}function xx(){return lm?dm:(lm=1,dm=_x())}var cm,um,pm,fm,gm,mm,vm,ym,bm,wm,Mo=L(xx());function Ex(){return um?cm:(um=1,ai(),Ns(),Eg(),cm=Do().f("iterator"))}function Ox(){if(fm)return pm;fm=1;var n=Ex();return hi(),pm=n}function Cx(){return mm?gm:(mm=1,gm=Ox())}function kx(){return ym?vm:(ym=1,vm=Cx())}function Sx(){return wm?bm:(wm=1,bm=kx())}var _m,xm,Em,Om,Cm,km,Sm,Tm,Dm,Mm,Tx=L(Sx());function Yi(n){return Yi=typeof Mo=="function"&&typeof Tx=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Mo=="function"&&t.constructor===Mo&&t!==Mo.prototype?"symbol":typeof t},Yi(n)}function Dx(){return xm?_m:(xm=1,Pg(),_m=Do().f("toPrimitive"))}function Mx(){return Om?Em:(Om=1,Em=Dx())}function Ix(){return km?Cm:(km=1,Cm=Mx())}function Px(){return Tm?Sm:(Tm=1,Sm=Ix())}function Nx(){return Mm?Dm:(Mm=1,Dm=Px())}var Bx=L(Nx());function zx(n){var t=function(e,i){if(Yi(e)!="object"||!e)return e;var o=e[Bx];if(o!==void 0){var s=o.call(e,i);if(Yi(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}(n,"string");return Yi(t)=="symbol"?t:t+""}function ee(n,t,e){return(t=zx(t))in n?sx(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Im,Pm,Nm,Bm,Ys,zm,Fm,Am,jm,Rm,Lm,Hm,Wm,Fx={};function Xs(){return Pm?Im:(Pm=1,Im=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`)}function Vm(){if(Bm)return Nm;Bm=1;var n=Y(),t=Gt(),e=zt(),i=Xs(),o=n("".replace),s=RegExp("^["+i+"]+"),r=RegExp("(^|[^"+i+"])["+i+"]+$"),a=function(h){return function(d){var l=e(t(d));return 1&h&&(l=o(l,s,"")),2&h&&(l=o(l,r,"$1")),l}};return Nm={start:a(1),end:a(2),trim:a(3)}}function Ax(){if(zm)return Ys;zm=1;var n=et(),t=U(),e=Y(),i=zt(),o=Vm().trim,s=Xs(),r=n.parseInt,a=n.Symbol,h=a&&a.iterator,d=/^[+-]?0x/i,l=e(d.exec),c=r(s+"08")!==8||r(s+"0x16")!==22||h&&!t(function(){r(Object(h))});return Ys=c?function(u,p){var g=o(i(u));return r(g,p>>>0||(l(d,g)?16:10))}:r,Ys}function jx(){return jm?Am:(jm=1,function(){if(Fm)return Fx;Fm=1;var n=A(),t=Ax();n({global:!0,forced:parseInt!==t},{parseInt:t})}(),Am=G().parseInt)}function Rx(){return Lm?Rm:(Lm=1,Rm=jx())}var Gs,qm,Um,Ym,Xm,Gm,Km,Zm,Qm,$m=L(Wm?Hm:(Wm=1,Hm=Rx())),Lx={};function Hx(){if(qm)return Gs;qm=1;var n=et(),t=U(),e=Y(),i=zt(),o=Vm().trim,s=Xs(),r=e("".charAt),a=n.parseFloat,h=n.Symbol,d=h&&h.iterator,l=1/a(s+"-0")!=-1/0||d&&!t(function(){a(Object(d))});return Gs=l?function(c){var u=o(i(c)),p=a(u);return p===0&&r(u,0)==="-"?-0:p}:a,Gs}function Wx(){return Xm?Ym:(Xm=1,function(){if(Um)return Lx;Um=1;var n=A(),t=Hx();n({global:!0,forced:parseFloat!==t},{parseFloat:t})}(),Ym=G().parseFloat)}function Vx(){return Km?Gm:(Km=1,Gm=Wx())}var Jm,tv,ev,Ks,iv,ov,nv,sv,rv,av=L(Qm?Zm:(Qm=1,Zm=Vx())),qx={};function Ux(){return ev?tv:(ev=1,function(){if(Jm)return qx;Jm=1;var n=A(),t=ae().filter;n({target:"Array",proto:!0,forced:!Li()("filter")},{filter:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})}(),tv=bt()("Array","filter"))}function Yx(){if(iv)return Ks;iv=1;var n=ht(),t=Ux(),e=Array.prototype;return Ks=function(i){var o=i.filter;return i===e||n(e,i)&&o===e.filter?t:o},Ks}function Xx(){return nv?ov:(nv=1,ov=Yx())}var hv,Zs,dv,lv,cv,uv,pv,ie=L(rv?sv:(rv=1,sv=Xx())),fv={};function Gx(){if(hv)return fv;hv=1;var n=A(),t=U(),e=Ss().f;return n({target:"Object",stat:!0,forced:t(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:e}),fv}function Kx(){if(dv)return Zs;dv=1,Gx();var n=G().Object;return Zs=function(t){return n.getOwnPropertyNames(t)},Zs}function Zx(){return cv?lv:(cv=1,lv=Kx())}var gv,mv,vv,yv,bv,wv,Qx=L(pv?uv:(pv=1,uv=Zx()));function $x(){return mv?gv:(mv=1,fg(),gv=G().Object.getOwnPropertySymbols)}function Jx(){return yv?vv:(yv=1,vv=$x())}var _v,xv,Ev,Ov,Cv,kv,ue=L(wv?bv:(wv=1,bv=Jx())),Qs={exports:{}},tE={};function eE(){if(xv)return Qs.exports;xv=1,function(){if(_v)return tE;_v=1;var e=A(),i=U(),o=Rt(),s=ro().f,r=rt();e({target:"Object",stat:!0,forced:!r||i(function(){s(1)}),sham:!r},{getOwnPropertyDescriptor:function(a,h){return s(o(a),h)}})}();var n=G().Object,t=Qs.exports=function(e,i){return n.getOwnPropertyDescriptor(e,i)};return n.getOwnPropertyDescriptor.sham&&(t.sham=!0),Qs.exports}function iE(){return Ov?Ev:(Ov=1,Ev=eE())}var $s,Sv,Tv,Dv,Mv,Iv,Pv,Nv,Bv,pe=L(kv?Cv:(kv=1,Cv=iE())),oE={};function nE(){if(Sv)return $s;Sv=1;var n=Tt(),t=Y(),e=ko(),i=lo(),o=Ut(),s=t([].concat);return $s=n("Reflect","ownKeys")||function(r){var a=e.f(o(r)),h=i.f;return h?s(a,h(r)):a},$s}function sE(){return Mv?Dv:(Mv=1,function(){if(Tv)return oE;Tv=1;var n=A(),t=rt(),e=nE(),i=Rt(),o=ro(),s=Co();n({target:"Object",stat:!0,sham:!t},{getOwnPropertyDescriptors:function(r){for(var a,h,d=i(r),l=o.f,c=e(d),u={},p=0;c.length>p;)(h=l(d,a=c[p++]))!==void 0&&s(u,a,h);return u}})}(),Dv=G().Object.getOwnPropertyDescriptors)}function rE(){return Pv?Iv:(Pv=1,Iv=sE())}var zv,Fv,Av,jv,Rv,Lv,fe=L(Bv?Nv:(Bv=1,Nv=rE())),Js={exports:{}},Hv={};function aE(){if(zv)return Hv;zv=1;var n=A(),t=rt(),e=Ln().f;return n({target:"Object",stat:!0,forced:Object.defineProperties!==e,sham:!t},{defineProperties:e}),Hv}function hE(){if(Fv)return Js.exports;Fv=1,aE();var n=G().Object,t=Js.exports=function(e,i){return n.defineProperties(e,i)};return n.defineProperties.sham&&(t.sham=!0),Js.exports}function dE(){return jv?Av:(jv=1,Av=hE())}var Wv,Vv,Io=L(Lv?Rv:(Lv=1,Rv=dE())),Po=L(Vv?Wv:(Vv=1,Wv=Kf()));function tr(n,t){const e=["node","edge","label"];let i=!0;const o=Jt(t,"chosen");if(typeof o=="boolean")i=o;else if(typeof o=="object"){if(ot(e).call(e,n)===-1)throw new Error("choosify: subOption '"+n+"' should be one of '"+e.join("', '")+"'");const s=Jt(t,["chosen",n]);typeof s!="boolean"&&typeof s!="function"||(i=s)}return i}function er(n,t,e){if(n.width<=0||n.height<=0)return!1;if(e!==void 0){const s={x:t.x-e.x,y:t.y-e.y};if(e.angle!==0){const r=-e.angle;t={x:Math.cos(r)*s.x-Math.sin(r)*s.y,y:Math.sin(r)*s.x+Math.cos(r)*s.y}}else t=s}const i=n.x+n.width,o=n.y+n.width;return n.left<t.x&&i>t.x&&n.top<t.y&&o>t.y}function No(n){return typeof n=="string"&&n!==""}function qv(n,t,e,i){let o=i.x,s=i.y;if(typeof i.distanceToBorder=="function"){const r=i.distanceToBorder(n,t),a=Math.sin(t)*r,h=Math.cos(t)*r;h===r?(o+=r,s=i.y):a===r?(o=i.x,s-=r):(o+=h,s-=a)}else i.shape.width>i.shape.height?(o=i.x+.5*i.shape.width,s=i.y-e):(o=i.x+e,s=i.y-.5*i.shape.height);return{x:o,y:s}}var Uv,Yv,Xv,ir,Gv,Kv,Zv,Qv,$v,lE={};function cE(){return Xv?Yv:(Xv=1,function(){if(Uv)return lE;Uv=1;var n=A(),t=Se(),e=_c(),i=ft(),o=ho(),s=Zt(),r=Rt(),a=Co(),h=dt(),d=Li(),l=Ze(),c=d("slice"),u=h("species"),p=Array,g=Math.max;n({target:"Array",proto:!0,forced:!c},{slice:function(m,f){var v,y,_,b=r(this),w=s(b),E=o(m,w),D=o(f===void 0?w:f,w);if(t(b)&&(v=b.constructor,(e(v)&&(v===p||t(v.prototype))||i(v)&&(v=v[u])===null)&&(v=void 0),v===p||v===void 0))return l(b,E,D);for(y=new(v===void 0?p:v)(g(D-E,0)),_=0;E<D;E++,_++)E in b&&a(y,_,b[E]);return y.length=_,y}})}(),Yv=bt()("Array","slice"))}function uE(){if(Gv)return ir;Gv=1;var n=ht(),t=cE(),e=Array.prototype;return ir=function(i){var o=i.slice;return i===e||n(e,i)&&o===e.slice?t:o},ir}function pE(){return Zv?Kv:(Zv=1,Kv=uE())}var Jv,ty,ey,iy,or,oy,ny,sy,ui=L($v?Qv:($v=1,Qv=pE()));function fE(){return ty?Jv:(ty=1,ai(),Jv=bt()("Array","values"))}function gE(){return iy?ey:(iy=1,ey=fE())}function mE(){if(oy)return or;oy=1,hi();var n=oi(),t=vt(),e=ht(),i=gE(),o=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return or=function(r){var a=r.values;return r===o||e(o,r)&&a===o.values||t(s,n(r))?i:a},or}var ry=L(sy?ny:(sy=1,ny=mE()));class vE{constructor(t){this.measureText=t,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[t]===void 0&&(this.lines[t]={width:0,height:0,blocks:[]});let o=e;e!==void 0&&e!==""||(o=" ");const s=this.measureText(o,i),r=yt({},ry(s));r.text=e,r.width=s.width,r.mod=i,e!==void 0&&e!==""||(r.width=0),this.lines[t].blocks.push(r),this.lines[t].width+=r.width}curWidth(){const t=this.lines[this.current];return t===void 0?0:t.width}append(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,e)}newLine(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,t,e),this.current++}determineLineHeights(){for(let t=0;t<this.lines.length;t++){const e=this.lines[t];let i=0;if(e.blocks!==void 0)for(let o=0;o<e.blocks.length;o++){const s=e.blocks[o];i<s.height&&(i=s.height)}e.height=i}}determineLabelSize(){let t=0,e=0;for(let i=0;i<this.lines.length;i++){const o=this.lines[i];o.width>t&&(t=o.width),e+=o.height}this.width=t,this.height=e}removeEmptyBlocks(){const t=[];for(let e=0;e<this.lines.length;e++){const i=this.lines[e];if(i.blocks.length===0||e===this.lines.length-1&&i.width===0)continue;const o={};let s;yt(o,i),o.blocks=[];const r=[];for(let a=0;a<i.blocks.length;a++){const h=i.blocks[a];h.width!==0?r.push(h):s===void 0&&(s=h)}r.length===0&&s!==void 0&&r.push(s),o.blocks=r,t.push(o)}return t}finalize(){this.determineLineHeights(),this.determineLabelSize();const t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}const yE={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class ay{constructor(t){this.text=t,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){return this.modStack.length===0?"normal":this.modStack[0]==="mono"?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(t){t===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),t!=" "&&(this.buffer+=t)}parseWS(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}setTag(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}unsetTag(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}parseStartTag(t,e){return!(this.mono||this[t]||!this.match(e))&&(this.setTag(t),!0)}match(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];const[i,o]=this.prepareRegExp(t),s=i.test(this.text.substr(this.position,o));return s&&e&&(this.position+=o-1),s}parseEndTag(t,e,i){let o=this.mod()===t;return o=t==="mono"?o&&this.mono:o&&!this.mono,!(!o||!this.match(e))&&(i!==void 0?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),!0)}replace(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}prepareRegExp(t){let e,i;if(t instanceof RegExp)i=t,e=1;else{const o=yE[t];i=o!==void 0?o:new RegExp(t),e=t.length}return[i,e]}}class bE{constructor(t,e,i,o){this.ctx=t,this.parent=e,this.selected=i,this.hover=o,this.lines=new vE((s,r)=>{if(s===void 0)return 0;const a=this.parent.getFormattingValues(t,i,o,r);let h=0;return s!==""&&(h=this.ctx.measureText(s).width),{width:h,values:a}})}process(t){if(!No(t))return this.lines.finalize();const e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,`
`)).replace(/\r/g,`
`);const i=String(t).split(`
`),o=i.length;if(e.multi)for(let s=0;s<o;s++){const r=this.splitBlocks(i[s],e.multi);if(r!==void 0)if(r.length!==0){if(e.maxWdt>0)for(let a=0;a<r.length;a++){const h=r[a].mod,d=r[a].text;this.splitStringIntoLines(d,h,!0)}else for(let a=0;a<r.length;a++){const h=r[a].mod,d=r[a].text;this.lines.append(d,h)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(let s=0;s<o;s++)this.splitStringIntoLines(i[s]);else for(let s=0;s<o;s++)this.lines.newLine(i[s]);return this.lines.finalize()}decodeMarkupSystem(t){let e="none";return t==="markdown"||t==="md"?e="markdown":t!==!0&&t!=="html"||(e="html"),e}splitHtmlBlocks(t){const e=new ay(t),i=o=>/&/.test(o)?(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0):!1;for(;e.position<e.text.length;){const o=e.text.charAt(e.position);e.parseWS(o)||/</.test(o)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||i(o)||e.add(o),e.position++}return e.emitBlock(),e.blocks}splitMarkdownBlocks(t){const e=new ay(t);let i=!0;const o=s=>!!/\\/.test(s)&&(e.position<this.text.length+1&&(e.position++,s=this.text.charAt(e.position),/ \t/.test(s)?e.spacing=!0:(e.add(s),i=!1)),!0);for(;e.position<e.text.length;){const s=e.text.charAt(e.position);e.parseWS(s)||o(s)||(i||e.spacing)&&(e.parseStartTag("bold","*")||e.parseStartTag("ital","_")||e.parseStartTag("mono","`"))||e.parseEndTag("bold","*","afterBold")||e.parseEndTag("ital","_","afterItal")||e.parseEndTag("mono","`","afterMono")||(e.add(s),i=!1),e.position++}return e.emitBlock(),e.blocks}splitBlocks(t,e){const i=this.decodeMarkupSystem(e);return i==="none"?[{text:t,mod:"normal"}]:i==="markdown"?this.splitMarkdownBlocks(t):i==="html"?this.splitHtmlBlocks(t):void 0}overMaxWidth(t){const e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}getLongestFit(t){let e="",i=0;for(;i<t.length;){const o=e+(e===""?"":" ")+t[i];if(this.overMaxWidth(o))break;e=o,i++}return i}getLongestFitWord(t){let e=0;for(;e<t.length&&!this.overMaxWidth(ui(t).call(t,0,e));)e++;return e}splitStringIntoLines(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);let o=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");for(;o.length>0;){let s=this.getLongestFit(o);if(s===0){const r=o[0],a=this.getLongestFitWord(r);this.lines.newLine(ui(r).call(r,0,a),e),o[0]=ui(r).call(r,a)}else{let r=s;o[s-1]===" "?s--:o[r]===" "&&r++;const a=ui(o).call(o,0,s).join("");s==o.length&&i?this.lines.append(a,e):this.lines.newLine(a,e),o=ui(o).call(o,r)}}}}const Xi=["bold","ital","boldital","mono"];class pi{constructor(t,e){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(e),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=i}setOptions(t){if(this.elementOptions=t,this.initFontOptions(t.font),No(t.label)?this.labelDirty=!0:t.label=void 0,t.font!==void 0&&t.font!==null){if(typeof t.font=="string")this.baseSize=this.fontOptions.size;else if(typeof t.font=="object"){const e=t.font.size;e!==void 0&&(this.baseSize=e)}}}initFontOptions(t){W(Xi,e=>{this.fontOptions[e]={}}),pi.parseFontString(this.fontOptions,t)?this.fontOptions.vadjust=0:W(t,(e,i)=>{e!=null&&typeof e!="object"&&(this.fontOptions[i]=e)})}static parseFontString(t,e){if(!e||typeof e!="string")return!1;const i=e.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}constrain(t){const e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=Jt(t,"widthConstraint");if(typeof i=="number")e.maxWdt=Number(i),e.minWdt=Number(i);else if(typeof i=="object"){const s=Jt(t,["widthConstraint","maximum"]);typeof s=="number"&&(e.maxWdt=Number(s));const r=Jt(t,["widthConstraint","minimum"]);typeof r=="number"&&(e.minWdt=Number(r))}const o=Jt(t,"heightConstraint");if(typeof o=="number")e.minHgt=Number(o);else if(typeof o=="object"){const s=Jt(t,["heightConstraint","minimum"]);typeof s=="number"&&(e.minHgt=Number(s));const r=Jt(t,["heightConstraint","valign"]);typeof r=="string"&&(r!=="top"&&r!=="bottom"||(e.valign=r))}return e}update(t,e){this.setOptions(t,!0),this.propagateFonts(e),Z(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=tr("label",e)}adjustSizes(t){const e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);const i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}addFontOptionsToPile(t,e){for(let i=0;i<e.length;++i)this.addFontToPile(t,e[i])}addFontToPile(t,e){if(e===void 0||e.font===void 0||e.font===null)return;const i=e.font;t.push(i)}getBasicOptions(t){const e={};for(let i=0;i<t.length;++i){let o=t[i];const s={};pi.parseFontString(s,o)&&(o=s),W(o,(r,a)=>{r!==void 0&&(Object.prototype.hasOwnProperty.call(e,a)||(ot(Xi).call(Xi,a)!==-1?e[a]={}:e[a]=r))})}return e}getFontOption(t,e,i){let o;for(let s=0;s<t.length;++s){const r=t[s];if(Object.prototype.hasOwnProperty.call(r,e)){if(o=r[e],o==null)continue;const a={};if(pi.parseFontString(a,o)&&(o=a),Object.prototype.hasOwnProperty.call(o,i))return o[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}getFontOptions(t,e){const i={},o=["color","size","face","mod","vadjust"];for(let s=0;s<o.length;++s){const r=o[s];i[r]=this.getFontOption(t,e,r)}return i}propagateFonts(t){const e=[];this.addFontOptionsToPile(e,t),this.fontOptions=this.getBasicOptions(e);for(let i=0;i<Xi.length;++i){const o=Xi[i],s=this.fontOptions[o];W(this.getFontOptions(e,o),(r,a)=>{s[a]=r}),s.size=Number(s.size),s.vadjust=Number(s.vadjust)}}draw(t,e,i,o,s){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,o,s,e,i,r),this._drawBackground(t),this._drawText(t,e,this.size.yLine,r,a))}_drawBackground(t){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;const e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}_drawText(t,e,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",s=arguments.length>4?arguments[4]:void 0;[e,i]=this._setAlignment(t,e,i,o),t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(i-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(i+=(this.size.height-this.size.labelHeight)/2));for(let r=0;r<this.lineCount;r++){const a=this.lines[r];if(a&&a.blocks){let h=0;this.isEdgeLabel||this.fontOptions.align==="center"?h+=(this.size.width-a.width)/2:this.fontOptions.align==="right"&&(h+=this.size.width-a.width);for(let d=0;d<a.blocks.length;d++){const l=a.blocks[d];t.font=l.font;const[c,u]=this._getColor(l.color,s,l.strokeColor);l.strokeWidth>0&&(t.lineWidth=l.strokeWidth,t.strokeStyle=u,t.lineJoin="round"),t.fillStyle=c,l.strokeWidth>0&&t.strokeText(l.text,e+h,i+l.vadjust),t.fillText(l.text,e+h,i+l.vadjust),h+=l.width}i+=a.height}}}_setAlignment(t,e,i,o){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){e=0,i=0;const s=2;this.fontOptions.align==="top"?(t.textBaseline="alphabetic",i-=2*s):this.fontOptions.align==="bottom"?(t.textBaseline="hanging",i+=2*s):t.textBaseline="middle"}else t.textBaseline=o;return[e,i]}_getColor(t,e,i){let o=t||"#000000",s=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){const r=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));o=Dt(o,r),s=Dt(s,r)}return[o,s]}getTextSize(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){const i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}calculateLabelSize(t,e,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=o-.5*this.size.width,this.size.top=s-.5*this.size.height,this.size.yLine=s+.5*(1-this.lineCount)*this.fontOptions.size,r==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(t,e,i,o){const s=function(h,d,l){return d==="normal"?l==="mod"?"":h[l]:h[d][l]!==void 0?h[d][l]:h[l]},r={color:s(this.fontOptions,o,"color"),size:s(this.fontOptions,o,"size"),face:s(this.fontOptions,o,"face"),mod:s(this.fontOptions,o,"mod"),vadjust:s(this.fontOptions,o,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&(o==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?r.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(r,this.elementOptions.id,e,i));let a="";return r.mod!==void 0&&r.mod!==""&&(a+=r.mod+" "),a+=r.size+"px "+r.face,t.font=a.replace(/"/g,""),r.font=t.font,r.height=r.size,r}differentState(t,e){return t!==this.selectedState||e!==this.hoverState}_processLabelText(t,e,i,o){return new bE(t,this,e,i).process(o)}_processLabel(t,e,i){if(this.labelDirty===!1&&!this.differentState(e,i))return;const o=this._processLabelText(t,e,i,this.elementOptions.label);this.fontOptions.minWdt>0&&o.width<this.fontOptions.minWdt&&(o.width=this.fontOptions.minWdt),this.size.labelHeight=o.height,this.fontOptions.minHgt>0&&o.height<this.fontOptions.minHgt&&(o.height=this.fontOptions.minHgt),this.lines=o.lines,this.lineCount=o.lines.length,this.size.width=o.width,this.size.height=o.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}visible(){return this.size.width===0||this.size.height===0||this.elementOptions.label===void 0?!1:!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}var nr,hy,dy,ly,cy,sr,uy,py,fy,gy,my,wE={};function _E(){if(hy)return nr;hy=1;var n=Pt(),t=ho(),e=Zt();return nr=function(i){for(var o=n(this),s=e(o),r=arguments.length,a=t(r>1?arguments[1]:void 0,s),h=r>2?arguments[2]:void 0,d=h===void 0?s:t(h,s);d>a;)o[a++]=i;return o},nr}function xE(){return cy?ly:(cy=1,function(){if(dy)return wE;dy=1;var n=A(),t=_E(),e=Wn();n({target:"Array",proto:!0},{fill:t}),e("fill")}(),ly=bt()("Array","fill"))}function EE(){if(uy)return sr;uy=1;var n=ht(),t=xE(),e=Array.prototype;return sr=function(i){var o=i.fill;return i===e||n(e,i)&&o===e.fill?t:o},sr}function OE(){return fy?py:(fy=1,py=EE())}var Bo=L(my?gy:(my=1,gy=OE()));class Ie{constructor(t,e,i){this.body=e,this.labelModule=i,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(t){this.options=t}_setMargins(t){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}_distanceToBorder(t,e){const i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}enableShadow(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}disableShadow(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}enableBorderDashes(t,e){if(e.borderDashes!==!1)if(t.setLineDash!==void 0){let i=e.borderDashes;i===!0&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}disableBorderDashes(t,e){e.borderDashes!==!1&&(t.setLineDash!==void 0?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}needsRefresh(t,e){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(t,e)}initContextForDraw(t,e){const i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}performStroke(t,e){const i=e.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}performFill(t,e){t.save(),t.fillStyle=e.color,this.enableShadow(t,e),Bo(t).call(t),this.disableShadow(t,e),t.restore(),this.performStroke(t,e)}_addBoundingBoxMargin(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}_updateBoundingBox(t,e,i,o,s){i!==void 0&&this.resize(i,o,s),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(t,e,i,o,s){this._updateBoundingBox(t,e,i,o,s)}getDimensionsFromLabel(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);let o=this.textSize.width,s=this.textSize.height;return o===0&&(o=14,s=14),{width:o,height:s}}}let CE=class extends Ie{constructor(n,t,e){super(n,t,e),this._setMargins(e)}resize(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(t,e)){const i=this.getDimensionsFromLabel(n,t,e);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(n,t,e,i,o,s){this.resize(n,i,o),this.left=t-this.width/2,this.top=e-this.height/2,this.initContextForDraw(n,s),Jh(n,this.left,this.top,this.width,this.height,s.borderRadius),this.performFill(n,s),this.updateBoundingBox(t,e,n,i,o),this.labelModule.draw(n,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,o)}updateBoundingBox(n,t,e,i,o){this._updateBoundingBox(n,t,e,i,o);const s=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(s)}distanceToBorder(n,t){n&&this.resize(n);const e=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+e}};class rr extends Ie{constructor(t,e,i){super(t,e,i),this.labelOffset=0,this.selected=!1}setOptions(t,e,i){this.options=t,e===void 0&&i===void 0||this.setImages(e,i)}setImages(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}switchImages(t){const e=t&&!this.selected||!t&&this.selected;if(this.selected=t,this.imageObjAlt!==void 0&&e){const i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}_getImagePadding(){const t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const e=this.options.imagePadding;typeof e=="object"?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}_resizeImage(){let t,e;if(this.options.shapeProperties.useImageSize===!1){let i=1,o=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:o=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*o}else{const i=this._getImagePadding();t=this.imageObj.width+i.left+i.right,e=this.imageObj.height+i.top+i.bottom}this.width=t,this.height=e,this.radius=.5*this.width}_drawRawCircle(t,e,i,o){this.initContextForDraw(t,o),vn(t,e,i,o.size),this.performFill(t,o)}_drawImageAtPosition(t,e){if(this.imageObj.width!=0){t.globalAlpha=e.opacity!==void 0?e.opacity:1,this.enableShadow(t,e);let i=1;this.options.shapeProperties.interpolation===!0&&(i=this.imageObj.width/this.width/this.body.view.scale);const o=this._getImagePadding(),s=this.left+o.left,r=this.top+o.top,a=this.width-o.left-o.right,h=this.height-o.top-o.bottom;this.imageObj.drawImageAtPosition(t,i,s,r,a,h),this.disableShadow(t,e)}}_drawImageLabel(t,e,i,o,s){let r=0;if(this.height!==void 0){r=.5*this.height;const h=this.labelModule.getTextSize(t,o,s);h.lineCount>=1&&(r+=h.height/2)}const a=i+r;this.options.label&&(this.labelOffset=r),this.labelModule.draw(t,e,a,o,s,"hanging")}}let kE=class extends rr{constructor(n,t,e){super(n,t,e),this._setMargins(e)}resize(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(t,e)){const i=this.getDimensionsFromLabel(n,t,e),o=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=o/2,this.width=o,this.height=o,this.radius=this.width/2}}draw(n,t,e,i,o,s){this.resize(n,i,o),this.left=t-this.width/2,this.top=e-this.height/2,this._drawRawCircle(n,t,e,s),this.updateBoundingBox(t,e),this.labelModule.draw(n,this.left+this.textSize.width/2+this.margin.left,e,i,o)}updateBoundingBox(n,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=n-this.options.size,this.boundingBox.right=n+this.options.size,this.boundingBox.bottom=t+this.options.size}distanceToBorder(n){return n&&this.resize(n),.5*this.width}};class SE extends rr{constructor(t,e,i,o,s){super(t,e,i),this.setImages(o,s)}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const o=2*this.options.size;return this.width=o,this.height=o,void(this.radius=.5*this.width)}this.needsRefresh(e,i)&&this._resizeImage()}draw(t,e,i,o,s,r){this.switchImages(o),this.resize();let a=e,h=i;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=i,a+=this.width/2,h+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),this._drawRawCircle(t,a,h,r),t.save(),t.clip(),this._drawImageAtPosition(t,r),t.restore(),this._drawImageLabel(t,a,h,o,s),this.updateBoundingBox(e,i)}updateBoundingBox(t,e){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=e,this.boundingBox.left=t,this.boundingBox.right=t+2*this.options.size,this.boundingBox.bottom=e+2*this.options.size):(this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(t){return t&&this.resize(t),.5*this.width}}class ge extends Ie{constructor(t,e,i){super(t,e,i)}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){var s,r;this.labelModule.getTextSize(t,e,i);const a=2*o.size;this.width=(s=this.customSizeWidth)!==null&&s!==void 0?s:a,this.height=(r=this.customSizeHeight)!==null&&r!==void 0?r:a,this.radius=.5*this.width}}_drawShape(t,e,i,o,s,r,a,h){var d;return this.resize(t,r,a,h),this.left=o-this.width/2,this.top=s-this.height/2,this.initContextForDraw(t,h),(d=e,Object.prototype.hasOwnProperty.call(id,d)?id[d]:function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),p=1;p<c;p++)u[p-1]=arguments[p];CanvasRenderingContext2D.prototype[d].call(l,u)})(t,o,s,h.size),this.performFill(t,h),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(t.font=(r?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,o,s)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(t,r,a,o,s,"hanging");const l=s+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,o,l,r,a,"hanging")}this.updateBoundingBox(o,s)}}}updateBoundingBox(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function vy(n,t){var e=lt(n);if(ue){var i=ue(n);t&&(i=ie(i).call(i,function(o){return pe(n,o).enumerable})),e.push.apply(e,i)}return e}function TE(n){for(var t=1;t<arguments.length;t++){var e,i,o=arguments[t]!=null?arguments[t]:{};t%2?tt(e=vy(Object(o),!0)).call(e,function(s){ee(n,s,o[s])}):fe?Io(n,fe(o)):tt(i=vy(Object(o))).call(i,function(s){Po(n,s,pe(o,s))})}return n}class DE extends ge{constructor(t,e,i,o){super(t,e,i,o),this.ctxRenderer=o}draw(t,e,i,o,s,r){this.resize(t,o,s,r),this.left=e-this.width/2,this.top=i-this.height/2,t.save();const a=this.ctxRenderer({ctx:t,id:this.options.id,x:e,y:i,state:{selected:o,hover:s},style:TE({},r),label:this.options.label});if(a.drawNode!=null&&a.drawNode(),t.restore(),a.drawExternalLabel){const h=a.drawExternalLabel;a.drawExternalLabel=()=>{t.save(),h(),t.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}class ME extends Ie{constructor(t,e,i){super(t,e,i),this._setMargins(i)}resize(t,e,i){if(this.needsRefresh(e,i)){const o=this.getDimensionsFromLabel(t,e,i).width+this.margin.right+this.margin.left;this.width=o,this.height=o,this.radius=this.width/2}}draw(t,e,i,o,s,r){this.resize(t,o,s),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),td(t,e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,s),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,s)}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}let IE=class extends ge{constructor(n,t,e){super(n,t,e)}draw(n,t,e,i,o,s){return this._drawShape(n,"diamond",4,t,e,i,o,s)}distanceToBorder(n,t){return this._distanceToBorder(n,t)}};class PE extends ge{constructor(t,e,i){super(t,e,i)}draw(t,e,i,o,s,r){return this._drawShape(t,"circle",2,e,i,o,s,r)}distanceToBorder(t){return t&&this.resize(t),this.options.size}}class NE extends Ie{constructor(t,e,i){super(t,e,i)}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(e,i)){const o=this.getDimensionsFromLabel(t,e,i);this.height=2*o.height,this.width=o.width+o.height,this.radius=.5*this.width}}draw(t,e,i,o,s,r){this.resize(t,o,s),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,r),yn(t,this.left,this.top,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,s),this.labelModule.draw(t,e,i,o,s)}distanceToBorder(t,e){t&&this.resize(t);const i=.5*this.width,o=.5*this.height,s=Math.sin(e)*i,r=Math.cos(e)*o;return i*o/Math.sqrt(s*s+r*r)}}class BE extends Ie{constructor(t,e,i){super(t,e,i),this._setMargins(i)}resize(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(t,e,i,o,s,r){return this.resize(t,o,s),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,o,s,r),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,i+this.height/2+5,o),this.updateBoundingBox(e,i)}}}updateBoundingBox(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(t,e,i,o,s,r){const a=Number(this.options.icon.size);this.options.icon.code!==void 0?(t.font=[this.options.icon.weight!=null?this.options.icon.weight:o?"bold":"",(this.options.icon.weight!=null&&o?5:0)+a+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,r),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,r)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}let zE=class extends rr{constructor(n,t,e,i,o){super(n,t,e),this.setImages(i,o)}resize(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const i=2*this.options.size;return this.width=i,void(this.height=i)}this.needsRefresh(t,e)&&this._resizeImage()}draw(n,t,e,i,o,s){n.save(),this.switchImages(i),this.resize();let r=t,a=e;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=t,this.top=e,r+=this.width/2,a+=this.height/2):(this.left=t-this.width/2,this.top=e-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const h=this.options.borderWidth,d=this.options.borderWidthSelected||2*this.options.borderWidth,l=(i?d:h)/this.body.view.scale;n.lineWidth=Math.min(this.width,l),n.beginPath();let c=i?this.options.color.highlight.border:o?this.options.color.hover.border:this.options.color.border,u=i?this.options.color.highlight.background:o?this.options.color.hover.background:this.options.color.background;s.opacity!==void 0&&(c=Dt(c,s.opacity),u=Dt(u,s.opacity)),n.strokeStyle=c,n.fillStyle=u,n.rect(this.left-.5*n.lineWidth,this.top-.5*n.lineWidth,this.width+n.lineWidth,this.height+n.lineWidth),Bo(n).call(n),this.performStroke(n,s),n.closePath()}this._drawImageAtPosition(n,s),this._drawImageLabel(n,r,a,i,o),this.updateBoundingBox(t,e),n.restore()}updateBoundingBox(n,t){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=n,this.top=t):(this.left=n-this.width/2,this.top=t-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(n,t){return this._distanceToBorder(n,t)}};class FE extends ge{constructor(t,e,i){super(t,e,i)}draw(t,e,i,o,s,r){return this._drawShape(t,"square",2,e,i,o,s,r)}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}class AE extends ge{constructor(t,e,i){super(t,e,i)}draw(t,e,i,o,s,r){return this._drawShape(t,"hexagon",4,e,i,o,s,r)}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}class jE extends ge{constructor(t,e,i){super(t,e,i)}draw(t,e,i,o,s,r){return this._drawShape(t,"star",4,e,i,o,s,r)}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}class RE extends Ie{constructor(t,e,i){super(t,e,i),this._setMargins(i)}resize(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(t,e,i,o,s,r){this.resize(t,o,s),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,s),this.disableShadow(t,r),this.updateBoundingBox(e,i,t,o,s)}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}let LE=class extends ge{constructor(n,t,e){super(n,t,e)}draw(n,t,e,i,o,s){return this._drawShape(n,"triangle",3,t,e,i,o,s)}distanceToBorder(n,t){return this._distanceToBorder(n,t)}};class HE extends ge{constructor(t,e,i){super(t,e,i)}draw(t,e,i,o,s,r){return this._drawShape(t,"triangleDown",3,e,i,o,s,r)}distanceToBorder(t,e){return this._distanceToBorder(t,e)}}function yy(n,t){var e=lt(n);if(ue){var i=ue(n);t&&(i=ie(i).call(i,function(o){return pe(n,o).enumerable})),e.push.apply(e,i)}return e}function by(n){for(var t=1;t<arguments.length;t++){var e,i,o=arguments[t]!=null?arguments[t]:{};t%2?tt(e=yy(Object(o),!0)).call(e,function(s){ee(n,s,o[s])}):fe?Io(n,fe(o)):tt(i=yy(Object(o))).call(i,function(s){Po(n,s,pe(o,s))})}return n}class it{constructor(t,e,i,o,s,r){this.options=Xt(s),this.globalOptions=s,this.defaultOptions=r,this.body=e,this.edges=[],this.id=void 0,this.imagelist=i,this.grouplist=o,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new pi(this.body,this.options,!1),this.setOptions(t)}attachEdge(t){var e;ot(e=this.edges).call(e,t)===-1&&this.edges.push(t)}detachEdge(t){var e;const i=ot(e=this.edges).call(e,t);var o;i!=-1&&re(o=this.edges).call(o,i,1)}setOptions(t){const e=this.options.shape;if(!t)return;if(t.color!==void 0&&(this._localColor=t.color),t.id!==void 0&&(this.id=t.id),this.id===void 0)throw new Error("Node must have an id");it.checkMass(t,this.id),t.x!==void 0&&(t.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=$m(t.x),this.predefinedPosition=!0)),t.y!==void 0&&(t.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=$m(t.y),this.predefinedPosition=!0)),t.size!==void 0&&(this.baseSize=t.size),t.value!==void 0&&(t.value=av(t.value)),it.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);const i=[t,this.options,this.defaultOptions];return this.chooser=tr("node",i),this._load_images(),this.updateLabelModule(t),t.opacity!==void 0&&it.checkOpacity(t.opacity)&&(this.options.opacity=t.opacity),this.updateShape(e),t.hidden!==void 0||t.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(t){return 0<=t&&t<=1}static checkCoordinateOrigin(t){return t===void 0||t==="center"||t==="top-left"}static updateGroupOptions(t,e,i){var o;if(i===void 0)return;const s=t.group;if(e!==void 0&&e.group!==void 0&&s!==e.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof s=="number"||typeof s=="string"&&s!=""))return;const r=i.get(s);r.opacity!==void 0&&e.opacity===void 0&&(it.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0));const a=ie(o=Qx(e)).call(o,h=>e[h]!=null);a.push("font"),Ni(a,t,r),t.color=xo(t.color)}static parseOptions(t,e){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;if(Ni(["color","fixed","shadow"],t,e,i),it.checkMass(e),t.opacity!==void 0&&(it.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),e.opacity!==void 0&&(it.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),e.shapeProperties&&!it.checkCoordinateOrigin(e.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+e.shapeProperties.coordinateOrigin),Mt(t,e,"shadow",o),e.color!==void 0&&e.color!==null){const r=xo(e.color);Pn(t.color,r)}else i===!0&&e.color===null&&(t.color=Xt(o.color));e.fixed!==void 0&&e.fixed!==null&&(typeof e.fixed=="boolean"?(t.fixed.x=e.fixed,t.fixed.y=e.fixed):(e.fixed.x!==void 0&&typeof e.fixed.x=="boolean"&&(t.fixed.x=e.fixed.x),e.fixed.y!==void 0&&typeof e.fixed.y=="boolean"&&(t.fixed.y=e.fixed.y))),i===!0&&e.font===null&&(t.font=Xt(o.font)),it.updateGroupOptions(t,e,s),e.scaling!==void 0&&Mt(t.scaling,e.scaling,"label",o.scaling)}getFormattingValues(){const t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(t,this.options.id,this.selected,this.hover),t.shadow===!1&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const e=this.options.opacity;t.borderColor=Dt(t.borderColor,e),t.color=Dt(t.color,e),t.shadowColor=Dt(t.shadowColor,e)}return t}updateLabelModule(t){this.options.label!==void 0&&this.options.label!==null||(this.options.label=""),it.updateGroupOptions(this.options,by(by({},t),{},{color:t&&t.color||this._localColor||void 0}),this.grouplist);const e=this.grouplist.get(this.options.group,!1),i=[t,this.options,e,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new CE(this.options,this.body,this.labelModule);break;case"circle":this.shape=new kE(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new SE(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new DE(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new ME(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new IE(this.options,this.body,this.labelModule);break;case"dot":this.shape=new PE(this.options,this.body,this.labelModule);break;case"ellipse":default:this.shape=new NE(this.options,this.body,this.labelModule);break;case"icon":this.shape=new BE(this.options,this.body,this.labelModule);break;case"image":this.shape=new zE(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new FE(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new AE(this.options,this.body,this.labelModule);break;case"star":this.shape=new jE(this.options,this.body,this.labelModule);break;case"text":this.shape=new RE(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new LE(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new HE(this.options,this.body,this.labelModule)}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(t,e){return this.shape.distanceToBorder(t,e)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(t,e,i){if(this.options.value!==void 0){const o=this.options.scaling.customScalingFunction(t,e,i,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*r}this.options.size=this.options.scaling.min+o*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(t){const e=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)||{}}updateBoundingBox(t){this.shape.updateBoundingBox(this.x,this.y,t)}resize(t){const e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}getItemsOnPoint(t){const e=[];return this.labelModule.visible()&&er(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),er(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}isOverlappingWith(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}isBoundingBoxOverlappingWith(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}static checkMass(t,e){if(t.mass!==void 0&&t.mass<=0){let i="";e!==void 0&&(i=" in node id: "+e),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",jn),t.mass=1}}}class WE{constructor(t,e,i,o){var s;if(this.body=t,this.images=e,this.groups=i,this.layoutEngine=o,this.body.functions.createNode=I(s=this.create).call(s,this),this.nodesListeners={add:(r,a)=>{this.add(a.items)},update:(r,a)=>{this.update(a.items,a.data,a.oldData)},remove:(r,a)=>{this.remove(a.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(r,a,h,d){if(a===r)return .5;{const l=1/(a-r);return Math.max(0,(d-r)*l)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Xt(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var t,e;this.body.emitter.on("refreshNodes",I(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",I(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",()=>{W(this.nodesListeners,(i,o)=>{this.body.data.nodes&&this.body.data.nodes.off(o,i)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(t){if(t!==void 0){if(it.parseOptions(this.options,t),t.opacity!==void 0&&(Fs(t.opacity)||!Me(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),t.shape!==void 0)for(const e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if(t.font!==void 0||t.widthConstraint!==void 0||t.heightConstraint!==void 0)for(const e of lt(this.body.nodes))this.body.nodes[e].updateLabelModule(),this.body.nodes[e].needsRefresh();if(t.size!==void 0)for(const e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].needsRefresh();t.hidden===void 0&&t.physics===void 0||this.body.emitter.emit("_dataChanged")}}setData(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.body.data.nodes;if(Hs("id",t))this.body.data.nodes=t;else if(Wt(t))this.body.data.nodes=new ce,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new ce}if(i&&W(this.nodesListeners,function(o,s){i.off(s,o)}),this.body.nodes={},this.body.data.nodes){const o=this;W(this.nodesListeners,function(r,a){o.body.data.nodes.on(a,r)});const s=this.body.data.nodes.getIds();this.add(s,!0)}e===!1&&this.body.emitter.emit("_dataChanged")}add(t){let e,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const o=[];for(let s=0;s<t.length;s++){e=t[s];const r=this.body.data.nodes.get(e),a=this.create(r);o.push(a),this.body.nodes[e]=a}this.layoutEngine.positionInitially(o),i===!1&&this.body.emitter.emit("_dataChanged")}update(t,e,i){const o=this.body.nodes;let s=!1;for(let r=0;r<t.length;r++){const a=t[r];let h=o[a];const d=e[r];h!==void 0?h.setOptions(d)&&(s=!0):(s=!0,h=this.create(d),o[a]=h)}s||i===void 0||(s=q_(e).call(e,function(r,a){const h=i[a];return h&&h.level!==r.level})),s===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(t){const e=this.body.nodes;for(let i=0;i<t.length;i++)delete e[t[i]];this.body.emitter.emit("_dataChanged")}create(t){return new(arguments.length>1&&arguments[1]!==void 0?arguments[1]:it)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];W(this.body.nodes,(e,i)=>{const o=this.body.data.nodes.get(i);o!==void 0&&(t===!0&&e.setOptions({x:null,y:null}),e.setOptions({fixed:!1}),e.setOptions(o))})}getPositions(t){const e={};if(t!==void 0){if(Wt(t)===!0){for(let i=0;i<t.length;i++)if(this.body.nodes[t[i]]!==void 0){const o=this.body.nodes[t[i]];e[t[i]]={x:Math.round(o.x),y:Math.round(o.y)}}}else if(this.body.nodes[t]!==void 0){const i=this.body.nodes[t];e[t]={x:Math.round(i.x),y:Math.round(i.y)}}}else for(let i=0;i<this.body.nodeIndices.length;i++){const o=this.body.nodes[this.body.nodeIndices[i]];e[this.body.nodeIndices[i]]={x:Math.round(o.x),y:Math.round(o.y)}}return e}getPosition(t){if(t==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[t]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}storePositions(){const t=[],e=this.body.data.nodes.getDataSet();for(const i of e.get()){const o=i.id,s=this.body.nodes[o],r=Math.round(s.x),a=Math.round(s.y);i.x===r&&i.y===a||t.push({id:o,x:r,y:a})}e.update(t)}getBoundingBox(t){if(this.body.nodes[t]!==void 0)return this.body.nodes[t].shape.boundingBox}getConnectedNodes(t,e){const i=[];if(this.body.nodes[t]!==void 0){const o=this.body.nodes[t],s={};for(let r=0;r<o.edges.length;r++){const a=o.edges[r];e!=="to"&&a.toId==o.id?s[a.fromId]===void 0&&(i.push(a.fromId),s[a.fromId]=!0):e!=="from"&&a.fromId==o.id&&s[a.toId]===void 0&&(i.push(a.toId),s[a.toId]=!0)}}return i}getConnectedEdges(t){const e=[];if(this.body.nodes[t]!==void 0){const i=this.body.nodes[t];for(let o=0;o<i.edges.length;o++)e.push(i.edges[o].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}moveNode(t,e,i){this.body.nodes[t]!==void 0?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),di(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}var wy,_y,xy,Ey,Oy,Cy,ky,ar,Sy,Ty,Dy,My,Iy,VE={};function qE(){if(_y)return wy;_y=1;var n=Ke(),t=zt(),e=Gt(),i=RangeError;return wy=function(o){var s=t(e(this)),r="",a=n(o);if(a<0||a===1/0)throw new i("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(s+=s))1&a&&(r+=s);return r}}function UE(){if(Ey)return xy;Ey=1;var n=Y(),t=Th(),e=zt(),i=qE(),o=Gt(),s=n(i),r=n("".slice),a=Math.ceil,h=function(d){return function(l,c,u){var p,g,m=e(o(l)),f=t(c),v=m.length,y=u===void 0?" ":e(u);return f<=v||y===""?m:((g=s(y,a((p=f-v)/y.length))).length>p&&(g=r(g,0,p)),d?m+g:g+m)}};return xy={start:h(!1),end:h(!0)}}function YE(){if(Cy)return Oy;Cy=1;var n=Y(),t=U(),e=UE().start,i=RangeError,o=isFinite,s=Math.abs,r=Date.prototype,a=r.toISOString,h=n(r.getTime),d=n(r.getUTCDate),l=n(r.getUTCFullYear),c=n(r.getUTCHours),u=n(r.getUTCMilliseconds),p=n(r.getUTCMinutes),g=n(r.getUTCMonth),m=n(r.getUTCSeconds);return Oy=t(function(){return a.call(new Date(-50000000000001))!=="0385-07-25T07:06:39.999Z"})||!t(function(){a.call(new Date(NaN))})?function(){if(!o(h(this)))throw new i("Invalid time value");var f=this,v=l(f),y=u(f),_=v<0?"-":v>9999?"+":"";return _+e(s(v),_?6:4,0)+"-"+e(g(f)+1,2,0)+"-"+e(d(f),2,0)+"T"+e(c(f),2,0)+":"+e(p(f),2,0)+":"+e(m(f),2,0)+"."+e(y,3,0)+"Z"}:a}function XE(){if(Sy)return ar;Sy=1,function(){if(ky)return VE;ky=1;var e=A(),i=kt(),o=Pt(),s=Ja(),r=YE(),a=qt();e({target:"Date",proto:!0,forced:U()(function(){return new Date(NaN).toJSON()!==null||i(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1})},{toJSON:function(h){var d=o(this),l=s(d,"number");return typeof l!="number"||isFinite(l)?"toISOString"in d||a(d)!=="Date"?d.toISOString():i(r,d):null}})}(),cg();var n=G(),t=io();return n.JSON||(n.JSON={stringify:JSON.stringify}),ar=function(e,i,o){return t(n.JSON.stringify,null,arguments)},ar}function GE(){return Dy?Ty:(Dy=1,Ty=XE())}var Py,Ny,By,zy,Fy,Ay,jy,Ry=L(Iy?My:(Iy=1,My=GE())),KE={};function ZE(){return By?Ny:(By=1,function(){if(Py)return KE;Py=1;var n=A(),t=Math.hypot,e=Math.abs,i=Math.sqrt;n({target:"Math",stat:!0,arity:2,forced:!!t&&t(1/0,NaN)!==1/0},{hypot:function(o,s){for(var r,a,h=0,d=0,l=arguments.length,c=0;d<l;)c<(r=e(arguments[d++]))?(h=h*(a=c/r)*a+1,c=r):h+=r>0?(a=r/c)*a:r;return c===1/0?1/0:c*i(h)}})}(),Ny=G().Math.hypot)}function QE(){return Fy?zy:(Fy=1,zy=ZE())}var $E=L(jy?Ay:(jy=1,Ay=QE()));class at{static transform(t,e){Wt(t)||(t=[t]);const i=e.point.x,o=e.point.y,s=e.angle,r=e.length;for(let a=0;a<t.length;++a){const h=t[a],d=h.x*Math.cos(s)-h.y*Math.sin(s),l=h.x*Math.sin(s)+h.y*Math.cos(s);h.x=i+r*d,h.y=o+r*l}}static drawPath(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}let JE=class extends at{static draw(n,t){if(t.image){n.save(),n.translate(t.point.x,t.point.y),n.rotate(Math.PI/2+t.angle);const e=t.imageWidth!=null?t.imageWidth:t.image.width,i=t.imageHeight!=null?t.imageHeight:t.image.height;t.image.drawImageAtPosition(n,1,-e/2,0,e,i),n.restore()}return!1}};class tO extends at{static draw(t,e){const i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return at.transform(i,e),at.drawPath(t,i),!0}}class eO{static draw(t,e){const i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return at.transform(i,e),at.drawPath(t,i),!0}}class iO{static draw(t,e){const i={x:-.4,y:0};at.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";const o=Math.PI,s=e.angle-o/2,r=e.angle+o/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,s,r,!1),t.stroke(),!0}}class oO{static draw(t,e){const i={x:-.3,y:0};at.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";const o=Math.PI,s=e.angle+o/2,r=e.angle+3*o/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,s,r,!1),t.stroke(),!0}}class nO{static draw(t,e){const i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return at.transform(i,e),at.drawPath(t,i),!0}}class sO{static draw(t,e){const i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return at.transform(i,e),at.drawPath(t,i),!0}}class rO{static draw(t,e){const i={x:-.4,y:0};return at.transform(i,e),vn(t,i.x,i.y,.4*e.length),!0}}class aO{static draw(t,e){const i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return at.transform(i,e),at.drawPath(t,i),!0}}class hO{static draw(t,e){const i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return at.transform(i,e),at.drawPath(t,i),!0}}class dO{static draw(t,e){const i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return at.transform(i,e),at.drawPath(t,i),!0}}class lO{static draw(t,e){const i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return at.transform(i,e),at.drawPath(t,i),!0}}class Ly{static draw(t,e){let i;switch(e.type&&(i=e.type.toLowerCase()),i){case"image":return JE.draw(t,e);case"circle":return rO.draw(t,e);case"box":return hO.draw(t,e);case"crow":return eO.draw(t,e);case"curve":return iO.draw(t,e);case"diamond":return dO.draw(t,e);case"inv_curve":return oO.draw(t,e);case"triangle":return nO.draw(t,e);case"inv_triangle":return sO.draw(t,e);case"bar":return aO.draw(t,e);case"vee":return lO.draw(t,e);default:return tO.draw(t,e)}}}function Hy(n,t){var e=lt(n);if(ue){var i=ue(n);t&&(i=ie(i).call(i,function(o){return pe(n,o).enumerable})),e.push.apply(e,i)}return e}function Wy(n){for(var t=1;t<arguments.length;t++){var e,i,o=arguments[t]!=null?arguments[t]:{};t%2?tt(e=Hy(Object(o),!0)).call(e,function(s){ee(n,s,o[s])}):fe?Io(n,fe(o)):tt(i=Hy(Object(o))).call(i,function(s){Po(n,s,pe(o,s))})}return n}class Vy{constructor(t,e,i){ee(this,"color",{}),ee(this,"colorDirty",!0),ee(this,"hoverWidth",1.5),ee(this,"selectionWidth",2),this._body=e,this._labelModule=i,this.setOptions(t),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(t,e,i,o){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,e.dashes!==!1?this._drawDashedLine(t,e,s):this._drawLine(t,e,s)}_drawLine(t,e,i,o,s){if(this.from!=this.to)this._line(t,e,i,o,s);else{const[r,a,h]=this._getCircleData(t);this._circle(t,e,r,a,h)}}_drawDashedLine(t,e,i,o,s){t.lineCap="round";const r=Wt(e.dashes)?e.dashes:[5,5];if(t.setLineDash!==void 0){if(t.save(),t.setLineDash(r),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{const[a,h,d]=this._getCircleData(t);this._circle(t,e,a,h,d)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)ed(t,this.from.x,this.from.y,this.to.x,this.to.y,r);else{const[a,h,d]=this._getCircleData(t);this._circle(t,e,a,h,d)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}findBorderPosition(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}findBorderPositions(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};{var e;const[i,o]=ui(e=this._getCircleData(t)).call(e,0,2);return{from:this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:.6,high:.8,direction:1})}}}_getCircleData(t){const e=this.options.selfReference.size;t!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(t);const i=qv(t,this.options.selfReference.angle,e,this.from);return[i.x,i.y,e]}_pointOnCircle(t,e,i,o){const s=2*o*Math.PI;return{x:t+i*Math.cos(s),y:e-i*Math.sin(s)}}_findBorderPositionCircle(t,e,i){const o=i.x,s=i.y;let r=i.low,a=i.high;const h=i.direction,d=this.options.selfReference.size;let l,c=.5*(r+a),u=0;this.options.arrowStrikethrough===!0&&(h===-1?u=this.options.endPointOffset.from:h===1&&(u=this.options.endPointOffset.to));let p=0;do{c=.5*(r+a),l=this._pointOnCircle(o,s,d,c);const g=Math.atan2(t.y-l.y,t.x-l.x),m=t.distanceToBorder(e,g)+u-Math.sqrt(Math.pow(l.x-t.x,2)+Math.pow(l.y-t.y,2));if(Math.abs(m)<.05)break;m>0?h>0?r=c:a=c:h>0?a=c:r=c,++p}while(r<=a&&p<10);return Wy(Wy({},l),{},{t:c})}getLineWidth(t,e){return t===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):e===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(t,e){if(e.inheritsColor!==!1){if(e.inheritsColor==="both"&&this.from.id!==this.to.id){const i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let o=this.from.options.color.highlight.border,s=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(o=Dt(this.from.options.color.border,e.opacity),s=Dt(this.to.options.color.border,e.opacity)):this.from.selected===!0&&this.to.selected===!1?s=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(o=this.from.options.color.border),i.addColorStop(0,o),i.addColorStop(1,s),i}return e.inheritsColor==="to"?Dt(this.to.options.color.border,e.opacity):Dt(this.from.options.color.border,e.opacity)}return Dt(e.color,e.opacity)}_circle(t,e,i,o,s){this.enableShadow(t,e);let r=0,a=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){const h=this.options.selfReference.angle,d=this.options.selfReference.angle+Math.PI,l=this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:h,high:d,direction:-1}),c=this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:h,high:d,direction:1});r=Math.atan2(l.y-o,l.x-i),a=Math.atan2(c.y-o,c.x-i)}t.beginPath(),t.arc(i,o,s,r,a,!1),t.stroke(),this.disableShadow(t,e)}getDistanceToEdge(t,e,i,o,s,r){if(this.from!=this.to)return this._getDistanceToEdge(t,e,i,o,s,r);{const[a,h,d]=this._getCircleData(void 0),l=a-s,c=h-r;return Math.abs(Math.sqrt(l*l+c*c)-d)}}_getDistanceToLine(t,e,i,o,s,r){const a=i-t,h=o-e;let d=((s-t)*a+(r-e)*h)/(a*a+h*h);d>1?d=1:d<0&&(d=0);const l=t+d*a-s,c=e+d*h-r;return Math.sqrt(l*l+c*c)}getArrowData(t,e,i,o,s,r){let a,h,d,l,c,u,p;const g=r.width;e==="from"?(d=this.from,l=this.to,c=r.fromArrowScale<0,u=Math.abs(r.fromArrowScale),p=r.fromArrowType):e==="to"?(d=this.to,l=this.from,c=r.toArrowScale<0,u=Math.abs(r.toArrowScale),p=r.toArrowType):(d=this.to,l=this.from,c=r.middleArrowScale<0,u=Math.abs(r.middleArrowScale),p=r.middleArrowType);const m=15*u+3*g;if(d!=l){const f=m/$E(d.x-l.x,d.y-l.y);if(e!=="middle")if(this.options.smooth.enabled===!0){const v=this._findBorderPosition(d,t,{via:i}),y=this.getPoint(v.t+f*(e==="from"?1:-1),i);a=Math.atan2(v.y-y.y,v.x-y.x),h=v}else a=Math.atan2(d.y-l.y,d.x-l.x),h=this._findBorderPosition(d,t);else{const v=(c?-f:f)/2,y=this.getPoint(.5+v,i),_=this.getPoint(.5-v,i);a=Math.atan2(y.y-_.y,y.x-_.x),h=this.getPoint(.5,i)}}else{const[f,v,y]=this._getCircleData(t);if(e==="from"){const _=this.options.selfReference.angle,b=this.options.selfReference.angle+Math.PI,w=this._findBorderPositionCircle(this.from,t,{x:f,y:v,low:_,high:b,direction:-1});a=-2*w.t*Math.PI+1.5*Math.PI+.1*Math.PI,h=w}else if(e==="to"){const _=this.options.selfReference.angle,b=this.options.selfReference.angle+Math.PI,w=this._findBorderPositionCircle(this.from,t,{x:f,y:v,low:_,high:b,direction:1});a=-2*w.t*Math.PI+1.5*Math.PI-1.1*Math.PI,h=w}else{const _=this.options.selfReference.angle/(2*Math.PI);h=this._pointOnCircle(f,v,y,_),a=-2*_*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:h,core:{x:h.x-.9*m*Math.cos(a),y:h.y-.9*m*Math.sin(a)},angle:a,length:m,type:p}}drawArrowHead(t,e,i,o,s){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,Ly.draw(t,s)&&(this.enableShadow(t,e),Bo(t).call(t),this.disableShadow(t,e))}enableShadow(t,e){e.shadow===!0&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}disableShadow(t,e){e.shadow===!0&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}drawBackground(t,e){if(e.background!==!1){const i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,e.dashes)}}setStrokeDashed(t,e){if(e!==!1)if(t.setLineDash!==void 0){const i=Wt(e)?e:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else t.setLineDash!==void 0?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function qy(n,t){var e=lt(n);if(ue){var i=ue(n);t&&(i=ie(i).call(i,function(o){return pe(n,o).enumerable})),e.push.apply(e,i)}return e}function Uy(n){for(var t=1;t<arguments.length;t++){var e,i,o=arguments[t]!=null?arguments[t]:{};t%2?tt(e=qy(Object(o),!0)).call(e,function(s){ee(n,s,o[s])}):fe?Io(n,fe(o)):tt(i=qy(Object(o))).call(i,function(s){Po(n,s,pe(o,s))})}return n}class hr extends Vy{constructor(t,e,i){super(t,e,i)}_findBorderPositionBezier(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),o,s,r=!1,a=1,h=0,d=this.to,l=this.options.endPointOffset?this.options.endPointOffset.to:0;t.id===this.from.id&&(d=this.from,r=!0,l=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(l=0);let c=0;do{s=.5*(h+a),o=this.getPoint(s,i);const u=Math.atan2(d.y-o.y,d.x-o.x),p=d.distanceToBorder(e,u)+l-Math.sqrt(Math.pow(o.x-d.x,2)+Math.pow(o.y-d.y,2));if(Math.abs(p)<.2)break;p<0?r===!1?h=s:a=s:r===!1?a=s:h=s,++c}while(h<=a&&c<10);return Uy(Uy({},o),{},{t:s})}_getDistanceToBezierEdge(t,e,i,o,s,r,a){let h,d,l,c,u,p=1e9,g=t,m=e;for(d=1;d<10;d++)l=.1*d,c=Math.pow(1-l,2)*t+2*l*(1-l)*a.x+Math.pow(l,2)*i,u=Math.pow(1-l,2)*e+2*l*(1-l)*a.y+Math.pow(l,2)*o,d>0&&(h=this._getDistanceToLine(g,m,c,u,s,r),p=h<p?h:p),g=c,m=u;return p}_bezierCurve(t,e,i,o){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),i!=null&&i.x!=null?o!=null&&o.x!=null?t.bezierCurveTo(i.x,i.y,o.x,o.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}getViaNode(){return this._getViaCoordinates()}}class Yy extends hr{constructor(t,e,i){super(t,e,i),ee(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(t){super.setOptions(t);let e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),e===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}setupSupportNode(){if(this.via===void 0){const t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(t,e,i){this._bezierCurve(t,e,i)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[i,o,s]=this._getCircleData(),r=2*Math.PI*(1-t);return{x:i+s*Math.sin(r),y:o+s-s*(1-Math.cos(r))}}return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y}}_findBorderPosition(t,e){return this._findBorderPositionBezier(t,e,this.via)}_getDistanceToEdge(t,e,i,o,s,r){return this._getDistanceToBezierEdge(t,e,i,o,s,r,this.via)}}class Xy extends hr{constructor(t,e,i){super(t,e,i)}_line(t,e,i){this._bezierCurve(t,e,i)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const t=this.options.smooth.roundness,e=this.options.smooth.type;let i=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if(e==="discrete"||e==="diagonalCross"){let s,r;s=r=i<=o?t*o:t*i,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(r=-r);let a=this.from.x+s,h=this.from.y+r;return e==="discrete"&&(i<=o?a=i<t*o?this.from.x:a:h=o<t*i?this.from.y:h),{x:a,y:h}}if(e==="straightCross"){let s=(1-t)*i,r=(1-t)*o;return i<=o?(s=0,this.from.y<this.to.y&&(r=-r)):(this.from.x<this.to.x&&(s=-s),r=0),{x:this.to.x+s,y:this.to.y+r}}if(e==="horizontal"){let s=(1-t)*i;return this.from.x<this.to.x&&(s=-s),{x:this.to.x+s,y:this.from.y}}if(e==="vertical"){let s=(1-t)*o;return this.from.y<this.to.y&&(s=-s),{x:this.from.x,y:this.to.y+s}}if(e==="curvedCW"){i=this.to.x-this.from.x,o=this.from.y-this.to.y;const s=Math.sqrt(i*i+o*o),r=Math.PI,a=(Math.atan2(o,i)+(.5*t+.5)*r)%(2*r);return{x:this.from.x+(.5*t+.5)*s*Math.sin(a),y:this.from.y+(.5*t+.5)*s*Math.cos(a)}}if(e==="curvedCCW"){i=this.to.x-this.from.x,o=this.from.y-this.to.y;const s=Math.sqrt(i*i+o*o),r=Math.PI,a=(Math.atan2(o,i)+(.5*-t+.5)*r)%(2*r);return{x:this.from.x+(.5*t+.5)*s*Math.sin(a),y:this.from.y+(.5*t+.5)*s*Math.cos(a)}}{let s,r;s=r=i<=o?t*o:t*i,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(r=-r);let a=this.from.x+s,h=this.from.y+r;return i<=o?a=this.from.x<=this.to.x?this.to.x<a?this.to.x:a:this.to.x>a?this.to.x:a:h=this.from.y>=this.to.y?this.to.y>h?this.to.y:h:this.to.y<h?this.to.y:h,{x:a,y:h}}}_findBorderPosition(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}_getDistanceToEdge(t,e,i,o,s,r){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,o,s,r,a)}getPoint(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=t;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y}}}class cO extends hr{constructor(t,e,i){super(t,e,i)}_getDistanceToBezierEdge2(t,e,i,o,s,r,a,h){let d=1e9,l=t,c=e;const u=[0,0,0,0];for(let p=1;p<10;p++){const g=.1*p;u[0]=Math.pow(1-g,3),u[1]=3*g*Math.pow(1-g,2),u[2]=3*Math.pow(g,2)*(1-g),u[3]=Math.pow(g,3);const m=u[0]*t+u[1]*a.x+u[2]*h.x+u[3]*i,f=u[0]*e+u[1]*a.y+u[2]*h.y+u[3]*o;if(p>0){const v=this._getDistanceToLine(l,c,m,f,s,r);d=v<d?v:d}l=m,c=f}return d}}class Gy extends cO{constructor(t,e,i){super(t,e,i)}_line(t,e,i){const o=i[0],s=i[1];this._bezierCurve(t,e,o,s)}_getViaCoordinates(){const t=this.from.x-this.to.x,e=this.from.y-this.to.y;let i,o,s,r;const a=this.options.smooth.roundness;return(Math.abs(t)>Math.abs(e)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(o=this.from.y,r=this.to.y,i=this.from.x-a*t,s=this.to.x+a*t):(o=this.from.y-a*e,r=this.to.y+a*e,i=this.from.x,s=this.to.x),[{x:i,y:o},{x:s,y:r}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(t,e){return this._findBorderPositionBezier(t,e)}_getDistanceToEdge(t,e,i,o,s,r){let[a,h]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(t,e,i,o,s,r,a,h)}getPoint(t){let[e,i]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const o=t,s=[Math.pow(1-o,3),3*o*Math.pow(1-o,2),3*Math.pow(o,2)*(1-o),Math.pow(o,3)];return{x:s[0]*this.fromPoint.x+s[1]*e.x+s[2]*i.x+s[3]*this.toPoint.x,y:s[0]*this.fromPoint.y+s[1]*e.y+s[2]*i.y+s[3]*this.toPoint.y}}}class Ky extends Vy{constructor(t,e,i){super(t,e,i)}_line(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}getViaNode(){}getPoint(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}_findBorderPosition(t,e){let i=this.to,o=this.from;t.id===this.from.id&&(i=this.from,o=this.to);const s=Math.atan2(i.y-o.y,i.x-o.x),r=i.x-o.x,a=i.y-o.y,h=Math.sqrt(r*r+a*a),d=(h-t.distanceToBorder(e,s))/h;return{x:(1-d)*o.x+d*i.x,y:(1-d)*o.y+d*i.y,t:0}}_getDistanceToEdge(t,e,i,o,s,r){return this._getDistanceToLine(t,e,i,o,s,r)}}class me{constructor(t,e,i,o,s){if(e===void 0)throw new Error("No body provided");this.options=Xt(o),this.globalOptions=o,this.defaultOptions=s,this.body=e,this.imagelist=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new pi(this.body,this.options,!0),this.setOptions(t)}setOptions(t){if(!t)return;let e=t.physics!==void 0&&this.options.physics!==t.physics||t.hidden!==void 0&&(this.options.hidden||!1)!==(t.hidden||!1)||t.from!==void 0&&this.options.from!==t.from||t.to!==void 0&&this.options.to!==t.to;me.parseOptions(this.options,t,!0,this.globalOptions),t.id!==void 0&&(this.id=t.id),t.from!==void 0&&(this.fromId=t.from),t.to!==void 0&&(this.toId=t.to),t.title!==void 0&&(this.title=t.title),t.value!==void 0&&(t.value=av(t.value));const i=[t,this.options,this.defaultOptions];return this.chooser=tr("edge",i),this.updateLabelModule(t),e=this.updateEdgeType()||e,this._setInteractionWidths(),this.connect(),e}static parseOptions(t,e){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(ke(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,i),e.endPointOffset!==void 0&&e.endPointOffset.from!==void 0&&(Me(e.endPointOffset.from)?t.endPointOffset.from=e.endPointOffset.from:(t.endPointOffset.from=o.endPointOffset.from!==void 0?o.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),e.endPointOffset!==void 0&&e.endPointOffset.to!==void 0&&(Me(e.endPointOffset.to)?t.endPointOffset.to=e.endPointOffset.to:(t.endPointOffset.to=o.endPointOffset.to!==void 0?o.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),No(e.label)?t.label=e.label:No(t.label)||(t.label=void 0),Mt(t,e,"smooth",o),Mt(t,e,"shadow",o),Mt(t,e,"background",o),e.dashes!==void 0&&e.dashes!==null?t.dashes=e.dashes:i===!0&&e.dashes===null&&(t.dashes=ji(o.dashes)),e.scaling!==void 0&&e.scaling!==null?(e.scaling.min!==void 0&&(t.scaling.min=e.scaling.min),e.scaling.max!==void 0&&(t.scaling.max=e.scaling.max),Mt(t.scaling,e.scaling,"label",o.scaling)):i===!0&&e.scaling===null&&(t.scaling=ji(o.scaling)),e.arrows!==void 0&&e.arrows!==null)if(typeof e.arrows=="string"){const r=e.arrows.toLowerCase();t.arrows.to.enabled=ot(r).call(r,"to")!=-1,t.arrows.middle.enabled=ot(r).call(r,"middle")!=-1,t.arrows.from.enabled=ot(r).call(r,"from")!=-1}else{if(typeof e.arrows!="object")throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Ry(e.arrows));Mt(t.arrows,e.arrows,"to",o.arrows),Mt(t.arrows,e.arrows,"middle",o.arrows),Mt(t.arrows,e.arrows,"from",o.arrows)}else i===!0&&e.arrows===null&&(t.arrows=ji(o.arrows));if(e.color!==void 0&&e.color!==null){const r=Ht(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,a=t.color;if(s)Z(a,o.color,!1,i);else for(const h in a)Object.prototype.hasOwnProperty.call(a,h)&&delete a[h];if(Ht(a))a.color=a,a.highlight=a,a.hover=a,a.inherit=!1,r.opacity===void 0&&(a.opacity=1);else{let h=!1;r.color!==void 0&&(a.color=r.color,h=!0),r.highlight!==void 0&&(a.highlight=r.highlight,h=!0),r.hover!==void 0&&(a.hover=r.hover,h=!0),r.inherit!==void 0&&(a.inherit=r.inherit),r.opacity!==void 0&&(a.opacity=Math.min(1,Math.max(0,r.opacity))),h===!0?a.inherit=!1:a.inherit===void 0&&(a.inherit="from")}}else i===!0&&e.color===null&&(t.color=Xt(o.color));i===!0&&e.font===null&&(t.font=Xt(o.font)),Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}getFormattingValues(){const t=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,e=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,i=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,o=this.options.color.inherit,s={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:o?void 0:this.options.color.color,inheritsColor:o,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const r=this.options.selectionWidth;typeof r=="function"?s.width=r(s.width):typeof r=="number"&&(s.width+=r),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.highlight,s.shadow=this.options.shadow.enabled}else if(this.hover){const r=this.options.hoverWidth;typeof r=="function"?s.width=r(s.width):typeof r=="number"&&(s.width+=r),s.width=Math.max(s.width,.3/this.body.view.scale),s.color=this.options.color.hover,s.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(s,this.options.id,this.selected,this.hover),s.color!==void 0&&(s.inheritsColor=!1),s.shadow===!1&&(s.shadowColor===this.options.shadow.color&&s.shadowSize===this.options.shadow.size&&s.shadowX===this.options.shadow.x&&s.shadowY===this.options.shadow.y||(s.shadow=!0)));else s.shadow=this.options.shadow.enabled,s.width=Math.max(s.width,.3/this.body.view.scale);return s}updateLabelModule(t){const e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const t=this.options.smooth;let e=!1,i=!0;return this.edgeType!==void 0&&((this.edgeType instanceof Yy&&t.enabled===!0&&t.type==="dynamic"||this.edgeType instanceof Gy&&t.enabled===!0&&t.type==="cubicBezier"||this.edgeType instanceof Xy&&t.enabled===!0&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof Ky&&t.type.enabled===!1)&&(i=!1),i===!0&&(e=this.cleanup())),i===!0?t.enabled===!0?t.type==="dynamic"?(e=!0,this.edgeType=new Yy(this.options,this.body,this.labelModule)):t.type==="cubicBezier"?this.edgeType=new Gy(this.options,this.body,this.labelModule):this.edgeType=new Xy(this.options,this.body,this.labelModule):this.edgeType=new Ky(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(t,e,i){if(this.options.value!==void 0){const o=this.options.scaling.customScalingFunction(t,e,i,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*r}this.options.width=this.options.scaling.min+o*s}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(t){const e=this.getFormattingValues();if(e.hidden)return;const i=this.edgeType.getViaNode();this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawLabel(t,i)}drawArrows(t){const e=this.getFormattingValues();if(e.hidden)return;const i=this.edgeType.getViaNode(),o={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(o.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),e.arrowStrikethrough===!1&&(this.edgeType.fromPoint=o.from.core),e.fromArrowSrc&&(o.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(o.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(o.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(o.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),e.arrowStrikethrough===!1&&(this.edgeType.toPoint=o.to.core),e.toArrowSrc&&(o.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(o.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(o.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(o.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e),e.middleArrowSrc&&(o.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(o.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(o.middle.imageHeight=e.middleArrowImageHeight)),e.fromArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.from),e.middleArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.middle),e.toArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.to)}drawLabel(t,e){if(this.options.label!==void 0){const i=this.from,o=this.to;let s;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),i.id!=o.id){this.labelModule.pointToSelf=!1,s=this.edgeType.getPoint(.5,e),t.save();const r=this._getRotation(t);r.angle!=0&&(t.translate(r.x,r.y),t.rotate(r.angle)),this.labelModule.draw(t,s.x,s.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;const r=qv(t,this.options.selfReference.angle,this.options.selfReference.size,i);s=this._pointOnCircle(r.x,r.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,s.x,s.y,this.selected,this.hover)}}}getItemsOnPoint(t){const e=[];if(this.labelModule.visible()){const o=this._getRotation();er(this.labelModule.getSize(),t,o)&&e.push({edgeId:this.id,labelId:0})}const i={left:t.x,top:t.y};return this.isOverlappingWith(i)&&e.push({edgeId:this.id}),e}isOverlappingWith(t){if(this.connected){const i=this.from.x,o=this.from.y,s=this.to.x,r=this.to.y,a=t.left,h=t.top;return this.edgeType.getDistanceToEdge(i,o,s,r,a,h)<10}return!1}_getRotation(t){const e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);t!==void 0&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);const o={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return o;const s=this.from.y-this.to.y,r=this.from.x-this.to.x;let a=Math.atan2(s,r);return(a<-1&&r<0||a>0&&r<0)&&(a+=Math.PI),o.angle=a,o}_pointOnCircle(t,e,i,o){return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class uO{constructor(t,e,i){var o;this.body=t,this.images=e,this.groups=i,this.body.functions.createEdge=I(o=this.create).call(o,this),this.edgesListeners={add:(s,r)=>{this.add(r.items)},update:(s,r)=>{this.update(r.items)},remove:(s,r)=>{this.remove(r.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(s,r,a,h){if(r===s)return .5;{const d=1/(r-s);return Math.max(0,(h-s)*d)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Z(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var t,e,i=this;this.body.emitter.on("_forceDisableDynamicCurves",function(o){let s=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];o==="dynamic"&&(o="continuous");let r=!1;for(const a in i.body.edges)if(Object.prototype.hasOwnProperty.call(i.body.edges,a)){const h=i.body.edges[a],d=i.body.data.edges.get(a);if(d!=null){const l=d.smooth;l!==void 0&&l.enabled===!0&&l.type==="dynamic"&&(o===void 0?h.setOptions({smooth:!1}):h.setOptions({smooth:{type:o}}),r=!0)}}s===!0&&r===!0&&i.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",I(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",I(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",()=>{W(this.edgesListeners,(o,s)=>{this.body.data.edges&&this.body.data.edges.off(s,o)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(t){if(t!==void 0){me.parseOptions(this.options,t,!0,this.defaultOptions,!0);let e=!1;if(t.smooth!==void 0)for(const i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(e=this.body.edges[i].updateEdgeType()||e);if(t.font!==void 0)for(const i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&this.body.edges[i].updateLabelModule();t.hidden===void 0&&t.physics===void 0&&e!==!0||this.body.emitter.emit("_dataChanged")}}setData(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.body.data.edges;if(Hs("id",t))this.body.data.edges=t;else if(Wt(t))this.body.data.edges=new ce,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new ce}if(i&&W(this.edgesListeners,(o,s)=>{i.off(s,o)}),this.body.edges={},this.body.data.edges){W(this.edgesListeners,(s,r)=>{this.body.data.edges.on(r,s)});const o=this.body.data.edges.getIds();this.add(o,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),e===!1&&this.body.emitter.emit("_dataChanged")}add(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.body.edges,o=this.body.data.edges;for(let s=0;s<t.length;s++){const r=t[s],a=i[r];a&&a.disconnect();const h=o.get(r,{showInternalIds:!0});i[r]=this.create(h)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),e===!1&&this.body.emitter.emit("_dataChanged")}update(t){const e=this.body.edges,i=this.body.data.edges;let o=!1;for(let s=0;s<t.length;s++){const r=t[s],a=i.get(r),h=e[r];h!==void 0?(h.disconnect(),o=h.setOptions(a)||o,h.connect()):(this.body.edges[r]=this.create(a),o=!0)}o===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(t.length===0)return;const i=this.body.edges;W(t,o=>{const s=i[o];s!==void 0&&s.remove()}),e&&this.body.emitter.emit("_dataChanged")}refresh(){W(this.body.edges,(t,e)=>{const i=this.body.data.edges.get(e);i!==void 0&&t.setOptions(i)})}create(t){return new me(t,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let t;const e=this.body.nodes,i=this.body.edges;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const o=i[t];o.from=null,o.to=null,o.connect()}}getConnectedNodes(t){const e=[];if(this.body.edges[t]!==void 0){const i=this.body.edges[t];i.fromId!==void 0&&e.push(i.fromId),i.toId!==void 0&&e.push(i.toId)}return e}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const t=[];W(this.body.edges,(e,i)=>{const o=this.body.nodes[e.toId],s=this.body.nodes[e.fromId];o!==void 0&&o.isCluster===!0||s!==void 0&&s.isCluster===!0||o!==void 0&&s!==void 0||t.push(i)}),this.remove(t,!1)}_addMissingEdges(){const t=this.body.data.edges;if(t==null)return;const e=this.body.edges,i=[];tt(t).call(t,(o,s)=>{e[s]===void 0&&i.push(s)}),this.add(i,!0)}}var Zy,Qy,$y,Jy,tb,eb,ib,pO={};function fO(){return $y?Qy:($y=1,function(){if(Zy)return pO;Zy=1;var n=A(),t=Date,e=Y()(t.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return e(new t)}})}(),Qy=G().Date.now)}function gO(){return tb?Jy:(tb=1,Jy=fO())}var dr=L(ib?eb:(ib=1,eb=gO()));class ob{constructor(t,e,i){this.body=t,this.physicsBody=e,this.barnesHutTree,this.setOptions(i),this._rng=Pi("BARNES HUT SOLVER")}setOptions(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let t;const e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,o=i.length,s=this._formBarnesHutTree(e,i);this.barnesHutTree=s;for(let r=0;r<o;r++)t=e[i[r]],t.options.mass>0&&this._getForceContributions(s.root,t)}}_getForceContributions(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}_getForceContribution(t,e){if(t.childrenCount>0){const i=t.centerOfMass.x-e.x,o=t.centerOfMass.y-e.y,s=Math.sqrt(i*i+o*o);s*t.calcSize>this.thetaInversed?this._calculateForces(s,i,o,e,t):t.childrenCount===4?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(s,i,o,e,t)}}_calculateForces(t,e,i,o,s){t===0&&(e=t=.1),this.overlapAvoidanceFactor<1&&o.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));const r=this.options.gravitationalConstant*s.mass*o.options.mass/Math.pow(t,3),a=e*r,h=i*r;this.physicsBody.forces[o.id].x+=a,this.physicsBody.forces[o.id].y+=h}_formBarnesHutTree(t,e){let i;const o=e.length;let s=t[e[0]].x,r=t[e[0]].y,a=t[e[0]].x,h=t[e[0]].y;for(let m=1;m<o;m++){const f=t[e[m]],v=f.x,y=f.y;f.options.mass>0&&(v<s&&(s=v),v>a&&(a=v),y<r&&(r=y),y>h&&(h=y))}const d=Math.abs(a-s)-Math.abs(h-r);d>0?(r-=.5*d,h+=.5*d):(s+=.5*d,a-=.5*d);const l=Math.max(1e-5,Math.abs(a-s)),c=.5*l,u=.5*(s+a),p=.5*(r+h),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:u-c,maxX:u+c,minY:p-c,maxY:p+c},size:l,calcSize:1/l,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(let m=0;m<o;m++)i=t[e[m]],i.options.mass>0&&this._placeInTree(g.root,i);return g}_updateBranchMass(t,e){const i=t.centerOfMass,o=t.mass+e.options.mass,s=1/o;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=s,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=s,t.mass=o;const r=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}_placeInTree(t,e,i){i==1&&i!==void 0||this._updateBranchMass(t,e);const o=t.children.NW.range;let s;s=o.maxX>e.x?o.maxY>e.y?"NW":"SW":o.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,s)}_placeInRegion(t,e,i){const o=t.children[i];switch(o.childrenCount){case 0:o.children.data=e,o.childrenCount=1,this._updateBranchMass(o,e);break;case 1:o.children.data.x===e.x&&o.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(o),this._placeInTree(o,e));break;case 4:this._placeInTree(o,e)}}_splitBranch(t){let e=null;t.childrenCount===1&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),e!=null&&this._placeInTree(t,e)}_insertRegion(t,e){let i,o,s,r;const a=.5*t.size;switch(e){case"NW":i=t.range.minX,o=t.range.minX+a,s=t.range.minY,r=t.range.minY+a;break;case"NE":i=t.range.minX+a,o=t.range.maxX,s=t.range.minY,r=t.range.minY+a;break;case"SW":i=t.range.minX,o=t.range.minX+a,s=t.range.minY+a,r=t.range.maxY;break;case"SE":i=t.range.minX+a,o=t.range.maxX,s=t.range.minY+a,r=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:o,minY:s,maxY:r},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}_debug(t,e){this.barnesHutTree!==void 0&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}_drawBranch(t,e,i){i===void 0&&(i="#FF0000"),t.childrenCount===4&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}class mO{constructor(t,e,i){this._rng=Pi("REPULSION SOLVER"),this.body=t,this.physicsBody=e,this.setOptions(i)}setOptions(t){this.options=t}solve(){let t,e,i,o,s,r,a,h;const d=this.body.nodes,l=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,u=this.options.nodeDistance,p=-2/3/u,g=4/3;for(let m=0;m<l.length-1;m++){a=d[l[m]];for(let f=m+1;f<l.length;f++)h=d[l[f]],t=h.x-a.x,e=h.y-a.y,i=Math.sqrt(t*t+e*e),i===0&&(i=.1*this._rng(),t=i),i<2*u&&(r=i<.5*u?1:p*i+g,r/=i,o=t*r,s=e*r,c[a.id].x-=o,c[a.id].y-=s,c[h.id].x+=o,c[h.id].y+=s)}}}class vO{constructor(t,e,i){this.body=t,this.physicsBody=e,this.setOptions(i)}setOptions(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,o=this.options.nodeDistance;for(let s=0;s<e.length-1;s++){const r=t[e[s]];for(let a=s+1;a<e.length;a++){const h=t[e[a]];if(r.level===h.level){const d=o+this.overlapAvoidanceFactor*((r.shape.radius||0)/2+(h.shape.radius||0)/2),l=h.x-r.x,c=h.y-r.y,u=Math.sqrt(l*l+c*c),p=.05;let g;g=u<d?-Math.pow(p*u,2)+Math.pow(p*d,2):0,u!==0&&(g/=u);const m=l*g,f=c*g;i[r.id].x-=m,i[r.id].y-=f,i[h.id].x+=m,i[h.id].y+=f}}}}}class lr{constructor(t,e,i){this.body=t,this.physicsBody=e,this.setOptions(i)}setOptions(t){this.options=t}solve(){let t,e;const i=this.physicsBody.physicsEdgeIndices,o=this.body.edges;let s,r,a;for(let h=0;h<i.length;h++)e=o[i[h]],e.connected===!0&&e.toId!==e.fromId&&this.body.nodes[e.toId]!==void 0&&this.body.nodes[e.fromId]!==void 0&&(e.edgeType.via!==void 0?(t=e.options.length===void 0?this.options.springLength:e.options.length,s=e.to,r=e.edgeType.via,a=e.from,this._calculateSpringForce(s,r,.5*t),this._calculateSpringForce(r,a,.5*t)):(t=e.options.length===void 0?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}_calculateSpringForce(t,e,i){const o=t.x-e.x,s=t.y-e.y,r=Math.max(Math.sqrt(o*o+s*s),.01),a=this.options.springConstant*(i-r)/r,h=o*a,d=s*a;this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x+=h,this.physicsBody.forces[t.id].y+=d),this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x-=h,this.physicsBody.forces[e.id].y-=d)}}class yO{constructor(t,e,i){this.body=t,this.physicsBody=e,this.setOptions(i)}setOptions(t){this.options=t}solve(){let t,e,i,o,s,r,a,h;const d=this.body.edges,l=.5,c=this.physicsBody.physicsEdgeIndices,u=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces;for(let b=0;b<u.length;b++){const w=u[b];p[w].springFx=0,p[w].springFy=0}for(let b=0;b<c.length;b++)e=d[c[b]],e.connected===!0&&(t=e.options.length===void 0?this.options.springLength:e.options.length,i=e.from.x-e.to.x,o=e.from.y-e.to.y,h=Math.sqrt(i*i+o*o),h=h===0?.01:h,a=this.options.springConstant*(t-h)/h,s=i*a,r=o*a,e.to.level!=e.from.level?(p[e.toId]!==void 0&&(p[e.toId].springFx-=s,p[e.toId].springFy-=r),p[e.fromId]!==void 0&&(p[e.fromId].springFx+=s,p[e.fromId].springFy+=r)):(p[e.toId]!==void 0&&(p[e.toId].x-=l*s,p[e.toId].y-=l*r),p[e.fromId]!==void 0&&(p[e.fromId].x+=l*s,p[e.fromId].y+=l*r)));let g,m;a=1;for(let b=0;b<u.length;b++){const w=u[b];g=Math.min(a,Math.max(-a,p[w].springFx)),m=Math.min(a,Math.max(-a,p[w].springFy)),p[w].x+=g,p[w].y+=m}let f=0,v=0;for(let b=0;b<u.length;b++){const w=u[b];f+=p[w].x,v+=p[w].y}const y=f/u.length,_=v/u.length;for(let b=0;b<u.length;b++){const w=u[b];p[w].x-=y,p[w].y-=_}}}class zo{constructor(t,e,i){this.body=t,this.physicsBody=e,this.setOptions(i)}setOptions(t){this.options=t}solve(){let t,e,i,o;const s=this.body.nodes,r=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces;for(let h=0;h<r.length;h++)o=s[r[h]],t=-o.x,e=-o.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,a,o)}_calculateForces(t,e,i,o,s){const r=t===0?0:this.options.centralGravity/t;o[s.id].x=e*r,o[s.id].y=i*r}}class bO extends ob{constructor(t,e,i){super(t,e,i),this._rng=Pi("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(t,e,i,o,s){t===0&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&o.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));const r=o.edges.length+1,a=this.options.gravitationalConstant*s.mass*o.options.mass*r/Math.pow(t,2),h=e*a,d=i*a;this.physicsBody.forces[o.id].x+=h,this.physicsBody.forces[o.id].y+=d}}class wO extends zo{constructor(t,e,i){super(t,e,i)}_calculateForces(t,e,i,o,s){if(t>0){const r=s.edges.length+1,a=this.options.centralGravity*r*s.options.mass;o[s.id].x=e*a,o[s.id].y=i*a}}}class _O{constructor(t){this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},yt(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(t){if(t!==void 0)if(t===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(t===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Ni(["stabilization"],this.options,t),Mt(this.options,t,"stabilization"),t.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const e=this.options.wind;e&&((typeof e.x!="number"||Fs(e.x))&&(e.x=0),(typeof e.y!="number"||Fs(e.y))&&(e.y=0)),this.timestep=this.options.timestep}this.init()}init(){let t;this.options.solver==="forceAtlas2Based"?(t=this.options.forceAtlas2Based,this.nodesSolver=new bO(this.body,this.physicsBody,t),this.edgesSolver=new lr(this.body,this.physicsBody,t),this.gravitySolver=new wO(this.body,this.physicsBody,t)):this.options.solver==="repulsion"?(t=this.options.repulsion,this.nodesSolver=new mO(this.body,this.physicsBody,t),this.edgesSolver=new lr(this.body,this.physicsBody,t),this.gravitySolver=new zo(this.body,this.physicsBody,t)):this.options.solver==="hierarchicalRepulsion"?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new vO(this.body,this.physicsBody,t),this.edgesSolver=new yO(this.body,this.physicsBody,t),this.gravitySolver=new zo(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new ob(this.body,this.physicsBody,t),this.edgesSolver=new lr(this.body,this.physicsBody,t),this.gravitySolver=new zo(this.body,this.physicsBody,t)),this.modelOptions=t}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){var t;this.physicsEnabled===!0&&this.options.enabled===!0?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0&&(this.viewFunction=I(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}stopSimulation(){let t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.stabilized=!0,t===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,t===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const t=dr();this.physicsTick(),(dr()-t<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&di(()=>{this.body.emitter.emit("stabilized",{iterations:t}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const t=this.body.nodes,e=this.body.edges;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&t[i].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&e[i].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(e[i].id);for(let i=0;i<this.physicsBody.physicsNodeIndices.length;i++){const o=this.physicsBody.physicsNodeIndices[i];this.physicsBody.forces[o]={x:0,y:0},this.physicsBody.velocities[o]===void 0&&(this.physicsBody.velocities[o]={x:0,y:0})}for(const i in this.physicsBody.velocities)t[i]===void 0&&delete this.physicsBody.velocities[i]}revert(){const t=lt(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(let o=0;o<t.length;o++){const s=t[o];e[s]!==void 0?e[s].options.physics===!0&&(this.referenceState[s]={positions:{x:e[s].x,y:e[s].y}},i[s].x=this.previousStates[s].vx,i[s].y=this.previousStates[s].vy,e[s].x=this.previousStates[s].x,e[s].y=this.previousStates[s].y):delete this.previousStates[s]}}_evaluateStepQuality(){let t,e,i;const o=this.body.nodes,s=this.referenceState;for(const r in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,r)&&o[r]!==void 0&&(t=o[r].x-s[r].positions.x,e=o[r].y-s[r].positions.y,i=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),i>.3))return!1;return!0}moveNodes(){const t=this.physicsBody.physicsNodeIndices;let e=0,i=0;for(let o=0;o<t.length;o++){const s=t[o],r=this._performStep(s);e=Math.max(e,r),i+=r}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}calculateComponentVelocity(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(t)>o&&(t=t>0?o:-o),t}_performStep(t){const e=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);const o=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:o.x,vy:o.y},e.options.fixed.x===!1?(o.x=this.calculateComponentVelocity(o.x,i.x,e.options.mass),e.x+=o.x*this.timestep):(i.x=0,o.x=0),e.options.fixed.y===!1?(o.y=this.calculateComponentVelocity(o.y,i.y,e.options.mass),e.y+=o.y*this.timestep):(i.y=0,o.y=0),Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))}_freezeNodes(){const t=this.body.nodes;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].x&&t[e].y){const i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}_restoreFrozenNodes(){const t=this.body.nodes;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.freezeCache[e]!==void 0&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}stabilize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;typeof t!="number"&&(t=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",t)),this.physicsBody.physicsNodeIndices.length!==0?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=t,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,di(()=>this._stabilizationBatch(),0)):this.ready=!0}_startStabilizing(){return this.startedStabilization!==!0&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const t=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,e=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&e();let i=0;for(;t()&&i<this.options.stabilization.updateInterval;)this.physicsTick(),i++;var o;e(),t()?di(I(o=this._stabilizationBatch).call(o,this),0):this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(t){for(let e=0;e<this.physicsBody.physicsNodeIndices.length;e++){const i=this.physicsBody.physicsNodeIndices[e],o=this.body.nodes[i],s=this.physicsBody.forces[i],r=20,a=.03,h=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2)),d=Math.min(Math.max(5,h),15),l=3*d,c=Eo((180-180*Math.min(1,Math.max(0,a*h)))/360,1,1),u={x:o.x+r*s.x,y:o.y+r*s.y};t.lineWidth=d,t.strokeStyle=c,t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(u.x,u.y),t.stroke();const p=Math.atan2(s.y,s.x);t.fillStyle=c,Ly.draw(t,{type:"arrow",point:u,angle:p,length:l}),Bo(t).call(t)}}}var nb,sb,rb,cr,ab,hb,db,lb,cb,xO={};function EO(){return rb?sb:(rb=1,function(){if(nb)return xO;nb=1;var n=A(),t=Y(),e=Se(),i=t([].reverse),o=[1,2];n({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return e(this)&&(this.length=this.length),i(this)}})}(),sb=bt()("Array","reverse"))}function OO(){if(ab)return cr;ab=1;var n=ht(),t=EO(),e=Array.prototype;return cr=function(i){var o=i.reverse;return i===e||n(e,i)&&o===e.reverse?t:o},cr}function CO(){return db?hb:(db=1,hb=OO())}var ub,pb,fb,gb,fi=L(cb?lb:(cb=1,lb=CO()));class Ct{constructor(){}static getRange(t){let e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=1e9,s=-1e9,r=1e9,a=-1e9;if(i.length>0)for(let h=0;h<i.length;h++)e=t[i[h]],r>e.shape.boundingBox.left&&(r=e.shape.boundingBox.left),a<e.shape.boundingBox.right&&(a=e.shape.boundingBox.right),o>e.shape.boundingBox.top&&(o=e.shape.boundingBox.top),s<e.shape.boundingBox.bottom&&(s=e.shape.boundingBox.bottom);return r===1e9&&a===-1e9&&o===1e9&&s===-1e9&&(o=0,s=0,r=0,a=0),{minX:r,maxX:a,minY:o,maxY:s}}static getRangeCore(t){let e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=1e9,s=-1e9,r=1e9,a=-1e9;if(i.length>0)for(let h=0;h<i.length;h++)e=t[i[h]],r>e.x&&(r=e.x),a<e.x&&(a=e.x),o>e.y&&(o=e.y),s<e.y&&(s=e.y);return r===1e9&&a===-1e9&&o===1e9&&s===-1e9&&(o=0,s=0,r=0,a=0),{minX:r,maxX:a,minY:o,maxY:s}}static findCenter(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}static cloneOptions(t,e){const i={};return e===void 0||e==="node"?(Z(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Z(i,t.options,!0),i}}class kO extends it{constructor(t,e,i,o,s,r){super(t,e,i,o,s,r),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(t){const e=this.body.nodes[t];if(this.containedNodes[t]===void 0)throw new Error("node with id: "+t+" not in current cluster");if(!e.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],W(e.edges,i=>{delete this.containedEdges[i.id]}),W(e.containedNodes,(i,o)=>{this.containedNodes[o]=i}),e.containedNodes={},W(e.containedEdges,(i,o)=>{this.containedEdges[o]=i}),e.containedEdges={},W(e.edges,i=>{W(this.edges,o=>{var s,r;const a=ot(s=o.clusteringEdgeReplacingIds).call(s,i.id);a!==-1&&(W(i.clusteringEdgeReplacingIds,h=>{o.clusteringEdgeReplacingIds.push(h),this.body.edges[h].edgeReplacedById=o.id}),re(r=o.clusteringEdgeReplacingIds).call(r,a,1))})}),e.edges=[]}}class SO{constructor(t){this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},yt(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(t,e){t===void 0?t=this._getHubSize():typeof t=="object"&&(e=this._checkOptions(t),t=this._getHubSize());const i=[];for(let o=0;o<this.body.nodeIndices.length;o++){const s=this.body.nodes[this.body.nodeIndices[o]];s.edges.length>=t&&i.push(s.id)}for(let o=0;o<i.length;o++)this.clusterByConnection(i[o],e,!0);this.body.emitter.emit("_dataChanged")}cluster(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(t.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");t=this._checkOptions(t);const i={},o={};W(this.body.nodes,(s,r)=>{s.options&&t.joinCondition(s.options)===!0&&(i[r]=s,W(s.edges,a=>{this.clusteredEdges[a.id]===void 0&&(o[a.id]=a)}))}),this._cluster(i,o,t,e)}clusterByEdgeCount(t,e){let i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];e=this._checkOptions(e);const o=[],s={};let r,a,h;for(let d=0;d<this.body.nodeIndices.length;d++){const l={},c={},u=this.body.nodeIndices[d],p=this.body.nodes[u];if(s[u]===void 0){h=0,a=[];for(let g=0;g<p.edges.length;g++)r=p.edges[g],this.clusteredEdges[r.id]===void 0&&(r.toId!==r.fromId&&h++,a.push(r));if(h===t){const g=function(f){if(e.joinCondition===void 0||e.joinCondition===null)return!0;const v=Ct.cloneOptions(f);return e.joinCondition(v)};let m=!0;for(let f=0;f<a.length;f++){r=a[f];const v=this._getConnectedId(r,u);if(!g(p)){m=!1;break}c[r.id]=r,l[u]=p,l[v]=this.body.nodes[v],s[u]=!0}if(lt(l).length>0&&lt(c).length>0&&m===!0){const f=function(){for(let v=0;v<o.length;++v)for(const y in l)if(o[v].nodes[y]!==void 0)return o[v]}();if(f!==void 0){for(const v in l)f.nodes[v]===void 0&&(f.nodes[v]=l[v]);for(const v in c)f.edges[v]===void 0&&(f.edges[v]=c[v])}else o.push({nodes:l,edges:c})}}}}for(let d=0;d<o.length;d++)this._cluster(o[d].nodes,o[d].edges,e,!1);i===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.clusterByEdgeCount(1,t,e)}clusterBridges(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.clusterByEdgeCount(2,t,e)}clusterByConnection(t,e){var i;let o=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[t]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const s=this.body.nodes[t];(e=this._checkOptions(e,s)).clusterNodeProperties.x===void 0&&(e.clusterNodeProperties.x=s.x),e.clusterNodeProperties.y===void 0&&(e.clusterNodeProperties.y=s.y),e.clusterNodeProperties.fixed===void 0&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=s.options.fixed.x,e.clusterNodeProperties.fixed.y=s.options.fixed.y);const r={},a={},h=s.id,d=Ct.cloneOptions(s);r[h]=s;for(let c=0;c<s.edges.length;c++){const u=s.edges[c];if(this.clusteredEdges[u.id]===void 0){const p=this._getConnectedId(u,h);if(this.clusteredNodes[p]===void 0)if(p!==h)if(e.joinCondition===void 0)a[u.id]=u,r[p]=this.body.nodes[p];else{const g=Ct.cloneOptions(this.body.nodes[p]);e.joinCondition(d,g)===!0&&(a[u.id]=u,r[p]=this.body.nodes[p])}else a[u.id]=u}}const l=Wi(i=lt(r)).call(i,function(c){return r[c].id});for(const c in r){if(!Object.prototype.hasOwnProperty.call(r,c))continue;const u=r[c];for(let p=0;p<u.edges.length;p++){const g=u.edges[p];ot(l).call(l,this._getConnectedId(g,u.id))>-1&&(a[g.id]=g)}}this._cluster(r,a,e,o)}_createClusterEdges(t,e,i,o){let s,r,a,h,d,l;const c=lt(t),u=[];for(let m=0;m<c.length;m++){r=c[m],a=t[r];for(let f=0;f<a.edges.length;f++)s=a.edges[f],this.clusteredEdges[s.id]===void 0&&(s.toId==s.fromId?e[s.id]=s:s.toId==r?(h=i.id,d=s.fromId,l=d):(h=s.toId,d=i.id,l=h),t[l]===void 0&&u.push({edge:s,fromId:d,toId:h}))}const p=[],g=function(m){for(let f=0;f<p.length;f++){const v=p[f],y=m.fromId===v.fromId&&m.toId===v.toId,_=m.fromId===v.toId&&m.toId===v.fromId;if(y||_)return v}return null};for(let m=0;m<u.length;m++){const f=u[m],v=f.edge;let y=g(f);y===null?(y=this._createClusteredEdge(f.fromId,f.toId,v,o),p.push(y)):y.clusteringEdgeReplacingIds.push(v.id),this.body.edges[v.id].edgeReplacedById=y.id,this._backupEdgeOptions(v),v.setOptions({physics:!1})}}_checkOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.clusterEdgeProperties===void 0&&(t.clusterEdgeProperties={}),t.clusterNodeProperties===void 0&&(t.clusterNodeProperties={}),t}_cluster(t,e,i){let o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=[];for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&this.clusteredNodes[l]!==void 0&&s.push(l);for(let l=0;l<s.length;++l)delete t[s[l]];if(lt(t).length==0||lt(t).length==1&&i.clusterNodeProperties.allowSingleNodeCluster!=1)return;let r=Z({},i.clusterNodeProperties);if(i.processProperties!==void 0){const l=[];for(const u in t)if(Object.prototype.hasOwnProperty.call(t,u)){const p=Ct.cloneOptions(t[u]);l.push(p)}const c=[];for(const u in e)if(Object.prototype.hasOwnProperty.call(e,u)&&u.substr(0,12)!=="clusterEdge:"){const p=Ct.cloneOptions(e[u],"edge");c.push(p)}if(r=i.processProperties(r,l,c),!r)throw new Error("The processProperties function does not return properties!")}r.id===void 0&&(r.id="cluster:"+li());const a=r.id;let h;r.label===void 0&&(r.label="cluster"),r.x===void 0&&(h=this._getClusterPosition(t),r.x=h.x),r.y===void 0&&(h===void 0&&(h=this._getClusterPosition(t)),r.y=h.y),r.id=a;const d=this.body.functions.createNode(r,kO);d.containedNodes=t,d.containedEdges=e,d.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[r.id]=d,this._clusterEdges(t,e,r,i.clusterEdgeProperties),r.id=void 0,o===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(t){this.clusteredEdges[t.id]===void 0&&(this.clusteredEdges[t.id]={physics:t.options.physics})}_restoreEdge(t){const e=this.clusteredEdges[t.id];e!==void 0&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}isCluster(t){return this.body.nodes[t]!==void 0?this.body.nodes[t].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(t){const e=lt(t);let i,o=t[e[0]].x,s=t[e[0]].x,r=t[e[0]].y,a=t[e[0]].y;for(let h=1;h<e.length;h++)i=t[e[h]],o=i.x<o?i.x:o,s=i.x>s?i.x:s,r=i.y<r?i.y:r,a=i.y>a?i.y:a;return{x:.5*(o+s),y:.5*(r+a)}}openCluster(t,e){let i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const o=this.body.nodes[t];if(o===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(o.isCluster!==!0||o.containedNodes===void 0||o.containedEdges===void 0)throw new Error("The node:"+t+" is not a valid cluster.");const s=this.findNode(t),r=ot(s).call(s,t)-1;if(r>=0){const l=s[r];return this.body.nodes[l]._openChildCluster(t),delete this.body.nodes[t],void(i===!0&&this.body.emitter.emit("_dataChanged"))}const a=o.containedNodes,h=o.containedEdges;if(e!==void 0&&e.releaseFunction!==void 0&&typeof e.releaseFunction=="function"){const l={},c={x:o.x,y:o.y};for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const g=this.body.nodes[p];l[p]={x:g.x,y:g.y}}const u=e.releaseFunction(c,l);for(const p in a)if(Object.prototype.hasOwnProperty.call(a,p)){const g=this.body.nodes[p];u[p]!==void 0&&(g.x=u[p].x===void 0?o.x:u[p].x,g.y=u[p].y===void 0?o.y:u[p].y)}}else W(a,function(l){l.options.fixed.x===!1&&(l.x=o.x),l.options.fixed.y===!1&&(l.y=o.y)});for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const c=this.body.nodes[l];c.vx=o.vx,c.vy=o.vy,c.setOptions({physics:!0}),delete this.clusteredNodes[l]}const d=[];for(let l=0;l<o.edges.length;l++)d.push(o.edges[l]);for(let l=0;l<d.length;l++){const c=d[l],u=this._getConnectedId(c,t),p=this.clusteredNodes[u];for(let g=0;g<c.clusteringEdgeReplacingIds.length;g++){const m=c.clusteringEdgeReplacingIds[g],f=this.body.edges[m];if(f!==void 0)if(p!==void 0){const v=this.body.nodes[p.clusterId];v.containedEdges[f.id]=f,delete h[f.id];let y=f.fromId,_=f.toId;f.toId==u?_=p.clusterId:y=p.clusterId,this._createClusteredEdge(y,_,f,v.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(f)}c.remove()}for(const l in h)Object.prototype.hasOwnProperty.call(h,l)&&this._restoreEdge(h[l]);delete this.body.nodes[t],i===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(t){const e=[];if(this.isCluster(t)===!0){const i=this.body.nodes[t].containedNodes;for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.push(this.body.nodes[o].id)}return e}findNode(t){const e=[];let i,o=0;for(;this.clusteredNodes[t]!==void 0&&o<100;){if(i=this.body.nodes[t],i===void 0)return[];e.push(i.id),t=this.clusteredNodes[t].clusterId,o++}return i=this.body.nodes[t],i===void 0?[]:(e.push(i.id),fi(e).call(e),e)}updateClusteredNode(t,e){if(t===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(e===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[t]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}updateEdge(t,e){if(t===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(e===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[t]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const i=this.getClusteredEdges(t);for(let o=0;o<i.length;o++)this.body.edges[i[o]].setOptions(e);this.body.emitter.emit("_dataChanged")}getClusteredEdges(t){const e=[];let i=0;for(;t!==void 0&&this.body.edges[t]!==void 0&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return fi(e).call(e),e}getBaseEdge(t){return this.getBaseEdges(t)[0]}getBaseEdges(t){const e=[t],i=[],o=[];let s=0;for(;e.length>0&&s<100;){const r=e.pop();if(r===void 0)continue;const a=this.body.edges[r];if(a===void 0)continue;s++;const h=a.clusteringEdgeReplacingIds;if(h===void 0)o.push(r);else for(let d=0;d<h.length;++d){const l=h[d];ot(e).call(e,h)===-1&&ot(i).call(i,h)===-1&&e.push(l)}i.push(r)}return o}_getConnectedId(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}_getHubSize(){let t=0,e=0,i=0,o=0;for(let h=0;h<this.body.nodeIndices.length;h++){const d=this.body.nodes[this.body.nodeIndices[h]];d.edges.length>o&&(o=d.edges.length),t+=d.edges.length,e+=Math.pow(d.edges.length,2),i+=1}t/=i,e/=i;const s=e-Math.pow(t,2),r=Math.sqrt(s);let a=Math.floor(t+2*r);return a>o&&(a=o),a}_createClusteredEdge(t,e,i,o,s){const r=Ct.cloneOptions(i,"edge");Z(r,o),r.from=t,r.to=e,r.id="clusterEdge:"+li(),s!==void 0&&Z(r,s);const a=this.body.functions.createEdge(r);return a.clusteringEdgeReplacingIds=[i.id],a.connect(),this.body.edges[a.id]=a,a}_clusterEdges(t,e,i,o){if(e instanceof me){const s=e,r={};r[s.id]=s,e=r}if(t instanceof it){const s=t,r={};r[s.id]=s,t=r}if(i==null)throw new Error("_clusterEdges: parameter clusterNode required");o===void 0&&(o=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,o);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&this.body.edges[s]!==void 0){const r=this.body.edges[s];this._backupEdgeOptions(r),r.setOptions({physics:!1})}for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(this.clusteredNodes[s]={clusterId:i.id,node:this.body.nodes[s]},this.body.nodes[s].setOptions({physics:!1}))}_getClusterNodeForNode(t){if(t===void 0)return;const e=this.clusteredNodes[t];if(e===void 0)return;const i=e.clusterId;return i!==void 0?this.body.nodes[i]:void 0}_filter(t,e){const i=[];return W(t,o=>{e(o)&&i.push(o)}),i}_updateState(){let t;const e=[],i={},o=a=>{W(this.body.nodes,h=>{h.isCluster===!0&&a(h)})};for(t in this.clusteredNodes)Object.prototype.hasOwnProperty.call(this.clusteredNodes,t)&&this.body.nodes[t]===void 0&&e.push(t);o(function(a){for(let h=0;h<e.length;h++)delete a.containedNodes[e[h]]});for(let a=0;a<e.length;a++)delete this.clusteredNodes[e[a]];W(this.clusteredEdges,a=>{const h=this.body.edges[a];h!==void 0&&h.endPointsValid()||(i[a]=a)}),o(function(a){W(a.containedEdges,(h,d)=>{h.endPointsValid()||i[d]||(i[d]=d)})}),W(this.body.edges,(a,h)=>{let d=!0;const l=a.clusteringEdgeReplacingIds;if(l!==void 0){let c=0;W(l,u=>{const p=this.body.edges[u];p!==void 0&&p.endPointsValid()&&(c+=1)}),d=c>0}a.endPointsValid()&&d||(i[h]=h)}),o(a=>{W(i,h=>{delete a.containedEdges[h],W(a.edges,(d,l)=>{d.id!==h?d.clusteringEdgeReplacingIds=this._filter(d.clusteringEdgeReplacingIds,function(c){return!i[c]}):a.edges[l]=null}),a.edges=this._filter(a.edges,function(d){return d!==null})})}),W(i,a=>{delete this.clusteredEdges[a]}),W(i,a=>{delete this.body.edges[a]}),W(lt(this.body.edges),a=>{const h=this.body.edges[a],d=this._isClusteredNode(h.fromId)||this._isClusteredNode(h.toId);if(d!==this._isClusteredEdge(h.id))if(d){const l=this._getClusterNodeForNode(h.fromId);l!==void 0&&this._clusterEdges(this.body.nodes[h.fromId],h,l);const c=this._getClusterNodeForNode(h.toId);c!==void 0&&this._clusterEdges(this.body.nodes[h.toId],h,c)}else delete this._clusterEdges[a],this._restoreEdge(h)});let s=!1,r=!0;for(;r;){const a=[];o(function(h){const d=lt(h.containedNodes).length,l=h.options.allowSingleNodeCluster===!0;(l&&d<1||!l&&d<2)&&a.push(h.id)});for(let h=0;h<a.length;++h)this.openCluster(a[h],{},!1);r=a.length>0,s=s||r}s&&this._updateState()}_isClusteredNode(t){return this.clusteredNodes[t]!==void 0}_isClusteredEdge(t){return this.clusteredEdges[t]!==void 0}}class TO{constructor(t,e){this.body=t,this.canvas=e,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},yt(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var t;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=di(()=>{var e;this.zooming=!1,I(e=this._requestRedraw).call(e,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",I(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(t){t!==void 0&&ke(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}_startRendering(){var t;this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0&&(this.requestAnimationFrameRequestId=window.requestAnimationFrame(I(t=this._renderStep).call(t,this),this.simulationInterval))}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const e={drawExternalLabels:null};this.canvas.frame.canvas.width!==0&&this.canvas.frame.canvas.height!==0||this.canvas.setSize(),this.canvas.setTransform();const i=this.canvas.getContext(),o=this.canvas.frame.canvas.clientWidth,s=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,o,s),this.canvas.frame.clientWidth===0)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:r}=this._drawNodes(i,t);e.drawExternalLabels=r}t===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(i),e.drawExternalLabels!=null&&e.drawExternalLabels(),t===!1&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),t===!0&&i.clearRect(0,0,o,s)}}_resizeNodes(){this.canvas.setTransform();const t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);const e=this.body.nodes;let i;for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i=e[o],i.resize(t),i.updateBoundingBox(t,i.selected));t.restore()}_drawNodes(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.body.nodes,o=this.body.nodeIndices;let s;const r=[],a=[],h=this.canvas.DOMtoCanvas({x:-20,y:-20}),d=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),l={top:h.y,left:h.x,bottom:d.y,right:d.x},c=[];for(let m=0;m<o.length;m++)if(s=i[o[m]],s.hover)a.push(o[m]);else if(s.isSelected())r.push(o[m]);else if(e===!0){const f=s.draw(t);f.drawExternalLabel!=null&&c.push(f.drawExternalLabel)}else if(s.isBoundingBoxOverlappingWith(l)===!0){const f=s.draw(t);f.drawExternalLabel!=null&&c.push(f.drawExternalLabel)}else s.updateBoundingBox(t,s.selected);let u;const p=r.length,g=a.length;for(u=0;u<p;u++){s=i[r[u]];const m=s.draw(t);m.drawExternalLabel!=null&&c.push(m.drawExternalLabel)}for(u=0;u<g;u++){s=i[a[u]];const m=s.draw(t);m.drawExternalLabel!=null&&c.push(m.drawExternalLabel)}return{drawExternalLabels:()=>{for(const m of c)m()}}}_drawEdges(t){const e=this.body.edges,i=this.body.edgeIndices;for(let o=0;o<i.length;o++){const s=e[i[o]];s.connected===!0&&s.draw(t)}}_drawArrows(t){const e=this.body.edges,i=this.body.edgeIndices;for(let o=0;o<i.length;o++){const s=e[i[o]];s.connected===!0&&s.drawArrows(t)}}_drawSelectionBox(t){if(this.body.selectionBox.show){t.beginPath();const e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}function DO(){return pb?ub:(pb=1,Bf(),ub=G().setInterval)}var MO=L(gb?fb:(gb=1,fb=DO()));function Fo(n,t){t.inputHandler=function(e){e.isFirst&&t(e)},n.on("hammer.input",t.inputHandler)}function mb(n,t){return t.inputHandler=function(e){e.isFinal&&t(e)},n.on("hammer.input",t.inputHandler)}class IO{constructor(t){this.body=t,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},yt(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var t;this.body.emitter.once("resize",e=>{e.width!==0&&(this.body.view.translation.x=.5*e.width),e.height!==0&&(this.body.view.translation.y=.5*e.height)}),this.body.emitter.on("setSize",I(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(t){if(t!==void 0&&ke(["width","height","autoResize"],this.options,t),this._cleanUp(),this.options.autoResize===!0){var e;if(window.ResizeObserver){const o=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:s}=this;o.observe(s),this._cleanupCallbacks.push(()=>{o.unobserve(s)})}else{const o=MO(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(o)})}const i=I(e=this._onResize).call(e,this);window.addEventListener("resize",i),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",i)})}}_cleanUp(){var t,e,i;tt(t=fi(e=re(i=this._cleanupCallbacks).call(i,0)).call(e)).call(t,o=>{try{o()}catch(s){console.error(s)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let i=this.cameraState.scale;t!=1&&e!=1?i=.5*this.cameraState.scale*(t+e):t!=1?i=this.cameraState.scale*t:e!=1&&(i=this.cameraState.scale*e),this.body.view.scale=i;const o=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),s={x:o.x-this.cameraState.position.x,y:o.y-this.cameraState.position.y};this.body.view.translation.x+=s.x*this.body.view.scale,this.body.view.translation.y+=s.y*this.body.view.scale}}_prepareValue(t){if(typeof t=="number")return t+"px";if(typeof t=="string"){if(ot(t).call(t,"%")!==-1||ot(t).call(t,"px")!==-1)return t;if(ot(t).call(t,"%")===-1)return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new te(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:te.DIRECTION_ALL}),Fo(this.hammer,t=>{this.body.eventListeners.onTouch(t)}),this.hammer.on("tap",t=>{this.body.eventListeners.onTap(t)}),this.hammer.on("doubletap",t=>{this.body.eventListeners.onDoubleTap(t)}),this.hammer.on("press",t=>{this.body.eventListeners.onHold(t)}),this.hammer.on("panstart",t=>{this.body.eventListeners.onDragStart(t)}),this.hammer.on("panmove",t=>{this.body.eventListeners.onDrag(t)}),this.hammer.on("panend",t=>{this.body.eventListeners.onDragEnd(t)}),this.hammer.on("pinch",t=>{this.body.eventListeners.onPinch(t)}),this.frame.canvas.addEventListener("wheel",t=>{this.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("mousemove",t=>{this.body.eventListeners.onMouseMove(t)}),this.frame.canvas.addEventListener("contextmenu",t=>{this.body.eventListeners.onContext(t)}),this.hammerFrame=new te(this.frame),mb(this.hammerFrame,t=>{this.body.eventListeners.onRelease(t)})}setSize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);let i=!1;const o=this.frame.canvas.width,s=this.frame.canvas.height,r=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(r),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{const a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),h=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===a&&this.frame.canvas.height===h||this._getCameraState(r),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,i=!0),this.frame.canvas.height!==h&&(this.frame.canvas.height=h,i=!0)}return i===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(o/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");let e=1;return typeof window<"u"&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const t=this.getContext();if(t===void 0)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(t){return(t-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(t){return t*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(t){return(t-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(t){return t*this.body.view.scale+this.body.view.translation.y}canvasToDOM(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}DOMtoCanvas(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}class PO{constructor(t,e){var i,o;this.body=t,this.canvas=e,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",I(i=this.fit).call(i,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",I(o=this.releaseNode).call(o,this))}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=t}fit(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t=function(h,d){const l=yt({nodes:d,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},h??{});if(!Wt(l.nodes))throw new TypeError("Nodes has to be an array of ids.");if(l.nodes.length===0&&(l.nodes=d),!(typeof l.minZoomLevel=="number"&&l.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof l.maxZoomLevel=="number"&&l.minZoomLevel<=l.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return l}(t,this.body.nodeIndices);const i=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;let s,r;if(i===0||o===0)r=1,s=Ct.getRange(this.body.nodes,t.nodes);else if(e===!0){let h=0;for(const d in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,d)&&this.body.nodes[d].predefinedPosition===!0&&(h+=1);if(h>.5*this.body.nodeIndices.length)return void this.fit(t,!1);s=Ct.getRange(this.body.nodes,t.nodes),r=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,r*=Math.min(i/600,o/600)}else{this.body.emitter.emit("_resizeNodes"),s=Ct.getRange(this.body.nodes,t.nodes);const h=i/(1.1*Math.abs(s.maxX-s.minX)),d=o/(1.1*Math.abs(s.maxY-s.minY));r=h<=d?h:d}r>t.maxZoomLevel?r=t.maxZoomLevel:r<t.minZoomLevel&&(r=t.minZoomLevel);const a={position:Ct.findCenter(s),scale:r,animation:t.animation};this.moveTo(a)}focus(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[t]!==void 0){const i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.error("Node: "+t+" cannot be found.")}moveTo(t){if(t!==void 0){if(t.offset!=null){if(t.offset.x!=null){if(t.offset.x=+t.offset.x,!Me(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(t.offset.y!=null){if(t.offset.y=+t.offset.y,!Me(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(t.position!=null){if(t.position.x!=null){if(t.position.x=+t.position.x,!Me(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(t.position.y!=null){if(t.position.y=+t.position.y,!Me(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(t.scale!=null){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;t.animation===void 0&&(t.animation={duration:0}),t.animation===!1&&(t.animation={duration:0}),t.animation===!0&&(t.animation={}),t.animation.duration===void 0&&(t.animation.duration=1e3),t.animation.easingFunction===void 0&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}animateView(t){if(t===void 0)return;this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),t.locked===!0&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;const e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=e.x-t.position.x,o=e.y-t.position.y;var s,r;this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+t.offset.x,y:this.sourceTranslation.y+o*this.targetScale+t.offset.y},t.animation.duration===0?this.lockedOnNodeId!=null?(this.viewFunction=I(s=this._lockedRedraw).call(s,this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=I(r=this._transitionRedraw).call(r,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}_lockedRedraw(){const t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),o=i.x-t,s=i.y-e,r=this.body.view.translation,a={x:r.x+o*this.body.view.scale+this.lockedOnNodeOffset.x,y:r.y+s*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=t===!0?1:this.easingTime;const e=Kd[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*e,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*e,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*e},this.easingTime>=1){var i;this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null&&(this.viewFunction=I(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function ur(n){var t,e=n&&n.preventDefault||!1,i=n&&n.container||window,o={},s={keydown:{},keyup:{}},r={};for(t=97;t<=122;t++)r[String.fromCharCode(t)]={code:t-97+65,shift:!1};for(t=65;t<=90;t++)r[String.fromCharCode(t)]={code:t,shift:!0};for(t=0;t<=9;t++)r[""+t]={code:48+t,shift:!1};for(t=1;t<=12;t++)r["F"+t]={code:111+t,shift:!1};for(t=0;t<=9;t++)r["num"+t]={code:96+t,shift:!1};r["num*"]={code:106,shift:!1},r["num+"]={code:107,shift:!1},r["num-"]={code:109,shift:!1},r["num/"]={code:111,shift:!1},r["num."]={code:110,shift:!1},r.left={code:37,shift:!1},r.up={code:38,shift:!1},r.right={code:39,shift:!1},r.down={code:40,shift:!1},r.space={code:32,shift:!1},r.enter={code:13,shift:!1},r.shift={code:16,shift:void 0},r.esc={code:27,shift:!1},r.backspace={code:8,shift:!1},r.tab={code:9,shift:!1},r.ctrl={code:17,shift:!1},r.alt={code:18,shift:!1},r.delete={code:46,shift:!1},r.pageup={code:33,shift:!1},r.pagedown={code:34,shift:!1},r["="]={code:187,shift:!1},r["-"]={code:189,shift:!1},r["]"]={code:221,shift:!1},r["["]={code:219,shift:!1};var a=function(l){d(l,"keydown")},h=function(l){d(l,"keyup")},d=function(l,c){if(s[c][l.keyCode]!==void 0){for(var u=s[c][l.keyCode],p=0;p<u.length;p++)(u[p].shift===void 0||u[p].shift==1&&l.shiftKey==1||u[p].shift==0&&l.shiftKey==0)&&u[p].fn(l);e==1&&l.preventDefault()}};return o.bind=function(l,c,u){if(u===void 0&&(u="keydown"),r[l]===void 0)throw new Error("unsupported key: "+l);s[u][r[l].code]===void 0&&(s[u][r[l].code]=[]),s[u][r[l].code].push({fn:c,shift:r[l].shift})},o.bindAll=function(l,c){for(var u in c===void 0&&(c="keydown"),r)r.hasOwnProperty(u)&&o.bind(u,l,c)},o.getKey=function(l){for(var c in r)if(r.hasOwnProperty(c)&&(l.shiftKey==1&&r[c].shift==1&&l.keyCode==r[c].code||l.shiftKey==0&&r[c].shift==0&&l.keyCode==r[c].code||l.keyCode==r[c].code&&c=="shift"))return c;return"unknown key, currently not supported"},o.unbind=function(l,c,u){if(u===void 0&&(u="keydown"),r[l]===void 0)throw new Error("unsupported key: "+l);if(c!==void 0){var p=[],g=s[u][r[l].code];if(g!==void 0)for(var m=0;m<g.length;m++)g[m].fn==c&&g[m].shift==r[l].shift||p.push(s[u][r[l].code][m]);s[u][r[l].code]=p}else s[u][r[l].code]=[]},o.reset=function(){s={keydown:{},keyup:{}}},o.destroy=function(){s={keydown:{},keyup:{}},i.removeEventListener("keydown",a,!0),i.removeEventListener("keyup",h,!0)},i.addEventListener("keydown",a,!0),i.addEventListener("keyup",h,!0),o}var vb=Object.freeze({__proto__:null,default:ur});class NO{constructor(t,e){this.body=t,this.canvas=e,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(t){t!==void 0&&(this.options=t,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],e=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let r=0;r<t.length;r++){this.navigationDOM[t[r]]=document.createElement("div"),this.navigationDOM[t[r]].className="vis-button vis-"+t[r],this.navigationDOM.wrapper.appendChild(this.navigationDOM[t[r]]);const a=new te(this.navigationDOM[t[r]]);var i,o;e[r]==="_fit"?Fo(a,I(i=this._fit).call(i,this)):Fo(a,I(o=this.bindToRedraw).call(o,this,e[r])),this.navigationHammers.push(a)}const s=new te(this.canvas.frame);mb(s,()=>{this._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}bindToRedraw(t){var e;this.boundFunctions[t]===void 0&&(this.boundFunctions[t]=I(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}unbindFromRedraw(t){this.boundFunctions[t]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,o=e/t,s=(1-o)*this.canvas.canvasViewCenter.x+i.x*o,r=(1-o)*this.canvas.canvasViewCenter.y+i.y*o;this.body.view.scale=e,this.body.view.translation={x:s,y:r},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,o=e/t,s=(1-o)*this.canvas.canvasViewCenter.x+i.x*o,r=(1-o)*this.canvas.canvasViewCenter.y+i.y*o;this.body.view.scale=e,this.body.view.translation={x:s,y:r},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){var t,e,i,o,s,r,a,h,d,l,c,u,p,g,m,f,v,y,_,b,w,E,D,O;this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=ur({container:window,preventDefault:!0}):this.keycharm=ur({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0&&(I(t=this.keycharm).call(t,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),I(e=this.keycharm).call(e,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),I(i=this.keycharm).call(i,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),I(o=this.keycharm).call(o,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),I(s=this.keycharm).call(s,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),I(r=this.keycharm).call(r,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),I(a=this.keycharm).call(a,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),I(h=this.keycharm).call(h,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),I(d=this.keycharm).call(d,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),I(l=this.keycharm).call(l,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),I(c=this.keycharm).call(c,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),I(u=this.keycharm).call(u,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),I(p=this.keycharm).call(p,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),I(g=this.keycharm).call(g,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),I(m=this.keycharm).call(m,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),I(f=this.keycharm).call(f,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),I(v=this.keycharm).call(v,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),I(y=this.keycharm).call(y,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),I(_=this.keycharm).call(_,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),I(b=this.keycharm).call(b,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),I(w=this.keycharm).call(w,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),I(E=this.keycharm).call(E,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),I(D=this.keycharm).call(D,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),I(O=this.keycharm).call(O,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")))}}class BO{constructor(t,e,i){var o,s,r,a,h,d,l,c,u,p,g,m,f;this.body=t,this.canvas=e,this.selectionHandler=i,this.navigationHandler=new NO(t,e),this.body.eventListeners.onTap=I(o=this.onTap).call(o,this),this.body.eventListeners.onTouch=I(s=this.onTouch).call(s,this),this.body.eventListeners.onDoubleTap=I(r=this.onDoubleTap).call(r,this),this.body.eventListeners.onHold=I(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=I(h=this.onDragStart).call(h,this),this.body.eventListeners.onDrag=I(d=this.onDrag).call(d,this),this.body.eventListeners.onDragEnd=I(l=this.onDragEnd).call(l,this),this.body.eventListeners.onMouseWheel=I(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=I(u=this.onPinch).call(u,this),this.body.eventListeners.onMouseMove=I(p=this.onMouseMove).call(p,this),this.body.eventListeners.onRelease=I(g=this.onRelease).call(g,this),this.body.eventListeners.onContext=I(m=this.onContext).call(m,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=I(f=this.getPointer).call(f,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},yt(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(t){t!==void 0&&(Ni(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),Mt(this.options,t,"keyboard"),t.tooltip&&(yt(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=xo(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(t){return{x:t.x-qd(this.canvas.frame.canvas),y:t.y-Ud(this.canvas.frame.canvas)}}onTouch(t){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(t){const e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e)}onDoubleTap(t){const e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,e)}onHold(t){const e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e),this.selectionHandler.generateClickEvent("hold",t,e)}onRelease(t){if(new Date().valueOf()-this.touchTime>10){const e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,e),this.touchTime=new Date().valueOf()}}onContext(t){const e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,e)}checkSelectionChanges(t){(arguments.length>1&&arguments[1]!==void 0&&arguments[1])===!0?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}_determineDifference(t,e){const i=function(o,s){const r=[];for(let a=0;a<o.length;a++){const h=o[a];ot(s).call(s,h)===-1&&r.push(h)}return r};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}onDragStart(t){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(t);const e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=yt({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;const i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(e!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=e.id,e.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[e.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);for(const i of this.selectionHandler.getSelectedNodes()){const o={id:i.id,node:i,x:i.x,y:i.y,xFixed:i.options.fixed.x,yFixed:i.options.fixed.y};i.options.fixed.x=!0,i.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}onDrag(t){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const e=this.getPointer(t.center),i=this.drag.selection;if(i&&i.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",t,e);const o=e.x-this.drag.pointer.x,s=e.y-this.drag.pointer.y;tt(i).call(i,r=>{const a=r.node;r.xFixed===!1&&(a.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(r.x)+o)),r.yFixed===!1&&(a.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(r.y)+s))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,e,void 0,!0),this.drag.pointer===void 0)return void this.onDragStart(t);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(e.x),y:this.canvas._YconvertDOMtoCanvas(e.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,e,void 0,!0),this.drag.pointer===void 0)return void this.onDragStart(t);const o=e.x-this.drag.pointer.x,s=e.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+o,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(t){if(this.drag.dragging=!1,this.body.selectionBox.show){var e;this.body.selectionBox.show=!1;const i=this.body.selectionBox.position,o={minX:Math.min(i.start.x,i.end.x),minY:Math.min(i.start.y,i.end.y),maxX:Math.max(i.start.x,i.end.x),maxY:Math.max(i.start.y,i.end.y)},s=ie(e=this.body.nodeIndices).call(e,a=>{const h=this.body.nodes[a];return h.x>=o.minX&&h.x<=o.maxX&&h.y>=o.minY&&h.y<=o.maxY});tt(s).call(s,a=>this.selectionHandler.selectObject(this.body.nodes[a]));const r=this.getPointer(t.center);this.selectionHandler.commitAndEmit(r,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const i=this.drag.selection;i&&i.length?(tt(i).call(i,function(o){o.node.options.fixed.x=o.xFixed,o.node.options.fixed.y=o.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(t){const e=this.getPointer(t.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const i=this.pinch.scale*t.scale;this.zoom(i,e)}zoom(t,e){if(this.options.zoomView===!0){const i=this.body.view.scale;let o;t<1e-5&&(t=1e-5),t>10&&(t=10),this.drag!==void 0&&this.drag.dragging===!0&&(o=this.canvas.DOMtoCanvas(this.drag.pointer));const s=this.body.view.translation,r=t/i,a=(1-r)*e.x+s.x*r,h=(1-r)*e.y+s.y*r;if(this.body.view.scale=t,this.body.view.translation={x:a,y:h},o!=null){const d=this.canvas.canvasToDOM(o);this.drag.pointer.x=d.x,this.drag.pointer.y=d.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}onMouseWheel(t){if(this.options.zoomView===!0){if(t.deltaY!==0){let e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);const i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,i)}t.preventDefault()}}onMouseMove(t){const e=this.getPointer({x:t.clientX,y:t.clientY});let i=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(e),this.popup.hidden===!1&&(i=!0,this.popup.setPosition(e.x+3,e.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),i===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=di(()=>this._checkShowPopup(e),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(t,e)}_checkShowPopup(t){const e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),o={left:e,top:i,right:e,bottom:i},s=this.popupObj===void 0?void 0:this.popupObj.id;let r=!1,a="node";if(this.popupObj===void 0){const h=this.body.nodeIndices,d=this.body.nodes;let l;const c=[];for(let u=0;u<h.length;u++)l=d[h[u]],l.isOverlappingWith(o)===!0&&(r=!0,l.getTitle()!==void 0&&c.push(h[u]));c.length>0&&(this.popupObj=d[c[c.length-1]],r=!0)}if(this.popupObj===void 0&&r===!1){const h=this.body.edgeIndices,d=this.body.edges;let l;const c=[];for(let u=0;u<h.length;u++)l=d[h[u]],l.isOverlappingWith(o)===!0&&l.connected===!0&&l.getTitle()!==void 0&&c.push(h[u]);c.length>0&&(this.popupObj=d[c[c.length-1]],a="edge")}this.popupObj!==void 0?this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new tl(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(t){const e=this.selectionHandler._pointerToPositionObject(t);let i=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e),i===!0)){const o=this.selectionHandler.getNodeAt(t);i=o!==void 0&&o.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(t)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));i===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var yb,bb,zO={};function FO(){return bb||(bb=1,yb||(yb=1,Ms()("Set",function(n){return function(){return n(this,arguments.length?arguments[0]:void 0)}},xp()))),zO}var pr,wb,_b,xb,fr,Eb,gr,Ob,mr,Cb,kb,Sb,Tb,Db,Mb,Ib,Pb,Nb,Bb,zb,Fb,AO={};function Pe(){if(wb)return pr;wb=1;var n=Ue(),t=TypeError;return pr=function(e){if(typeof e=="object"&&"size"in e&&"has"in e&&"add"in e&&"delete"in e&&"keys"in e)return e;throw new t(n(e)+" is not a set")},pr}function Ne(){if(xb)return _b;xb=1;var n=Tt(),t=Tp(),e=n("Set"),i=e.prototype;return _b={Set:e,add:t("add",1),has:t("has",1),remove:t("delete",1),proto:i}}function Be(){if(Eb)return fr;Eb=1;var n=kt();return fr=function(t,e,i){for(var o,s,r=i?t:t.iterator,a=t.next;!(o=n(a,r)).done;)if((s=e(o.value))!==void 0)return s},fr}function Gi(){if(Ob)return gr;Ob=1;var n=Be();return gr=function(t,e,i){return i?n(t.keys(),e,!0):t.forEach(e)},gr}function vr(){if(Cb)return mr;Cb=1;var n=Ne(),t=Gi(),e=n.Set,i=n.add;return mr=function(o){var s=new e;return t(o,function(r){i(s,r)}),s},mr}function Ki(){return Sb||(Sb=1,kb=function(n){return n.size}),kb}function jO(){return Db?Tb:(Db=1,Tb=function(n){return{iterator:n,next:n.next,done:!1}})}function ze(){if(Ib)return Mb;Ib=1;var n=Kt(),t=Ut(),e=kt(),i=Ke(),o=jO(),s="Invalid size",r=RangeError,a=TypeError,h=Math.max,d=function(l,c){this.set=l,this.size=h(c,0),this.has=n(l.has),this.keys=n(l.keys)};return d.prototype={getIterator:function(){return o(t(e(this.keys,this.set)))},includes:function(l){return e(this.has,this.set,l)}},Mb=function(l){t(l);var c=+l.size;if(c!=c)throw new a(s);var u=i(c);if(u<0)throw new r(s);return new d(l,u)}}function RO(){if(Nb)return Pb;Nb=1;var n=Pe(),t=Ne(),e=vr(),i=Ki(),o=ze(),s=Gi(),r=Be(),a=t.has,h=t.remove;return Pb=function(d){var l=n(this),c=o(d),u=e(l);return i(l)<=c.size?s(l,function(p){c.includes(p)&&h(u,p)}):r(c.getIterator(),function(p){a(u,p)&&h(u,p)}),u}}function Fe(){return zb?Bb:(zb=1,Bb=function(){return!1})}var Ab,jb,Rb,LO={};function HO(){if(jb)return Ab;jb=1;var n=Pe(),t=Ne(),e=Ki(),i=ze(),o=Gi(),s=Be(),r=t.Set,a=t.add,h=t.has;return Ab=function(d){var l=n(this),c=i(d),u=new r;return e(l)>c.size?s(c.getIterator(),function(p){h(l,p)&&a(u,p)}):o(l,function(p){c.includes(p)&&a(u,p)}),u}}var yr,Lb,Hb,WO={};function VO(){if(Lb)return yr;Lb=1;var n=Pe(),t=Ne().has,e=Ki(),i=ze(),o=Gi(),s=Be(),r=Ts();return yr=function(a){var h=n(this),d=i(a);if(e(h)<=d.size)return o(h,function(c){if(d.includes(c))return!1},!0)!==!1;var l=d.getIterator();return s(l,function(c){if(t(h,c))return r(l,"normal",!1)})!==!1},yr}var Wb,Vb,qb,qO={};function UO(){if(Vb)return Wb;Vb=1;var n=Pe(),t=Ki(),e=Gi(),i=ze();return Wb=function(o){var s=n(this),r=i(o);return!(t(s)>r.size)&&e(s,function(a){if(!r.includes(a))return!1},!0)!==!1}}var br,Ub,Yb,YO={};function XO(){if(Ub)return br;Ub=1;var n=Pe(),t=Ne().has,e=Ki(),i=ze(),o=Be(),s=Ts();return br=function(r){var a=n(this),h=i(r);if(e(a)<h.size)return!1;var d=h.getIterator();return o(d,function(l){if(!t(a,l))return s(d,"normal",!1)})!==!1},br}var Xb,Gb,Kb,Zb,Qb,GO={};function KO(){if(Gb)return Xb;Gb=1;var n=Pe(),t=Ne(),e=vr(),i=ze(),o=Be(),s=t.add,r=t.has,a=t.remove;return Xb=function(h){var d=n(this),l=i(h).getIterator(),c=e(d);return o(l,function(u){r(d,u)?a(c,u):s(c,u)}),c}}function $b(){return Zb?Kb:(Zb=1,Kb=function(n){try{var t=new Set,e={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}},i=t[n](e);return i.size===1&&i.values().next().value===4}catch{return!1}})}var wr,Jb,t0,e0,i0,o0,n0,s0,r0,ZO={};function QO(){if(Jb)return wr;Jb=1;var n=Pe(),t=Ne().add,e=vr(),i=ze(),o=Be();return wr=function(s){var r=n(this),a=i(s).getIterator(),h=e(r);return o(a,function(d){t(h,d)}),h},wr}function $O(){return i0?e0:(i0=1,ai(),FO(),function(){if(Fb)return AO;Fb=1;var n=A(),t=RO(),e=U(),i=!Fe()("difference",function(o){return o.size===0})||e(function(){var o={size:1,has:function(){return!0},keys:function(){var r=0;return{next:function(){var a=r++>1;return s.has(1)&&s.clear(),{done:a,value:2}}}}},s=new Set([1,2,3,4]);return s.difference(o).size!==3});n({target:"Set",proto:!0,real:!0,forced:i},{difference:t})}(),function(){if(Rb)return LO;Rb=1;var n=A(),t=U(),e=HO();n({target:"Set",proto:!0,real:!0,forced:!Fe()("intersection",function(i){return i.size===2&&i.has(1)&&i.has(2)})||t(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"})},{intersection:e})}(),function(){if(Hb)return WO;Hb=1;var n=A(),t=VO();n({target:"Set",proto:!0,real:!0,forced:!Fe()("isDisjointFrom",function(e){return!e})},{isDisjointFrom:t})}(),function(){if(qb)return qO;qb=1;var n=A(),t=UO();n({target:"Set",proto:!0,real:!0,forced:!Fe()("isSubsetOf",function(e){return e})},{isSubsetOf:t})}(),function(){if(Yb)return YO;Yb=1;var n=A(),t=XO();n({target:"Set",proto:!0,real:!0,forced:!Fe()("isSupersetOf",function(e){return!e})},{isSupersetOf:t})}(),function(){if(Qb)return GO;Qb=1;var n=A(),t=KO(),e=$b();n({target:"Set",proto:!0,real:!0,forced:!Fe()("symmetricDifference")||!e("symmetricDifference")},{symmetricDifference:t})}(),function(){if(t0)return ZO;t0=1;var n=A(),t=QO(),e=$b();n({target:"Set",proto:!0,real:!0,forced:!Fe()("union")||!e("union")},{union:t})}(),Ns(),e0=G().Set)}function JO(){if(n0)return o0;n0=1;var n=$O();return hi(),o0=n}var a0,h0,d0,l0,c0,u0,p0,f0,g0,m0,ve=L(r0?s0:(r0=1,s0=JO())),tC={},eC={};function iC(){if(h0)return a0;h0=1;var n=Y(),t=Ps(),e=So().getWeakData,i=Ds(),o=Ut(),s=We(),r=ft(),a=To(),h=ae(),d=vt(),l=Te(),c=l.set,u=l.getterFor,p=h.find,g=h.findIndex,m=n([].splice),f=0,v=function(b){return b.frozen||(b.frozen=new y)},y=function(){this.entries=[]},_=function(b,w){return p(b.entries,function(E){return E[0]===w})};return y.prototype={get:function(b){var w=_(this,b);if(w)return w[1]},has:function(b){return!!_(this,b)},set:function(b,w){var E=_(this,b);E?E[1]=w:this.entries.push([b,w])},delete:function(b){var w=g(this.entries,function(E){return E[0]===b});return~w&&m(this.entries,w,1),!!~w}},a0={getConstructor:function(b,w,E,D){var O=b(function(C,T){i(C,k),c(C,{type:w,id:f++,frozen:null}),s(T)||a(T,C[D],{that:C,AS_ENTRIES:E})}),k=O.prototype,B=u(w),S=function(C,T,N){var R=B(C),Q=e(o(T),!0);return Q===!0?v(R).set(T,N):Q[R.id]=N,C};return t(k,{delete:function(C){var T=B(this);if(!r(C))return!1;var N=e(C);return N===!0?v(T).delete(C):N&&d(N,T.id)&&delete N[T.id]},has:function(C){var T=B(this);if(!r(C))return!1;var N=e(C);return N===!0?v(T).has(C):N&&d(N,T.id)}}),t(k,E?{get:function(C){var T=B(this);if(r(C)){var N=e(C);if(N===!0)return v(T).get(C);if(N)return N[T.id]}},set:function(C,T){return S(this,C,T)}}:{add:function(C){return S(this,C,!0)}}),O}}}function oC(){return l0||(l0=1,function(){if(d0)return eC;d0=1;var n,t=wp(),e=et(),i=Y(),o=Ps(),s=So(),r=Ms(),a=iC(),h=ft(),d=Te().enforce,l=U(),c=Xu(),u=Object,p=Array.isArray,g=u.isExtensible,m=u.isFrozen,f=u.isSealed,v=u.freeze,y=u.seal,_=!e.ActiveXObject&&"ActiveXObject"in e,b=function(S){return function(){return S(this,arguments.length?arguments[0]:void 0)}},w=r("WeakMap",b,a),E=w.prototype,D=i(E.set);if(c)if(_){n=a.getConstructor(b,"WeakMap",!0),s.enable();var O=i(E.delete),k=i(E.has),B=i(E.get);o(E,{delete:function(S){if(h(S)&&!g(S)){var C=d(this);return C.frozen||(C.frozen=new n),O(this,S)||C.frozen.delete(S)}return O(this,S)},has:function(S){if(h(S)&&!g(S)){var C=d(this);return C.frozen||(C.frozen=new n),k(this,S)||C.frozen.has(S)}return k(this,S)},get:function(S){if(h(S)&&!g(S)){var C=d(this);return C.frozen||(C.frozen=new n),k(this,S)?B(this,S):C.frozen.get(S)}return B(this,S)},set:function(S,C){if(h(S)&&!g(S)){var T=d(this);T.frozen||(T.frozen=new n),k(this,S)?D(this,S,C):T.frozen.set(S,C)}else D(this,S,C);return this}})}else t&&l(function(){var S=v([]);return D(new w,S,1),!m(S)})&&o(E,{set:function(S,C){var T;return p(S)&&(m(S)?T=v:f(S)&&(T=y)),D(this,S,C),T&&T(S),this}})}()),tC}function nC(){return u0?c0:(u0=1,ai(),oC(),c0=G().WeakMap)}function sC(){if(f0)return p0;f0=1;var n=nC();return hi(),p0=n}var Zi=L(m0?g0:(m0=1,g0=sC()));function Qi(n,t,e){(function(i,o){if(o.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")})(n,t),t.set(n,e)}function _r(n,t,e){return n.set(v0(n,t),e),e}function J(n,t){return n.get(v0(n,t))}function v0(n,t,e){if(typeof n=="function"?n===t:n.has(t))return arguments.length<3?t:e;throw new TypeError("Private element is not present on this object")}function y0(n,t){const e=new ve;for(const i of t)n.has(i)||e.add(i);return e}var gi=new Zi,Vt=new Zi;class b0{constructor(){Qi(this,gi,new ve),Qi(this,Vt,new ve)}get size(){return J(Vt,this).size}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const o of e)J(Vt,this).add(o)}delete(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const o of e)J(Vt,this).delete(o)}clear(){J(Vt,this).clear()}getSelection(){return[...J(Vt,this)]}getChanges(){return{added:[...y0(J(gi,this),J(Vt,this))],deleted:[...y0(J(Vt,this),J(gi,this))],previous:[...new ve(J(gi,this))],current:[...new ve(J(Vt,this))]}}commit(){const t=this.getChanges();_r(gi,this,J(Vt,this)),_r(Vt,this,new ve(J(gi,this)));for(const e of t.added)e.select();for(const e of t.deleted)e.unselect();return t}}var Ae=new Zi,je=new Zi,xr=new Zi;class rC{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Qi(this,Ae,new b0),Qi(this,je,new b0),Qi(this,xr,void 0),_r(xr,this,t)}get sizeNodes(){return J(Ae,this).size}get sizeEdges(){return J(je,this).size}getNodes(){return J(Ae,this).getSelection()}getEdges(){return J(je,this).getSelection()}addNodes(){J(Ae,this).add(...arguments)}addEdges(){J(je,this).add(...arguments)}deleteNodes(t){J(Ae,this).delete(t)}deleteEdges(t){J(je,this).delete(t)}clear(){J(Ae,this).clear(),J(je,this).clear()}commit(){const t={nodes:J(Ae,this).commit(),edges:J(je,this).commit()};for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return J(xr,this).call(this,t,...i),t}}class aC{constructor(t,e){this.body=t,this.canvas=e,this._selectionAccumulator=new rC,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},yt(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(t){t!==void 0&&ke(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}selectOnPoint(t){let e=!1;if(this.options.selectable===!0){const i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),i!==void 0&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}selectAdditionalOnPoint(t){let e=!1;if(this.options.selectable===!0){const i=this.getNodeAt(t)||this.getEdgeAt(t);i!==void 0&&(e=!0,i.isSelected()===!0?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}_initBaseEvent(t,e){const i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}generateClickEvent(t,e,i,o){let s=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const r=this._initBaseEvent(e,i);if(s===!0)r.nodes=[],r.edges=[];else{const a=this.getSelection();r.nodes=a.nodes,r.edges=a.edges}o!==void 0&&(r.previousSelection=o),t=="click"&&(r.items=this.getClickedItems(i)),e.controlEdge!==void 0&&(r.controlEdge=e.controlEdge),this.body.emitter.emit(t,r)}selectObject(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return t!==void 0&&(t instanceof it?(e===!0&&this._selectionAccumulator.addEdges(...t.edges),this._selectionAccumulator.addNodes(t)):this._selectionAccumulator.addEdges(t),!0)}deselectObject(t){t.isSelected()===!0&&(t.selected=!1,this._removeFromSelection(t))}_getAllNodesOverlappingWith(t){const e=[],i=this.body.nodes;for(let o=0;o<this.body.nodeIndices.length;o++){const s=this.body.nodeIndices[o];i[s].isOverlappingWith(t)&&e.push(s)}return e}_pointerToPositionObject(t){const e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}getNodeAt(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];const i=this._pointerToPositionObject(t),o=this._getAllNodesOverlappingWith(i);return o.length>0?e===!0?this.body.nodes[o[o.length-1]]:o[o.length-1]:void 0}_getEdgesOverlappingWith(t,e){const i=this.body.edges;for(let o=0;o<this.body.edgeIndices.length;o++){const s=this.body.edgeIndices[o];i[s].isOverlappingWith(t)&&e.push(s)}}_getAllEdgesOverlappingWith(t){const e=[];return this._getEdgesOverlappingWith(t,e),e}getEdgeAt(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];const i=this.canvas.DOMtoCanvas(t);let o=10,s=null;const r=this.body.edges;for(let a=0;a<this.body.edgeIndices.length;a++){const h=this.body.edgeIndices[a],d=r[h];if(d.connected){const l=d.from.x,c=d.from.y,u=d.to.x,p=d.to.y,g=d.edgeType.getDistanceToEdge(l,c,u,p,i.x,i.y);g<o&&(s=h,o=g)}}return s!==null?e===!0?this.body.edges[s]:s:void 0}_addToHover(t){t instanceof it?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}_removeFromSelection(t){t instanceof it?(this._selectionAccumulator.deleteNodes(t),this._selectionAccumulator.deleteEdges(...t.edges)):this._selectionAccumulator.deleteEdges(t)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(t){for(let e=0;e<t.edges.length;e++){const i=t.edges[e];i.hover=!0,this._addToHover(i)}}emitBlurEvent(t,e,i){const o=this._initBaseEvent(t,e);i.hover===!0&&(i.hover=!1,i instanceof it?(o.node=i.id,this.body.emitter.emit("blurNode",o)):(o.edge=i.id,this.body.emitter.emit("blurEdge",o)))}emitHoverEvent(t,e,i){const o=this._initBaseEvent(t,e);let s=!1;return i.hover===!1&&(i.hover=!0,this._addToHover(i),s=!0,i instanceof it?(o.node=i.id,this.body.emitter.emit("hoverNode",o)):(o.edge=i.id,this.body.emitter.emit("hoverEdge",o))),s}hoverObject(t,e){let i=this.getNodeAt(e);i===void 0&&(i=this.getEdgeAt(e));let o=!1;for(const s in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,s)&&(i===void 0||i instanceof it&&i.id!=s||i instanceof me)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],o=!0);for(const s in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,s)&&(o===!0?(this.hoverObj.edges[s].hover=!1,delete this.hoverObj.edges[s]):(i===void 0||i instanceof me&&i.id!=s||i instanceof it&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[s]),delete this.hoverObj.edges[s],o=!0));if(i!==void 0){const s=lt(this.hoverObj.edges).length,r=lt(this.hoverObj.nodes).length;(o||i instanceof me&&s===0&&r===0||i instanceof it&&s===0&&r===0)&&(o=this.emitHoverEvent(t,e,i)),i instanceof it&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(i)}o===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(t,e){let i=!1;const o=this._selectionAccumulator.commit(),s={nodes:o.nodes.previous,edges:o.edges.previous};o.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",e,t,s),i=!0),o.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",e,t,s),i=!0),o.nodes.added.length>0&&(this.generateClickEvent("selectNode",e,t),i=!0),o.edges.added.length>0&&(this.generateClickEvent("selectEdge",e,t),i=!0),i===!0&&this.generateClickEvent("select",e,t)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var t;return Wi(t=this._selectionAccumulator.getNodes()).call(t,e=>e.id)}getSelectedEdgeIds(){var t;return Wi(t=this._selectionAccumulator.getEdges()).call(t,e=>e.id)}setSelection(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((e.unselectAll||e.unselectAll===void 0)&&this.unselectAll(),t.nodes)for(const i of t.nodes){const o=this.body.nodes[i];if(!o)throw new RangeError('Node with id "'+i+'" not found');this.selectObject(o,e.highlightEdges)}if(t.edges)for(const i of t.edges){const o=this.body.edges[i];if(!o)throw new RangeError('Edge with id "'+i+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}selectEdges(t){if(!t||t.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:t})}updateSelection(){for(const t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(const t in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,t.id)||this._selectionAccumulator.deleteEdges(t)}getClickedItems(t){const e=this.canvas.DOMtoCanvas(t),i=[],o=this.body.nodeIndices,s=this.body.nodes;for(let h=o.length-1;h>=0;h--){const d=s[o[h]].getItemsOnPoint(e);i.push.apply(i,d)}const r=this.body.edgeIndices,a=this.body.edges;for(let h=r.length-1;h>=0;h--){const d=a[r[h]].getItemsOnPoint(e);i.push.apply(i,d)}return i}}var w0,_0,x0,E0,O0,C0,k0,S0,T0,D0,M0,Er,I0,P0,N0,B0,z0,F0={};function hC(){if(_0)return w0;_0=1;var n=Ze(),t=Math.floor,e=function(i,o){var s=i.length;if(s<8)for(var r,a,h=1;h<s;){for(a=h,r=i[h];a&&o(i[a-1],r)>0;)i[a]=i[--a];a!==h++&&(i[a]=r)}else for(var d=t(s/2),l=e(n(i,0,d),o),c=e(n(i,d),o),u=l.length,p=c.length,g=0,m=0;g<u||m<p;)i[g+m]=g<u&&m<p?o(l[g],c[m])<=0?l[g++]:c[m++]:g<u?l[g++]:c[m++];return i};return w0=e}function dC(){if(E0)return x0;E0=1;var n=Ve().match(/firefox\/(\d+)/i);return x0=!!n&&+n[1]}function lC(){return C0?O0:(C0=1,O0=/MSIE|Trident/.test(Ve()))}function cC(){if(S0)return k0;S0=1;var n=Ve().match(/AppleWebKit\/(\d+)\./);return k0=!!n&&+n[1]}function uC(){if(T0)return F0;T0=1;var n=A(),t=Y(),e=Kt(),i=Pt(),o=Zt(),s=xc(),r=zt(),a=U(),h=hC(),d=ii(),l=dC(),c=lC(),u=bi(),p=cC(),g=[],m=t(g.sort),f=t(g.push),v=a(function(){g.sort(void 0)}),y=a(function(){g.sort(null)}),_=d("sort"),b=!a(function(){if(u)return u<70;if(!(l&&l>3)){if(c)return!0;if(p)return p<603;var w,E,D,O,k="";for(w=65;w<76;w++){switch(E=String.fromCharCode(w),w){case 66:case 69:case 70:case 72:D=3;break;case 68:case 71:D=4;break;default:D=2}for(O=0;O<47;O++)g.push({k:E+O,v:D})}for(g.sort(function(B,S){return S.v-B.v}),O=0;O<g.length;O++)E=g[O].k.charAt(0),k.charAt(k.length-1)!==E&&(k+=E);return k!=="DGBEFHACIJK"}});return n({target:"Array",proto:!0,forced:v||!y||!_||!b},{sort:function(w){w!==void 0&&e(w);var E=i(this);if(b)return w===void 0?m(E):m(E,w);var D,O,k=[],B=o(E);for(O=0;O<B;O++)O in E&&f(k,E[O]);for(h(k,function(S){return function(C,T){return T===void 0?-1:C===void 0?1:S!==void 0?+S(C,T)||0:r(C)>r(T)?1:-1}}(w)),D=o(k),O=0;O<D;)E[O]=k[O++];for(;O<B;)s(E,O++);return E}}),F0}function pC(){return M0?D0:(M0=1,uC(),D0=bt()("Array","sort"))}function fC(){if(I0)return Er;I0=1;var n=ht(),t=pC(),e=Array.prototype;return Er=function(i){var o=i.sort;return i===e||n(e,i)&&o===e.sort?t:o},Er}function gC(){return N0?P0:(N0=1,P0=fC())}var A0,j0,R0,L0,H0,W0,V0,q0,U0,mi=L(z0?B0:(z0=1,B0=gC())),mC={};function vC(){if(j0)return A0;j0=1;var n=rt(),t=U(),e=Y(),i=ps(),o=xi(),s=Rt(),r=e(oo().f),a=e([].push),h=n&&t(function(){var l=Object.create(null);return l[2]=2,!r(l,2)}),d=function(l){return function(c){for(var u,p=s(c),g=o(p),m=h&&i(p)===null,f=g.length,v=0,y=[];f>v;)u=g[v++],n&&!(m?u in p:r(p,u))||a(y,l?[u,p[u]]:p[u]);return y}};return A0={entries:d(!0),values:d(!1)}}function yC(){return H0?L0:(H0=1,function(){if(R0)return mC;R0=1;var n=A(),t=vC().values;n({target:"Object",stat:!0},{values:function(e){return t(e)}})}(),L0=G().Object.values)}function bC(){return V0?W0:(V0=1,W0=yC())}var Y0,X0,G0,K0,Z0,Q0,$0,Or,J0,tw,ew,iw,ow,wC=L(U0?q0:(U0=1,q0=bC())),_C={};function xC(){if(X0)return Y0;X0=1;var n=Kt(),t=Pt(),e=no(),i=Zt(),o=TypeError,s="Reduce of empty array with no initial value",r=function(a){return function(h,d,l,c){var u=t(h),p=e(u),g=i(u);if(n(d),g===0&&l<2)throw new o(s);var m=a?g-1:0,f=a?-1:1;if(l<2)for(;;){if(m in p){c=p[m],m+=f;break}if(m+=f,a?m<0:g<=m)throw new o(s)}for(;a?m>=0:g>m;m+=f)m in p&&(c=d(c,p[m],m,u));return c}};return Y0={left:r(!1),right:r(!0)}}function EC(){return K0?G0:(K0=1,G0=kf()==="NODE")}function OC(){return $0?Q0:($0=1,function(){if(Z0)return _C;Z0=1;var n=A(),t=xC().left,e=ii(),i=bi();n({target:"Array",proto:!0,forced:!EC()&&i>79&&i<83||!e("reduce")},{reduce:function(o){var s=arguments.length;return t(this,o,s,s>1?arguments[1]:void 0)}})}(),Q0=bt()("Array","reduce"))}function CC(){if(J0)return Or;J0=1;var n=ht(),t=OC(),e=Array.prototype;return Or=function(i){var o=i.reduce;return i===e||n(e,i)&&o===e.reduce?t:o},Or}function kC(){return ew?tw:(ew=1,tw=CC())}var nw=L(ow?iw:(ow=1,iw=kC()));class sw{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(t){return this.fake_use(t),this.abstract()}setPosition(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}getTreeSize(t){return this.fake_use(t),this.abstract()}sort(t){this.fake_use(t),this.abstract()}fix(t,e){this.fake_use(t,e),this.abstract()}shift(t,e){this.fake_use(t,e),this.abstract()}}class SC extends sw{constructor(t){super(),this.layout=t}curveType(){return"horizontal"}getPosition(t){return t.x}setPosition(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;i!==void 0&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}getTreeSize(t){const e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}sort(t){mi(t).call(t,function(e,i){return e.x-i.x})}fix(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}shift(t,e){this.layout.body.nodes[t].x+=e}}class TC extends sw{constructor(t){super(),this.layout=t}curveType(){return"vertical"}getPosition(t){return t.y}setPosition(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;i!==void 0&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}getTreeSize(t){const e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}sort(t){mi(t).call(t,function(e,i){return e.y-i.y})}fix(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}shift(t,e){this.layout.body.nodes[t].y+=e}}var rw,aw,hw,Cr,dw,lw,cw,uw,pw,DC={};function MC(){return hw?aw:(hw=1,function(){if(rw)return DC;rw=1;var n=A(),t=ae().every;n({target:"Array",proto:!0,forced:!ii()("every")},{every:function(e){return t(this,e,arguments.length>1?arguments[1]:void 0)}})}(),aw=bt()("Array","every"))}function IC(){if(dw)return Cr;dw=1;var n=ht(),t=MC(),e=Array.prototype;return Cr=function(i){var o=i.every;return i===e||n(e,i)&&o===e.every?t:o},Cr}function PC(){return cw?lw:(cw=1,lw=IC())}var fw=L(pw?uw:(pw=1,uw=PC()));function NC(n,t){const e=new ve;return tt(n).call(n,i=>{var o;tt(o=i.edges).call(o,s=>{s.connected&&e.add(s)})}),tt(e).call(e,i=>{const o=i.from.id,s=i.to.id;t[o]==null&&(t[o]=0),(t[s]==null||t[o]>=t[s])&&(t[s]=t[o]+1)}),t}function gw(n,t,e,i){var o;const s=ji(null),r=nw(o=[...ry(i).call(i)]).call(o,(c,u)=>c+1+u.edges.length,0),a=e+"Id",h=e==="to"?1:-1;for(const[c,u]of i){if(!i.has(c)||!n(u))continue;s[c]=0;const p=[u];let g,m=0;for(;g=p.pop();){var d,l;if(!i.has(c))continue;const f=s[g.id]+h;if(tt(d=ie(l=g.edges).call(l,v=>v.connected&&v.to!==v.from&&v[e]!==g&&i.has(v.toId)&&i.has(v.fromId))).call(d,v=>{const y=v[a],_=s[y];(_==null||t(f,_))&&(s[y]=f,p.push(v[e]))}),m>r)return NC(i,s);++m}}return s}class BC{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(t,e){this.childrenReference[t]===void 0&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),this.parentReference[e]===void 0&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}checkIfTree(){for(const t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(t,e){e!==void 0&&this.trees[t.id]===void 0&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}ensureLevel(t){this.levels[t]===void 0&&(this.levels[t]=0)}getMaxLevel(t){const e={},i=o=>{if(e[o]!==void 0)return e[o];let s=this.levels[o];if(this.childrenReference[o]){const r=this.childrenReference[o];if(r.length>0)for(let a=0;a<r.length;a++)s=Math.max(s,i(r[a]))}return e[o]=s,s};return i(t)}levelDownstream(t,e){this.levels[e.id]===void 0&&(this.levels[t.id]===void 0&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}setMinLevelToZero(){var t;const e=new Bs;let i=0;const o=mi(t=[...new ve(wC(this.levels))]).call(t,(s,r)=>s-r);for(const s of o)e.set(s,i++);for(const s in this.levels)Object.prototype.hasOwnProperty.call(this.levels,s)&&(this.levels[s]=e.get(this.levels[s]))}getTreeSize(t,e){let i=1e9,o=-1e9,s=1e9,r=-1e9;for(const a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===e){const h=t[a];i=Math.min(h.x,i),o=Math.max(h.x,o),s=Math.min(h.y,s),r=Math.max(h.y,r)}return{min_x:i,max_x:o,min_y:s,max_y:r}}hasSameParent(t,e){const i=this.parentReference[t.id],o=this.parentReference[e.id];if(i===void 0||o===void 0)return!1;for(let s=0;s<i.length;s++)for(let r=0;r<o.length;r++)if(i[s]==o[r])return!0;return!1}inSameSubNetwork(t,e){return this.trees[t.id]===this.trees[e.id]}getLevels(){return lt(this.distributionOrdering)}addToOrdering(t,e){this.distributionOrdering[e]===void 0&&(this.distributionOrdering[e]=[]);let i=!1;const o=this.distributionOrdering[e];for(const s in o)if(o[s]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}class zC{constructor(t){this.body=t,this._resetRNG(Math.random()+":"+dr()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},yt(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const t=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",t,!1)})}setOptions(t,e){if(t!==void 0){const i=this.options.hierarchical,o=i.enabled;if(ke(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Mt(this.options,t,"hierarchical"),t.randomSeed!==void 0&&this._resetRNG(t.randomSeed),i.enabled===!0)return o===!0&&this.body.emitter.emit("refresh",!0),i.direction==="RL"||i.direction==="DU"?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(o===!0)return this.body.emitter.emit("refresh"),Z(e,this.optionsBackup)}return e}_resetRNG(t){this.initialRandomSeed=t,this._rng=Pi(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(t){if(this.options.hierarchical.enabled===!0){const e=this.optionsBackup.physics;t.physics===void 0||t.physics===!0?(t.physics={enabled:e.enabled===void 0||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=e.enabled===void 0||e.enabled,e.solver=e.solver||"barnesHut"):typeof t.physics=="object"?(e.enabled=t.physics.enabled===void 0||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):t.physics!==!1&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});let i=this.direction.curveType();if(t.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(t.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if(typeof t.edges.smooth=="boolean")this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{const o=t.edges.smooth;o.type!==void 0&&o.type!=="dynamic"&&(i=o.type),this.optionsBackup.edges={smooth:{enabled:o.enabled===void 0||o.enabled,type:o.type===void 0?"dynamic":o.type,roundness:o.roundness===void 0?.5:o.roundness,forceDirection:o.forceDirection!==void 0&&o.forceDirection}},t.edges.smooth={enabled:o.enabled===void 0||o.enabled,type:i,roundness:o.roundness===void 0?.5:o.roundness,forceDirection:o.forceDirection!==void 0&&o.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}positionInitially(t){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const e=t.length+50;for(let i=0;i<t.length;i++){const o=t[i],s=2*Math.PI*this._rng();o.x===void 0&&(o.x=e*Math.cos(s)),o.y===void 0&&(o.y=e*Math.sin(s))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const t=this.body.nodeIndices;let e=0;for(let i=0;i<t.length;i++)this.body.nodes[t[i]].predefinedPosition===!0&&(e+=1);if(e<.5*t.length){let o=0;const s=this.options.clusterThreshold,r={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>s){const h=t.length;for(;t.length>s&&o<=10;){o+=1;const d=t.length;if(o%3==0?this.body.modules.clustering.clusterBridges(r):this.body.modules.clustering.clusterOutliers(r),d==t.length&&o%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*h)})}o>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();const a=70;for(let h=0;h<t.length;h++){const d=this.body.nodes[t[h]];d.predefinedPosition===!1&&(d.x+=(.5-this._rng())*a,d.y+=(.5-this._rng())*a)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const t=Ct.getRangeCore(this.body.nodes,this.body.nodeIndices),e=Ct.findCenter(t);for(let i=0;i<this.body.nodeIndices.length;i++){const o=this.body.nodes[this.body.nodeIndices[i]];o.x-=e.x,o.y-=e.y}}_declusterAll(){let t=!0;for(;t===!0;){t=!1;for(let e=0;e<this.body.nodeIndices.length;e++)this.body.nodes[this.body.nodeIndices[e]].isCluster===!0&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));t===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let t,e,i=!1,o=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new BC,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&(t=this.body.nodes[e],t.options.level!==void 0?(i=!0,this.hierarchical.levels[e]=t.options.level):o=!0);if(o===!0&&i===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(o===!0){const r=this.options.hierarchical.sortMethod;r==="hubsize"?this._determineLevelsByHubsize():r==="directed"?this._determineLevelsDirected():r==="custom"&&this._determineLevelsCustomCallback()}for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.hierarchical.ensureLevel(r);const s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var t=this;let e=!1;const i={},o=(f,v)=>{const y=this.hierarchical.trees;for(const _ in y)Object.prototype.hasOwnProperty.call(y,_)&&y[_]===f&&this.direction.shift(_,v)},s=()=>{const f=[];for(let v=0;v<this.hierarchical.numTrees();v++)f.push(this.direction.getTreeSize(v));return f},r=(f,v)=>{if(!v[f.id]&&(v[f.id]=!0,this.hierarchical.childrenReference[f.id])){const y=this.hierarchical.childrenReference[f.id];if(y.length>0)for(let _=0;_<y.length;_++)r(this.body.nodes[y[_]],v)}},a=function(f){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,y=1e9,_=1e9,b=1e9,w=-1e9;for(const E in f)if(Object.prototype.hasOwnProperty.call(f,E)){const D=t.body.nodes[E],O=t.hierarchical.levels[D.id],k=t.direction.getPosition(D),[B,S]=t._getSpaceAroundNode(D,f);y=Math.min(B,y),_=Math.min(S,_),O<=v&&(b=Math.min(k,b),w=Math.max(k,w))}return[b,w,y,_]},h=(f,v)=>{const y=this.hierarchical.getMaxLevel(f.id),_=this.hierarchical.getMaxLevel(v.id);return Math.min(y,_)},d=(f,v,y)=>{const _=this.hierarchical;for(let b=0;b<v.length;b++){const w=v[b],E=_.distributionOrdering[w];if(E.length>1)for(let D=0;D<E.length-1;D++){const O=E[D],k=E[D+1];_.hasSameParent(O,k)&&_.inSameSubNetwork(O,k)&&f(O,k,y)}}},l=function(f,v){let y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const _=t.direction.getPosition(f),b=t.direction.getPosition(v),w=Math.abs(b-_),E=t.options.hierarchical.nodeSpacing;if(w>E){const D={},O={};r(f,D),r(v,O);const k=h(f,v),B=a(D,k),S=a(O,k),C=B[1],T=S[0],N=S[2];if(Math.abs(C-T)>E){let R=C-T+E;R<-N+E&&(R=-N+E),R<0&&(t._shiftBlock(v.id,R),e=!0,y===!0&&t._centerParent(v))}}},c=(f,v)=>{const y=v.id,_=v.edges,b=this.hierarchical.levels[v.id],w=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,E={},D=[];for(let C=0;C<_.length;C++){const T=_[C];if(T.toId!=T.fromId){const N=T.toId==y?T.from:T.to;E[_[C].id]=N,this.hierarchical.levels[N.id]<b&&D.push(T)}}const O=(C,T)=>{let N=0;for(let R=0;R<T.length;R++)if(E[T[R].id]!==void 0){const Q=this.direction.getPosition(E[T[R].id])-C;N+=Q/Math.sqrt(Q*Q+w)}return N},k=(C,T)=>{let N=0;for(let R=0;R<T.length;R++)if(E[T[R].id]!==void 0){const Q=this.direction.getPosition(E[T[R].id])-C;N-=w*Math.pow(Q*Q+w,-1.5)}return N},B=(C,T)=>{let N=this.direction.getPosition(v);const R={};for(let Q=0;Q<C;Q++){const ct=O(N,T),It=k(N,T),Ft=40;if(N-=Math.max(-Ft,Math.min(Ft,Math.round(ct/It))),R[N]!==void 0)break;R[N]=Q}return N};let S=B(f,D);(C=>{const T=this.direction.getPosition(v);if(i[v.id]===void 0){const Ft={};r(v,Ft),i[v.id]=Ft}const N=a(i[v.id]),R=N[2],Q=N[3],ct=C-T;let It=0;ct>0?It=Math.min(ct,Q-this.options.hierarchical.nodeSpacing):ct<0&&(It=-Math.min(-ct,R-this.options.hierarchical.nodeSpacing)),It!=0&&(this._shiftBlock(v.id,It),e=!0)})(S),S=B(f,_),(C=>{const T=this.direction.getPosition(v),[N,R]=this._getSpaceAroundNode(v),Q=C-T;let ct=T;Q>0?ct=Math.min(T+(R-this.options.hierarchical.nodeSpacing),C):Q<0&&(ct=Math.max(T-(N-this.options.hierarchical.nodeSpacing),C)),ct!==T&&(this.direction.setPosition(v,ct),e=!0)})(S)},u=f=>{let v=this.hierarchical.getLevels();v=fi(v).call(v);for(let y=0;y<f;y++){e=!1;for(let _=0;_<v.length;_++){const b=v[_],w=this.hierarchical.distributionOrdering[b];for(let E=0;E<w.length;E++)c(1e3,w[E])}if(e!==!0)break}},p=f=>{let v=this.hierarchical.getLevels();v=fi(v).call(v);for(let y=0;y<f&&(e=!1,d(l,v,!0),e===!0);y++);},g=()=>{for(const f in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,f)&&this._centerParent(this.body.nodes[f])},m=()=>{let f=this.hierarchical.getLevels();f=fi(f).call(f);for(let v=0;v<f.length;v++){const y=f[v],_=this.hierarchical.distributionOrdering[y];for(let b=0;b<_.length;b++)this._centerParent(_[b])}};this.options.hierarchical.blockShifting===!0&&(p(5),g()),this.options.hierarchical.edgeMinimization===!0&&u(20),this.options.hierarchical.parentCentralization===!0&&m(),(()=>{const f=s();let v=0;for(let y=0;y<f.length-1;y++)v+=f[y].max-f[y+1].min+this.options.hierarchical.treeSpacing,o(y+1,v)})()}_getSpaceAroundNode(t,e){let i=!0;e===void 0&&(i=!1);const o=this.hierarchical.levels[t.id];if(o!==void 0){const s=this.hierarchical.distributionIndex[t.id],r=this.direction.getPosition(t),a=this.hierarchical.distributionOrdering[o];let h=1e9,d=1e9;if(s!==0){const l=a[s-1];(i===!0&&e[l.id]===void 0||i===!1)&&(h=r-this.direction.getPosition(l))}if(s!=a.length-1){const l=a[s+1];if(i===!0&&e[l.id]===void 0||i===!1){const c=this.direction.getPosition(l);d=Math.min(d,c-r)}}return[h,d]}return[0,0]}_centerParent(t){if(this.hierarchical.parentReference[t.id]){const e=this.hierarchical.parentReference[t.id];for(let i=0;i<e.length;i++){const o=e[i],s=this.body.nodes[o],r=this.hierarchical.childrenReference[o];if(r!==void 0){const a=this._getCenterPosition(r),h=this.direction.getPosition(s),[d,l]=this._getSpaceAroundNode(s),c=h-a;(c<0&&Math.abs(c)<l-this.options.hierarchical.nodeSpacing||c>0&&Math.abs(c)<d-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(s,a)}}}}_placeNodesByHierarchy(t){this.positionedNodes={};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var e;let o=lt(t[i]);o=this._indexArrayToNodes(o),mi(e=this.direction).call(e,o);let s=0;for(let r=0;r<o.length;r++){const a=o[r];if(this.positionedNodes[a.id]===void 0){const h=this.options.hierarchical.nodeSpacing;let d=h*s;s>0&&(d=this.direction.getPosition(o[r-1])+h),this.direction.setPosition(a,d,i),this._validatePositionAndContinue(a,i,d),s++}}}}_placeBranchNodes(t,e){var i;const o=this.hierarchical.childrenReference[t];if(o===void 0)return;const s=[];for(let a=0;a<o.length;a++)s.push(this.body.nodes[o[a]]);mi(i=this.direction).call(i,s);for(let a=0;a<s.length;a++){const h=s[a],d=this.hierarchical.levels[h.id];if(!(d>e&&this.positionedNodes[h.id]===void 0))return;{const l=this.options.hierarchical.nodeSpacing;let c;c=a===0?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(s[a-1])+l,this.direction.setPosition(h,c,d),this._validatePositionAndContinue(h,d,c)}}const r=this._getCenterPosition(s);this.direction.setPosition(this.body.nodes[t],r,e)}_validatePositionAndContinue(t,e,i){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[e]!==void 0){const o=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-o<this.options.hierarchical.nodeSpacing){const s=o+this.options.hierarchical.nodeSpacing-i,r=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(r.withChild,s)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}_indexArrayToNodes(t){const e=[];for(let i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}_getDistribution(){const t={};let e,i;for(e in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,e)){i=this.body.nodes[e];const o=this.hierarchical.levels[e]===void 0?0:this.hierarchical.levels[e];this.direction.fix(i,o),t[o]===void 0&&(t[o]={}),t[o][e]=i}return t}_getActiveEdges(t){const e=[];return W(t.edges,i=>{var o;ot(o=this.body.edgeIndices).call(o,i.id)!==-1&&e.push(i)}),e}_getHubSizes(){const t={};W(this.body.nodeIndices,i=>{const o=this.body.nodes[i],s=this._getActiveEdges(o).length;t[s]=!0});const e=[];return W(t,i=>{e.push(Number(i))}),mi(e).call(e,function(i,o){return o-i}),e}_determineLevelsByHubsize(){const t=(i,o)=>{this.hierarchical.levelDownstream(i,o)},e=this._getHubSizes();for(let i=0;i<e.length;++i){const o=e[i];if(o===0)break;W(this.body.nodeIndices,s=>{const r=this.body.nodes[s];o===this._getActiveEdges(r).length&&this._crawlNetwork(t,s)})}}_determineLevelsCustomCallback(){this._crawlNetwork((t,e,i)=>{let o=this.hierarchical.levels[t.id];o===void 0&&(o=this.hierarchical.levels[t.id]=1e5);const s=(Ct.cloneOptions(t,"node"),Ct.cloneOptions(e,"node"),void Ct.cloneOptions(i,"edge"));this.hierarchical.levels[e.id]=o+s}),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var t;const e=nw(t=this.body.nodeIndices).call(t,(i,o)=>(i.set(o,this.body.nodes[o]),i),new Bs);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=function(i){return gw(o=>{var s,r;return fw(s=ie(r=o.edges).call(r,a=>i.has(a.toId))).call(s,a=>a.from===o)},(o,s)=>s<o,"to",i)}(e):this.hierarchical.levels=function(i){return gw(o=>{var s,r;return fw(s=ie(r=o.edges).call(r,a=>i.has(a.toId))).call(s,a=>a.to===o)},(o,s)=>s>o,"from",i)}(e),this.hierarchical.setMinLevelToZero()}_generateMap(){this._crawlNetwork((t,e)=>{this.hierarchical.levels[e.id]>this.hierarchical.levels[t.id]&&this.hierarchical.addRelation(t.id,e.id)}),this.hierarchical.checkIfTree()}_crawlNetwork(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},e=arguments.length>1?arguments[1]:void 0;const i={},o=(s,r)=>{if(i[s.id]===void 0){let a;this.hierarchical.setTreeIndex(s,r),i[s.id]=!0;const h=this._getActiveEdges(s);for(let d=0;d<h.length;d++){const l=h[d];l.connected===!0&&(a=l.toId==s.id?l.from:l.to,s.id!=a.id&&(t(s,a,l),o(a,r)))}}};if(e===void 0){let s=0;for(let r=0;r<this.body.nodeIndices.length;r++){const a=this.body.nodeIndices[r];if(i[a]===void 0){const h=this.body.nodes[a];o(h,s),s+=1}}}else{const s=this.body.nodes[e];if(s===void 0)return void console.error("Node not found:",e);o(s)}}_shiftBlock(t,e){const i={},o=s=>{if(i[s])return;i[s]=!0,this.direction.shift(s,e);const r=this.hierarchical.childrenReference[s];if(r!==void 0)for(let a=0;a<r.length;a++)o(r[a])};o(t)}_findCommonParent(t,e){const i={},o=(r,a)=>{const h=this.hierarchical.parentReference[a];if(h!==void 0)for(let d=0;d<h.length;d++){const l=h[d];r[l]=!0,o(r,l)}},s=(r,a)=>{const h=this.hierarchical.parentReference[a];if(h!==void 0)for(let d=0;d<h.length;d++){const l=h[d];if(r[l]!==void 0)return{foundParent:l,withChild:a};const c=s(r,l);if(c.foundParent!==null)return c}return{foundParent:null,withChild:a}};return o(i,t),s(i,e)}setDirectionStrategy(){const t=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";this.direction=t?new SC(this):new TC(this)}_getCenterPosition(t){let e=1e9,i=-1e9;for(let o=0;o<t.length;o++){let s;if(t[o].id!==void 0)s=t[o];else{const a=t[o];s=this.body.nodes[a]}const r=this.direction.getPosition(s);e=Math.min(e,r),i=Math.max(i,r)}return .5*(e+i)}}class FC{constructor(t,e,i,o){var s,r;this.body=t,this.canvas=e,this.selectionHandler=i,this.interactionHandler=o,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},yt(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",I(s=this._restore).call(s,this)),this.body.emitter.on("_resetData",I(r=this._restore).call(r,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(t,e,i){e!==void 0&&(e.locale!==void 0?this.options.locale=e.locale:this.options.locale=i.locale,e.locales!==void 0?this.options.locales=e.locales:this.options.locales=i.locales),t!==void 0&&(typeof t=="boolean"?this.options.enabled=t:(this.options.enabled=!0,Z(this.options,t)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const i=this.selectionHandler.getSelectedNodeCount(),o=this.selectionHandler.getSelectedEdgeCount(),s=i+o,r=this.options.locales[this.options.locale];let a=!1;this.options.addNode!==!1&&(this._createAddNodeButton(r),a=!0),this.options.addEdge!==!1&&(a===!0?this._createSeperator(1):a=!0,this._createAddEdgeButton(r)),i===1&&typeof this.options.editNode=="function"?(a===!0?this._createSeperator(2):a=!0,this._createEditNodeButton(r)):o===1&&i===0&&this.options.editEdge!==!1&&(a===!0?this._createSeperator(3):a=!0,this._createEditEdgeButton(r)),s!==0&&(i>0&&this.options.deleteNode!==!1||i===0&&this.options.deleteEdge!==!1)&&(a===!0&&this._createSeperator(4),this._createDeleteButton(r)),this._bindElementEvents(this.closeDiv,I(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",I(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var t;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var e;const i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,I(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",I(t=this._performAddNode).call(t,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const t=this.selectionHandler.getSelectedNodes()[0];if(t!==void 0){if(this.inMode="editNode",typeof this.options.editNode!="function")throw new Error("No function has been configured to handle the editing of nodes.");if(t.isCluster!==!0){const e=Z({},t.options,!1);if(e.x=t.x,e.y=t.y,this.options.editNode.length!==2)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(e,i=>{i!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(i),this.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}addEdgeMode(){var t,e,i,o,s;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var r;const a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,I(r=this.toggleEditMode).call(r,this))}this._temporaryBindUI("onTouch",I(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",I(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",I(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",I(o=this._finishConnect).call(o,this)),this._temporaryBindUI("onDragStart",I(s=this._dragStartEdge).call(s,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const r=this.body.edges[this.edgeBeingEditedId];return void this._performEditEdge(r.from.id,r.to.id)}if(this.guiEnabled===!0){var t;const r=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(r),this._createSeperator(),this._createDescription(r.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,I(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var e,i,o,s;const r=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(r.from.x,r.from.y),h=this._getNewTargetNode(r.to.x,r.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(h.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[h.id]=h,this.body.nodeIndices.push(h.id),this._temporaryBindUI("onTouch",I(e=this._controlNodeTouch).call(e,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",I(i=this._controlNodeDragStart).call(i,this)),this._temporaryBindUI("onDrag",I(o=this._controlNodeDrag).call(o,this)),this._temporaryBindUI("onDragEnd",I(s=this._controlNodeDragEnd).call(s,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",d=>{const l=r.edgeType.findBorderPositions(d);a.selected===!1&&(a.x=l.from.x,a.y=l.from.y),h.selected===!1&&(h.x=l.to.x,h.y=l.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const t=this.selectionHandler.getSelectedNodeIds(),e=this.selectionHandler.getSelectedEdgeIds();let i;if(t.length>0){for(let o=0;o<t.length;o++)if(this.body.nodes[t[o]].isCluster===!0)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);typeof this.options.deleteNode=="function"&&(i=this.options.deleteNode)}else e.length>0&&typeof this.options.deleteEdge=="function"&&(i=this.options.deleteEdge);if(typeof i=="function"){const o={nodes:t,edges:e};if(i.length!==2)throw new Error("The function for delete does not support two arguments (data, callback)");i(o,s=>{s!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(s.edges),this.body.data.nodes.getDataSet().remove(s.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(e),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){var t,e;this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0&&(this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(t=(e=this.options.locales[this.options.locale])===null||e===void 0?void 0:e.close)!==null&&t!==void 0?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}_getNewTargetNode(t,e){const i=Z({},this.options.controlNodeStyle);i.id="targetNode"+li(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;const o=this.body.functions.createNode(i);return o.shape.boundingBox={left:t,right:t,top:e,bottom:e},o}_createEditButton(){var t;this._clean(),this.manipulationDOM={},$t(this.editModeDiv);const e=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,I(t=this.toggleEditMode).call(t,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&($t(this.editModeDiv),$t(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const e of re(t=this._domEventListenerCleanupQueue).call(t,0)){var t;e()}}_removeManipulationDOM(){this._clean(),$t(this.manipulationDiv),$t(this.editModeDiv),$t(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}_createAddNodeButton(t){var e;const i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,I(e=this.addNodeMode).call(e,this))}_createAddEdgeButton(t){var e;const i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,I(e=this.addEdgeMode).call(e,this))}_createEditNodeButton(t){var e;const i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,I(e=this.editNode).call(e,this))}_createEditEdgeButton(t){var e;const i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,I(e=this.editEdgeMode).call(e,this))}_createDeleteButton(t){var e;let i;i=this.options.rtl?"vis-delete-rtl":"vis-delete";const o=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(o),this._bindElementEvents(o,I(e=this.deleteSelected).call(e,this))}_createBackButton(t){var e;const i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,I(e=this.showManipulatorToolbar).call(e,this))}_createButton(t,e,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=o,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}_createDescription(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}_temporaryBindUI(t,e){if(this.body.eventListeners[t]===void 0)throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Ry(lt(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}_unbindTemporaryUIs(){for(const t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let t=0;t<this.temporaryEventFunctions.length;t++){const e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}_bindElementEvents(t,e){const i=new te(t,{});Fo(i,e),this._domEventListenerCleanupQueue.push(()=>{i.destroy()});const o=s=>{let{keyCode:r,key:a}=s;a!=="Enter"&&a!==" "&&r!==13&&r!==32||e()};t.addEventListener("keyup",o,!1),this._domEventListenerCleanupQueue.push(()=>{t.removeEventListener("keyup",o,!1)})}_cleanupTemporaryNodesAndEdges(){for(let s=0;s<this.temporaryIds.edges.length;s++){var t;this.body.edges[this.temporaryIds.edges[s]].disconnect(),delete this.body.edges[this.temporaryIds.edges[s]];const r=ot(t=this.body.edgeIndices).call(t,this.temporaryIds.edges[s]);var e;r!==-1&&re(e=this.body.edgeIndices).call(e,r,1)}for(let s=0;s<this.temporaryIds.nodes.length;s++){var i;delete this.body.nodes[this.temporaryIds.nodes[s]];const r=ot(i=this.body.nodeIndices).call(i,this.temporaryIds.nodes[s]);var o;r!==-1&&re(o=this.body.nodeIndices).call(o,r,1)}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=yt({},this.body.view.translation)}_controlNodeDragStart(){const t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],o=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const r=i.isOverlappingWith(e),a=o.isOverlappingWith(e);r===!0?(this.selectedControlNode=i,s.edgeType.from=i):a===!0&&(this.selectedControlNode=o,s.edgeType.to=o),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(t){this.body.emitter.emit("disablePhysics");const e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);this.selectedControlNode!==void 0?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(t){const e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const s=this.selectionHandler._getAllNodesOverlappingWith(i);let r;for(let a=s.length-1;a>=0;a--)if(s[a]!==this.selectedControlNode.id){r=this.body.nodes[s[a]];break}if(r!==void 0&&this.selectedControlNode!==void 0)if(r.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(r.id,o.to.id):this._performEditEdge(o.from.id,r.id)}else o.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(t){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=yt({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(i!==void 0)if(i.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const o=this._getNewTargetNode(i.x,i.y);this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id);const s=this.body.functions.createEdge({id:"connectionEdge"+li(),from:i.id,to:o.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(o.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(t){const e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e);let o;this.temporaryIds.edges[0]!==void 0&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(i);let r;for(let h=s.length-1;h>=0;h--){var a;if(ot(a=this.temporaryIds.nodes).call(a,s[h])===-1){r=this.body.nodes[s[h]];break}}if(t.controlEdge={from:o,to:r?r.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,e),this.temporaryIds.nodes[0]!==void 0){const h=this.body.nodes[this.temporaryIds.nodes[0]];h.x=this.canvas._XconvertDOMtoCanvas(e.x),h.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}_finishConnect(t){const e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e);let o;this.temporaryIds.edges[0]!==void 0&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);const s=this.selectionHandler._getAllNodesOverlappingWith(i);let r;for(let h=s.length-1;h>=0;h--){var a;if(ot(a=this.temporaryIds.nodes).call(a,s[h])===-1){r=this.body.nodes[s[h]];break}}this._cleanupTemporaryNodesAndEdges(),r!==void 0&&(r.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[o]!==void 0&&this.body.nodes[r.id]!==void 0&&this._performAddEdge(o,r.id)),t.controlEdge={from:o,to:r?r.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}_dragStartEdge(t){const e=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,e,void 0,!0)}_performAddNode(t){const e={id:li(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function"){if(this.options.addNode.length!==2)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(e,i=>{i!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()})}else this.body.data.nodes.getDataSet().add(e),this.showManipulatorToolbar()}_performAddEdge(t,e){const i={from:t,to:e};if(typeof this.options.addEdge=="function"){if(this.options.addEdge.length!==2)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(i,o=>{o!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(t,e){const i={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let o=this.options.editEdge;if(typeof o=="object"&&(o=o.editWithoutDrag),typeof o=="function"){if(o.length!==2)throw new Error("The function for edit does not support two arguments (data, callback)");o(i,s=>{s==null||this.inMode!=="editEdge"?(this.body.edges[i.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(s),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const P="string",M="boolean",x="number",$i="array",F="object",kr=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Sr={borderWidth:{number:x},borderWidthSelected:{number:x,undefined:"undefined"},brokenImage:{string:P,undefined:"undefined"},chosen:{label:{boolean:M,function:"function"},node:{boolean:M,function:"function"},__type__:{object:F,boolean:M}},color:{border:{string:P},background:{string:P},highlight:{border:{string:P},background:{string:P},__type__:{object:F,string:P}},hover:{border:{string:P},background:{string:P},__type__:{object:F,string:P}},__type__:{object:F,string:P}},opacity:{number:x,undefined:"undefined"},fixed:{x:{boolean:M},y:{boolean:M},__type__:{object:F,boolean:M}},font:{align:{string:P},color:{string:P},size:{number:x},face:{string:P},background:{string:P},strokeWidth:{number:x},strokeColor:{string:P},vadjust:{number:x},multi:{boolean:M,string:P},bold:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},boldital:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},ital:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},mono:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},__type__:{object:F,string:P}},group:{string:P,number:x,undefined:"undefined"},heightConstraint:{minimum:{number:x},valign:{string:P},__type__:{object:F,boolean:M,number:x}},hidden:{boolean:M},icon:{face:{string:P},code:{string:P},size:{number:x},color:{string:P},weight:{string:P,number:x},__type__:{object:F}},id:{string:P,number:x},image:{selected:{string:P,undefined:"undefined"},unselected:{string:P,undefined:"undefined"},__type__:{object:F,string:P}},imagePadding:{top:{number:x},right:{number:x},bottom:{number:x},left:{number:x},__type__:{object:F,number:x}},label:{string:P,undefined:"undefined"},labelHighlightBold:{boolean:M},level:{number:x,undefined:"undefined"},margin:{top:{number:x},right:{number:x},bottom:{number:x},left:{number:x},__type__:{object:F,number:x}},mass:{number:x},physics:{boolean:M},scaling:{min:{number:x},max:{number:x},label:{enabled:{boolean:M},min:{number:x},max:{number:x},maxVisible:{number:x},drawThreshold:{number:x},__type__:{object:F,boolean:M}},customScalingFunction:{function:"function"},__type__:{object:F}},shadow:{enabled:{boolean:M},color:{string:P},size:{number:x},x:{number:x},y:{number:x},__type__:{object:F,boolean:M}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:M,array:$i},borderRadius:{number:x},interpolation:{boolean:M},useImageSize:{boolean:M},useBorderWithImage:{boolean:M},coordinateOrigin:{string:["center","top-left"]},__type__:{object:F}},size:{number:x},title:{string:P,dom:"dom",undefined:"undefined"},value:{number:x,undefined:"undefined"},widthConstraint:{minimum:{number:x},maximum:{number:x},__type__:{object:F,boolean:M,number:x}},x:{number:x},y:{number:x},__type__:{object:F}},mw={configure:{enabled:{boolean:M},filter:{boolean:M,string:P,array:$i,function:"function"},container:{dom:"dom"},showButton:{boolean:M},__type__:{object:F,boolean:M,string:P,array:$i,function:"function"}},edges:{arrows:{to:{enabled:{boolean:M},scaleFactor:{number:x},type:{string:kr},imageHeight:{number:x},imageWidth:{number:x},src:{string:P},__type__:{object:F,boolean:M}},middle:{enabled:{boolean:M},scaleFactor:{number:x},type:{string:kr},imageWidth:{number:x},imageHeight:{number:x},src:{string:P},__type__:{object:F,boolean:M}},from:{enabled:{boolean:M},scaleFactor:{number:x},type:{string:kr},imageWidth:{number:x},imageHeight:{number:x},src:{string:P},__type__:{object:F,boolean:M}},__type__:{string:["from","to","middle"],object:F}},endPointOffset:{from:{number:x},to:{number:x},__type__:{object:F,number:x}},arrowStrikethrough:{boolean:M},background:{enabled:{boolean:M},color:{string:P},size:{number:x},dashes:{boolean:M,array:$i},__type__:{object:F,boolean:M}},chosen:{label:{boolean:M,function:"function"},edge:{boolean:M,function:"function"},__type__:{object:F,boolean:M}},color:{color:{string:P},highlight:{string:P},hover:{string:P},inherit:{string:["from","to","both"],boolean:M},opacity:{number:x},__type__:{object:F,string:P}},dashes:{boolean:M,array:$i},font:{color:{string:P},size:{number:x},face:{string:P},background:{string:P},strokeWidth:{number:x},strokeColor:{string:P},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:x},multi:{boolean:M,string:P},bold:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},boldital:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},ital:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},mono:{color:{string:P},size:{number:x},face:{string:P},mod:{string:P},vadjust:{number:x},__type__:{object:F,string:P}},__type__:{object:F,string:P}},hidden:{boolean:M},hoverWidth:{function:"function",number:x},label:{string:P,undefined:"undefined"},labelHighlightBold:{boolean:M},length:{number:x,undefined:"undefined"},physics:{boolean:M},scaling:{min:{number:x},max:{number:x},label:{enabled:{boolean:M},min:{number:x},max:{number:x},maxVisible:{number:x},drawThreshold:{number:x},__type__:{object:F,boolean:M}},customScalingFunction:{function:"function"},__type__:{object:F}},selectionWidth:{function:"function",number:x},selfReferenceSize:{number:x},selfReference:{size:{number:x},angle:{number:x},renderBehindTheNode:{boolean:M},__type__:{object:F}},shadow:{enabled:{boolean:M},color:{string:P},size:{number:x},x:{number:x},y:{number:x},__type__:{object:F,boolean:M}},smooth:{enabled:{boolean:M},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:x},forceDirection:{string:["horizontal","vertical","none"],boolean:M},__type__:{object:F,boolean:M}},title:{string:P,undefined:"undefined"},width:{number:x},widthConstraint:{maximum:{number:x},__type__:{object:F,boolean:M,number:x}},value:{number:x,undefined:"undefined"},__type__:{object:F}},groups:{useDefaultGroups:{boolean:M},__any__:Sr,__type__:{object:F}},interaction:{dragNodes:{boolean:M},dragView:{boolean:M},hideEdgesOnDrag:{boolean:M},hideEdgesOnZoom:{boolean:M},hideNodesOnDrag:{boolean:M},hover:{boolean:M},keyboard:{enabled:{boolean:M},speed:{x:{number:x},y:{number:x},zoom:{number:x},__type__:{object:F}},bindToWindow:{boolean:M},autoFocus:{boolean:M},__type__:{object:F,boolean:M}},multiselect:{boolean:M},navigationButtons:{boolean:M},selectable:{boolean:M},selectConnectedEdges:{boolean:M},hoverConnectedEdges:{boolean:M},tooltipDelay:{number:x},zoomView:{boolean:M},zoomSpeed:{number:x},__type__:{object:F}},layout:{randomSeed:{undefined:"undefined",number:x,string:P},improvedLayout:{boolean:M},clusterThreshold:{number:x},hierarchical:{enabled:{boolean:M},levelSeparation:{number:x},nodeSpacing:{number:x},treeSpacing:{number:x},blockShifting:{boolean:M},edgeMinimization:{boolean:M},parentCentralization:{boolean:M},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:F,boolean:M}},__type__:{object:F}},manipulation:{enabled:{boolean:M},initiallyActive:{boolean:M},addNode:{boolean:M,function:"function"},addEdge:{boolean:M,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:F,boolean:M,function:"function"}},deleteNode:{boolean:M,function:"function"},deleteEdge:{boolean:M,function:"function"},controlNodeStyle:Sr,__type__:{object:F,boolean:M}},nodes:Sr,physics:{enabled:{boolean:M},barnesHut:{theta:{number:x},gravitationalConstant:{number:x},centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},damping:{number:x},avoidOverlap:{number:x},__type__:{object:F}},forceAtlas2Based:{theta:{number:x},gravitationalConstant:{number:x},centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},damping:{number:x},avoidOverlap:{number:x},__type__:{object:F}},repulsion:{centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},nodeDistance:{number:x},damping:{number:x},__type__:{object:F}},hierarchicalRepulsion:{centralGravity:{number:x},springLength:{number:x},springConstant:{number:x},nodeDistance:{number:x},damping:{number:x},avoidOverlap:{number:x},__type__:{object:F}},maxVelocity:{number:x},minVelocity:{number:x},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:M},iterations:{number:x},updateInterval:{number:x},onlyDynamicEdges:{boolean:M},fit:{boolean:M},__type__:{object:F,boolean:M}},timestep:{number:x},adaptiveTimestep:{boolean:M},wind:{x:{number:x},y:{number:x},__type__:{object:F}},__type__:{object:F,boolean:M}},autoResize:{boolean:M},clickToUse:{boolean:M},locale:{string:P},locales:{__any__:{any:"any"},__type__:{object:F}},height:{string:P},width:{string:P},__type__:{object:F}},Tr={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},vw=(n,t,e)=>{var i;return!(!Ri(n).call(n,"physics")||!Ri(i=Tr.physics.solver).call(i,t)||e.physics.solver===t||t==="wind")};var AC=Object.freeze({__proto__:null,allOptions:mw,configuratorHideOption:vw,configureOptions:Tr});class jC{constructor(){}getDistances(t,e,i){const o={},s=t.edges;for(let a=0;a<e.length;a++){const h={};o[e[a]]=h;for(let d=0;d<e.length;d++)h[e[d]]=a==d?0:1e9}for(let a=0;a<i.length;a++){const h=s[i[a]];h.connected===!0&&o[h.fromId]!==void 0&&o[h.toId]!==void 0&&(o[h.fromId][h.toId]=1,o[h.toId][h.fromId]=1)}const r=e.length;for(let a=0;a<r;a++){const h=e[a],d=o[h];for(let l=0;l<r-1;l++){const c=e[l],u=o[c];for(let p=l+1;p<r;p++){const g=e[p],m=o[g],f=Math.min(u[g],u[h]+d[g]);u[g]=f,m[c]=f}}}return o}}class RC{constructor(t,e,i){this.body=t,this.springLength=e,this.springConstant=i,this.distanceSolver=new jC}setOptions(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}solve(t,e){let i=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const o=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(o),this._createK_matrix(o),this._createE_matrix();let s=0;const r=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3));let a=1e9,h=0,d=0,l=0,c=0,u=0;for(;a>.01&&s<r;)for(s+=1,[h,a,d,l]=this._getHighestEnergyNode(i),c=a,u=0;c>1&&u<5;)u+=1,this._moveNode(h,d,l),[c,d,l]=this._getEnergy(h)}_getHighestEnergyNode(t){const e=this.body.nodeIndices,i=this.body.nodes;let o=0,s=e[0],r=0,a=0;for(let h=0;h<e.length;h++){const d=e[h];if(i[d].predefinedPosition!==!0||i[d].isCluster===!0&&t===!0||i[d].options.fixed.x!==!0||i[d].options.fixed.y!==!0){const[l,c,u]=this._getEnergy(d);o<l&&(o=l,s=d,r=c,a=u)}}return[s,o,r,a]}_getEnergy(t){const[e,i]=this.E_sums[t];return[Math.sqrt(e**2+i**2),e,i]}_moveNode(t,e,i){const o=this.body.nodeIndices,s=this.body.nodes;let r=0,a=0,h=0;const d=s[t].x,l=s[t].y,c=this.K_matrix[t],u=this.L_matrix[t];for(let m=0;m<o.length;m++){const f=o[m];if(f!==t){const v=s[f].x,y=s[f].y,_=c[f],b=u[f],w=1/((d-v)**2+(l-y)**2)**1.5;r+=_*(1-b*(l-y)**2*w),a+=_*(b*(d-v)*(l-y)*w),h+=_*(1-b*(d-v)**2*w)}}const p=(e/r+i/a)/(a/r-h/a),g=-(a*p+e)/r;s[t].x+=g,s[t].y+=p,this._updateE_matrix(t)}_createL_matrix(t){const e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(let o=0;o<e.length;o++){this.L_matrix[e[o]]={};for(let s=0;s<e.length;s++)this.L_matrix[e[o]][e[s]]=i*t[e[o]][e[s]]}}_createK_matrix(t){const e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(let o=0;o<e.length;o++){this.K_matrix[e[o]]={};for(let s=0;s<e.length;s++)this.K_matrix[e[o]][e[s]]=i*t[e[o]][e[s]]**-2}}_createE_matrix(){const t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(let i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(let i=0;i<t.length;i++){const o=t[i],s=e[o].x,r=e[o].y;let a=0,h=0;for(let d=i;d<t.length;d++){const l=t[d];if(l!==o){const c=e[l].x,u=e[l].y,p=1/Math.sqrt((s-c)**2+(r-u)**2);this.E_matrix[o][d]=[this.K_matrix[o][l]*(s-c-this.L_matrix[o][l]*(s-c)*p),this.K_matrix[o][l]*(r-u-this.L_matrix[o][l]*(r-u)*p)],this.E_matrix[l][i]=this.E_matrix[o][d],a+=this.E_matrix[o][d][0],h+=this.E_matrix[o][d][1]}}this.E_sums[o]=[a,h]}}_updateE_matrix(t){const e=this.body.nodeIndices,i=this.body.nodes,o=this.E_matrix[t],s=this.K_matrix[t],r=this.L_matrix[t],a=i[t].x,h=i[t].y;let d=0,l=0;for(let c=0;c<e.length;c++){const u=e[c];if(u!==t){const p=o[c],g=p[0],m=p[1],f=i[u].x,v=i[u].y,y=1/Math.sqrt((a-f)**2+(h-v)**2),_=s[u]*(a-f-r[u]*(a-f)*y),b=s[u]*(h-v-r[u]*(h-v)*y);o[c]=[_,b],d+=_,l+=b;const w=this.E_sums[u];w[0]+=_-g,w[1]+=b-m}}this.E_sums[t]=[d,l]}}function z(n,t,e){var i,o,s,r;if(!(this instanceof z))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:n_,clickToUse:!1},yt(this.options,this.defaultOptions),this.body={container:n,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:I(i=this.on).call(i,this),off:I(o=this.off).call(o,this),emit:I(s=this.emit).call(s,this),once:I(r=this.once).call(r,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Yu(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new I_,this.canvas=new IO(this.body),this.selectionHandler=new aC(this.body,this.canvas),this.interactionHandler=new BO(this.body,this.canvas,this.selectionHandler),this.view=new PO(this.body,this.canvas),this.renderer=new TO(this.body,this.canvas),this.physics=new _O(this.body),this.layoutEngine=new zC(this.body),this.clustering=new SO(this.body),this.manipulation=new FC(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new WE(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new uO(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new RC(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(e),this.setData(t)}function Dr(n){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t].redundant=n[t].used,n[t].used=[])}function yw(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&n[t].redundant){for(let e=0;e<n[t].redundant.length;e++)n[t].redundant[e].parentNode.removeChild(n[t].redundant[e]);n[t].redundant=[]}}function Ji(n,t,e){let i;return Object.prototype.hasOwnProperty.call(t,n)?t[n].redundant.length>0?(i=t[n].redundant[0],t[n].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",n),e.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",n),t[n]={used:[],redundant:[]},e.appendChild(i)),t[n].used.push(i),i}rd(z.prototype),z.prototype.setOptions=function(n){if(n===null&&(n=void 0),n!==void 0){if(el.validate(n,mw)===!0&&console.error("%cErrors have been found in the supplied options object.",jn),ke(["locale","locales","clickToUse"],this.options,n),n.locale!==void 0&&(n.locale=function(t,e){try{const[o,s]=e.split(/[-_ /]/,2),r=o!=null?o.toLowerCase():null,a=s!=null?s.toUpperCase():null;if(r&&a){const h=r+"-"+a;if(Object.prototype.hasOwnProperty.call(t,h))return h;var i;console.warn(h_(i="Unknown variant ".concat(a," of language ")).call(i,r,"."))}if(r){const h=r;if(Object.prototype.hasOwnProperty.call(t,h))return h;console.warn("Unknown language ".concat(r))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(o){return console.error(o),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}(n.locales||this.options.locales,n.locale)),n=this.layoutEngine.setOptions(n.layout,n),this.canvas.setOptions(n),this.groups.setOptions(n.groups),this.nodesHandler.setOptions(n.nodes),this.edgesHandler.setOptions(n.edges),this.physics.setOptions(n.physics),this.manipulation.setOptions(n.manipulation,n,this.options),this.interactionHandler.setOptions(n.interaction),this.renderer.setOptions(n.interaction),this.selectionHandler.setOptions(n.interaction),n.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in n&&(this.configurator||(this.configurator=new Jd(this,this.body.container,Tr,this.canvas.pixelRatio,vw)),this.configurator.setOptions(n.configure)),this.configurator&&this.configurator.options.enabled===!0){const t={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Z(t.nodes,this.nodesHandler.options),Z(t.edges,this.edgesHandler.options),Z(t.layout,this.layoutEngine.options),Z(t.interaction,this.selectionHandler.options),Z(t.interaction,this.renderer.options),Z(t.interaction,this.interactionHandler.options),Z(t.manipulation,this.manipulation.options),Z(t.physics,this.physics.options),Z(t.global,this.canvas.options),Z(t.global,this.options),this.configurator.setModuleOptions(t)}n.clickToUse!==void 0?n.clickToUse===!0?this.activator===void 0&&(this.activator=new $d(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},z.prototype._updateVisibleIndices=function(){const n=this.body.nodes,t=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(this.clustering._isClusteredNode(e)||n[e].options.hidden!==!1||this.body.nodeIndices.push(n[e].id));for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e],o=n[i.fromId],s=n[i.toId],r=o!==void 0&&s!==void 0;!this.clustering._isClusteredEdge(e)&&i.options.hidden===!1&&r&&o.options.hidden===!1&&s.options.hidden===!1&&this.body.edgeIndices.push(i.id)}},z.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})},z.prototype.setData=function(n){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),n&&n.dot&&(n.nodes||n.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(n&&n.options),n&&n.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const t=is(n.dot);return void this.setData(t)}if(n&&n.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const t=ns(n.gephi);return void this.setData(t)}this.nodesHandler.setData(n&&n.nodes,!0),this.edgesHandler.setData(n&&n.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},z.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const n in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,n)&&delete this.body.nodes[n];for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&delete this.body.edges[n];$t(this.body.container)},z.prototype._updateValueRange=function(n){let t,e,i,o=0;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t].getValue();s!==void 0&&(e=e===void 0?s:Math.min(s,e),i=i===void 0?s:Math.max(s,i),o+=s)}if(e!==void 0&&i!==void 0)for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&n[t].setValueRange(e,i,o)},z.prototype.isActive=function(){return!this.activator||this.activator.active},z.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},z.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},z.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},z.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},z.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},z.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},z.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},z.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},z.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},z.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},z.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},z.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},z.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},z.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},z.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},z.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},z.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},z.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},z.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},z.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},z.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},z.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},z.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},z.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},z.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},z.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},z.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},z.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},z.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},z.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},z.prototype.getConnectedNodes=function(n){return this.body.nodes[n]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},z.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},z.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},z.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},z.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},z.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},z.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},z.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},z.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},z.prototype.getNodeAt=function(){const n=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return n!==void 0&&n.id!==void 0?n.id:n},z.prototype.getEdgeAt=function(){const n=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return n!==void 0&&n.id!==void 0?n.id:n},z.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},z.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},z.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()},z.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},z.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},z.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},z.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},z.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},z.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},z.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},z.prototype.getOptionsFromConfigurator=function(){let n={};return this.configurator&&(n=this.configurator.getOptions.apply(this.configurator)),n};var bw=Object.freeze({__proto__:null,cleanupElements:yw,drawBar:function(n,t,e,i,o,s,r,a){if(i!=0){i<0&&(t-=i*=-1);const h=Ji("rect",s,r);h.setAttributeNS(null,"x",n-.5*e),h.setAttributeNS(null,"y",t),h.setAttributeNS(null,"width",e),h.setAttributeNS(null,"height",i),h.setAttributeNS(null,"class",o),a&&h.setAttributeNS(null,"style",a)}},drawPoint:function(n,t,e,i,o,s){let r;if(e.style=="circle"?(r=Ji("circle",i,o),r.setAttributeNS(null,"cx",n),r.setAttributeNS(null,"cy",t),r.setAttributeNS(null,"r",.5*e.size)):(r=Ji("rect",i,o),r.setAttributeNS(null,"x",n-.5*e.size),r.setAttributeNS(null,"y",t-.5*e.size),r.setAttributeNS(null,"width",e.size),r.setAttributeNS(null,"height",e.size)),e.styles!==void 0&&r.setAttributeNS(null,"style",e.styles),r.setAttributeNS(null,"class",e.className+" vis-point"),s){const a=Ji("text",i,o);s.xOffset&&(n+=s.xOffset),s.yOffset&&(t+=s.yOffset),s.content&&(a.textContent=s.content),s.className&&a.setAttributeNS(null,"class",s.className+" vis-label"),a.setAttributeNS(null,"x",n),a.setAttributeNS(null,"y",t)}return r},getDOMElement:function(n,t,e,i){let o;return Object.prototype.hasOwnProperty.call(t,n)?t[n].redundant.length>0?(o=t[n].redundant[0],t[n].redundant.shift()):(o=document.createElement(n),i!==void 0?e.insertBefore(o,i):e.appendChild(o)):(o=document.createElement(n),t[n]={used:[],redundant:[]},i!==void 0?e.insertBefore(o,i):e.appendChild(o)),t[n].used.push(o),o},getSVGElement:Ji,prepareElements:Dr,resetElements:function(n){Dr(n),yw(n),Dr(n)}});const ww={Images:Yu,dotparser:$1,gephiParser:o_,allOptions:AC,convertDot:is,convertGephi:ns};var LC=Object.freeze({__proto__:null,DOMutil:bw,DataSet:ce,DataView:Ui,Hammer:te,Network:z,Queue:ci,data:Xf,keycharm:vb,network:ww,util:ml});_t.DOMutil=bw,_t.DataSet=ce,_t.DataView=Ui,_t.Hammer=te,_t.Network=z,_t.Queue=ci,_t.data=Xf,_t.default=LC,_t.keycharm=vb,_t.network=ww,_t.util=ml,Object.defineProperty(_t,"__esModule",{value:!0})});
